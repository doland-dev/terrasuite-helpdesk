{"version":3,"file":"MobileLayout-abf0d10a.js","sources":["../../../../desk/src/composables/mobile.ts","../../../../desk/src/components/layouts/MobileSidebar.vue","../../../../desk/src/components/layouts/MobileAppHeader.vue","../../../../desk/src/components/layouts/MobileLayout.vue"],"sourcesContent":["import { ref } from \"vue\";\n\nexport const mobileSidebarOpened = ref(false);\n","<template>\n  <TransitionRoot :show=\"sidebarOpened\">\n    <Dialog as=\"div\" @close=\"sidebarOpened = false\" class=\"fixed inset-0 z-40\">\n      <TransitionChild\n        as=\"template\"\n        enter=\"transition ease-in-out duration-200 transform\"\n        enter-from=\"-translate-x-full\"\n        enter-to=\"translate-x-0\"\n        leave=\"transition ease-in-out duration-200 transform\"\n        leave-from=\"translate-x-0\"\n        leave-to=\"-translate-x-full\"\n      >\n        <div\n          class=\"relative z-10 flex h-full w-[230px] flex-col border-r bg-gray-50 transition-all duration-300 ease-in-out\"\n        >\n          <!-- user dropwdown -->\n          <div><UserMenu class=\"p-2 mb-2\" :options=\"profileSettings\" /></div>\n          <!-- notifications -->\n          <div class=\"overflow-y-auto px-2\" v-if=\"!isCustomerPortal\">\n            <div class=\"mb-3 flex flex-col gap-1\">\n              <SidebarLink\n                class=\"relative\"\n                label=\"Notifications\"\n                :icon=\"LucideBell\"\n                :on-click=\"() => (sidebarOpened = false)\"\n                :is-expanded=\"true\"\n                to=\"Notifications\"\n              >\n                <template #right>\n                  <Badge\n                    v-if=\"notificationStore.unread\"\n                    :label=\"notificationStore.unread\"\n                    theme=\"gray\"\n                    variant=\"subtle\"\n                  />\n                </template>\n              </SidebarLink>\n              <SidebarLink\n                v-if=\"!isCustomerPortal\"\n                class=\"relative\"\n                label=\"Dashboard\"\n                :icon=\"LucideLayoutDashboard\"\n                :to=\"'Dashboard'\"\n                :is-active=\"isActiveTab('Dashboard')\"\n                :is-expanded=\"true\"\n              />\n            </div>\n          </div>\n\n          <div v-for=\"view in allViews\" :key=\"view.label\">\n            <div\n              v-if=\"!view.hideLabel && view.views?.length\"\n              class=\"mx-2 my-2 h-1\"\n            />\n            <Section\n              :label=\"view.label\"\n              :hideLabel=\"view.hideLabel\"\n              :opened=\"view.opened\"\n            >\n              <template #header=\"{ opened, hide, toggle }\">\n                <div\n                  v-if=\"!hide\"\n                  class=\"flex cursor-pointer gap-1.5 px-1 text-base font-medium text-ink-gray-5 transition-all duration-300 ease-in-out\"\n                  :class=\"'ml-2 mt-4 h-7 w-auto opacity-100'\"\n                  @click=\"toggle()\"\n                >\n                  <FeatherIcon\n                    name=\"chevron-right\"\n                    class=\"h-4 text-ink-gray-9 transition-all duration-300 ease-in-out\"\n                    :class=\"{ 'rotate-90': opened }\"\n                  />\n                  <span>{{ view.label }}</span>\n                </div>\n              </template>\n              <nav class=\"flex flex-col ml-2 mr-1\">\n                <SidebarLink\n                  v-for=\"link in view.views\"\n                  :icon=\"link.icon\"\n                  :label=\"link.label\"\n                  :to=\"link.to\"\n                  :key=\"link.label\"\n                  :is-expanded=\"true\"\n                  :is-active=\"isActiveTab(link.to)\"\n                  class=\"my-0.5\"\n                  :onClick=\"link.onClick\"\n                />\n              </nav>\n            </Section>\n          </div>\n        </div>\n      </TransitionChild>\n      <TransitionChild\n        as=\"template\"\n        enter=\"transition-opacity ease-linear duration-200\"\n        enter-from=\"opacity-0\"\n        enter-to=\"opacity-100\"\n        leave=\"transition-opacity ease-linear duration-200\"\n        leave-from=\"opacity-100\"\n        leave-to=\"opacity-0\"\n      >\n        <DialogOverlay class=\"fixed inset-0 bg-gray-600 bg-opacity-50\" />\n      </TransitionChild>\n    </Dialog>\n  </TransitionRoot>\n</template>\n\n<script setup lang=\"ts\">\nimport {\n  Dialog,\n  DialogOverlay,\n  TransitionChild,\n  TransitionRoot,\n} from \"@headlessui/vue\";\nimport { computed, markRaw } from \"vue\";\nimport { useRoute, useRouter } from \"vue-router\";\n\nimport { Section } from \"@/components\";\nimport SidebarLink from \"@/components/SidebarLink.vue\";\nimport UserMenu from \"@/components/UserMenu.vue\";\nimport { useNotificationStore } from \"@/stores/notification\";\n\nimport { mobileSidebarOpened as sidebarOpened } from \"@/composables/mobile\";\nimport { currentView, useView } from \"@/composables/useView\";\n\nimport LucideBell from \"~icons/lucide/bell\";\nimport LucideLayoutDashboard from \"~icons/lucide/layout-dashboard\";\n\nimport { useAuthStore } from \"@/stores/auth\";\nimport { isCustomerPortal } from \"@/utils\";\nimport Apps from \"../Apps.vue\";\nimport {\n  agentPortalSidebarOptions,\n  customerPortalSidebarOptions,\n} from \"./layoutSettings\";\nconst { pinnedViews, publicViews } = useView();\n\nconst notificationStore = useNotificationStore();\nconst route = useRoute();\nconst router = useRouter();\nconst authStore = useAuthStore();\n\nconst allViews = computed(() => {\n  const items = isCustomerPortal.value\n    ? customerPortalSidebarOptions\n    : agentPortalSidebarOptions;\n\n  const options = [\n    {\n      label: \"All Views\",\n      hideLabel: true,\n      opened: true,\n      views: items,\n    },\n  ];\n  if (publicViews.value?.length && !isCustomerPortal.value) {\n    options.push({\n      label: \"Public Views\",\n      opened: true,\n      hideLabel: false,\n      views: parseViews(publicViews.value),\n    });\n  }\n  if (pinnedViews.value?.length) {\n    options.push({\n      label: \"Private Views\",\n      opened: true,\n      hideLabel: false,\n      views: parseViews(pinnedViews.value),\n    });\n  }\n  return options;\n});\nfunction parseViews(views) {\n  return views.map((view) => {\n    return {\n      label: view.label,\n      icon: view.icon,\n      to: {\n        name: view.route_name,\n        query: { view: view.name },\n      },\n      onClick: () => {\n        currentView.value = {\n          label: view.label,\n          icon: view.icon,\n        };\n      },\n    };\n  });\n}\n\nconst customerPortalDropdown = computed(() => [\n  {\n    label: \"Log out\",\n    icon: \"log-out\",\n    onClick: () => authStore.logout(),\n  },\n]);\n\nconst agentPortalDropdown = computed(() => [\n  {\n    component: markRaw(Apps),\n  },\n  {\n    label: \"Customer portal\",\n    icon: \"users\",\n    onClick: () => {\n      const path = router.resolve({ name: \"TicketsCustomer\" });\n      window.open(path.href);\n    },\n  },\n  {\n    icon: \"life-buoy\",\n    label: \"Support\",\n    onClick: () => window.open(\"https://t.me/frappedesk\"),\n  },\n  {\n    icon: \"book-open\",\n    label: \"Docs\",\n    onClick: () => window.open(\"https://docs.frappe.io/helpdesk\"),\n  },\n  {\n    label: \"Log out\",\n    icon: \"log-out\",\n    onClick: () => authStore.logout(),\n  },\n]);\n\nconst profileSettings = computed(() => {\n  return isCustomerPortal.value\n    ? customerPortalDropdown.value\n    : agentPortalDropdown.value;\n});\n\nfunction isActiveTab(to: string) {\n  if (route.query.view) {\n    return route.query.view == to?.query?.view;\n  }\n  return route.name === to;\n}\n</script>\n\n<style scoped></style>\n","<template>\n  <div class=\"flex border-b h-12 items-center\">\n    <div class=\"z-20 -mr-4 ml-1 flex items-center justify-center\">\n      <Button variant=\"ghosted\" @click=\"sidebarOpened = !sidebarOpened\">\n        <FeatherIcon name=\"menu\" class=\"size-4\" />\n      </Button>\n    </div>\n    <header id=\"app-header\" class=\"w-full\"></header>\n  </div>\n</template>\n\n<script setup>\nimport { mobileSidebarOpened as sidebarOpened } from \"@/composables/mobile\";\n</script>\n","<template>\n  <div class=\"flex h-screen w-screen\">\n    <MobileSidebar />\n    <div class=\"flex h-full flex-col flex-1 overflow-auto\">\n      <MobileAppHeader />\n      <slot />\n    </div>\n  </div>\n</template>\n<script setup>\nimport MobileSidebar from \"./MobileSidebar.vue\";\nimport MobileAppHeader from \"./MobileAppHeader.vue\";\n</script>\n"],"names":["mobileSidebarOpened","ref","pinnedViews","publicViews","useView","notificationStore","useNotificationStore","route","useRoute","router","useRouter","authStore","useAuthStore","allViews","computed","options","isCustomerPortal","customerPortalSidebarOptions","agentPortalSidebarOptions","_a","parseViews","_b","views","view","currentView","customerPortalDropdown","agentPortalDropdown","markRaw","Apps","path","profileSettings","isActiveTab","to","_createBlock","_unref","TransitionRoot","sidebarOpened","_createVNode","Dialog","TransitionChild","_createElementVNode","_hoisted_1","UserMenu","_openBlock","_createElementBlock","_hoisted_2","_hoisted_3","SidebarLink","LucideBell","_component_Badge","LucideLayoutDashboard","_Fragment","_renderList","_hoisted_4","Section","opened","hide","toggle","_normalizeClass","_component_FeatherIcon","_toDisplayString","_hoisted_6","link","DialogOverlay","_component_Button","_cache","$event","MobileSidebar","MobileAppHeader","_renderSlot","_ctx"],"mappings":"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"}