import{bq as K,A as V,c as w,d as Q,M as T,r as G,e as D,f as X,w as _,g as h,aI as Z,C as ee,a2 as te,h as o,bn as O,l as k,t as U,k as I,G as q,F as z,x as H,P as ne}from"./index-54e545bb.js";function f(...t){return new Date(...t)}function i(t){return!t||t.toString()==="Invalid Date"?"":K(t).set("hour",0).set("minute",0).set("second",0).set("millisecond",0).format("YYYY-MM-DD")}function A(t,a){let p=1;a<0&&(p=-1,a=Math.abs(a));const s=[];for(;a;)t=f(t.getFullYear(),t.getMonth(),t.getDate()+p),s.push(t),a--;return p===-1?s.reverse():s}function ae(t,a){const s=[31,28,31,30,31,30,31,31,30,31,30,31][t];return t===1&&le(a)?29:s}function le(t){return t%400===0?!0:t%100===0?!1:t%4===0}function se(){const t=V(0),a=V(0),p=w(()=>f()),s=w(()=>{if(!(t.value&&a.value))return[];const r=a.value-1,v=t.value,g=f(v,r,1),P=f(v,r+1,0),c=g.getDay(),l=6-P.getDay(),n=A(g,-c),W=A(P,l),R=ae(r,v),$=A(g,R-1);let d=[...n,g,...$,...W];if(d.length<42){const B=d.at(-1);if(B){const L=A(B,42-d.length);d=d.concat(...L)}}return d}),Y=w(()=>{const r=[],v=s.value.slice();for(;v.length;){const g=v.splice(0,7);r.push(g)}return r}),S=w(()=>{if(!(t.value&&a.value))return"";const r=f(t.value,a.value-1,1);return`${r.toLocaleString("en-US",{month:"long"})}, ${r.getFullYear()}`});function C(){b(-1)}function F(){b(1)}function b(r){a.value=a.value+r,a.value<1&&(a.value=12,t.value=t.value-1),a.value>12&&(a.value=1,t.value=t.value+1)}return{currentYear:t,currentMonth:a,today:p,dates:s,datesAsWeeks:Y,formattedMonth:S,prevMonth:C,nextMonth:F,changeMonth:b}}const oe={class:"flex items-center p-1 text-ink-gray-4"},re={class:"flex-1 text-center text-base font-medium text-ink-gray-6"},ue={class:"flex items-center justify-center gap-1 p-1"},ie={class:"flex flex-col items-center justify-center p-1 text-ink-gray-8"},ce={class:"flex items-center text-xs uppercase"},fe=["onClick"],ve={class:"flex justify-end space-x-1 p-1"},me=Q({__name:"DateRangePicker",props:{value:{},modelValue:{},placeholder:{},formatter:{type:Function},readonly:{type:Boolean},inputClass:{},placement:{}},emits:["update:modelValue","change"],setup(t,{expose:a,emit:p}){const s=t,Y=p,{currentYear:S,currentMonth:C,today:F,datesAsWeeks:b,formattedMonth:r,prevMonth:v,nextMonth:g}=se(),P=w(()=>{var u,x,M;let e="mt-2";return(u=s.placement)!=null&&u.startsWith("top")?e="mb-2":(x=s.placement)!=null&&x.startsWith("left")?e="mr-2":(M=s.placement)!=null&&M.startsWith("right")&&(e="ml-2"),e}),c=w(()=>s.value?s.value:s.modelValue),l=V(""),n=V("");function W(e){l.value&&n.value?(l.value=i(e),n.value=""):l.value&&!n.value?n.value=i(e):l.value=i(e),R()}function R(){if(!l.value||!n.value)return;let e=f(l.value),u=f(n.value);if(e>u){let x=e;e=u,u=x}l.value=i(e),n.value=i(u)}function $(){let e=`${l.value},${n.value}`;!l.value&&!n.value&&(e=""),Y("change",e),Y("update:modelValue",e)}function d(){let e=n.value?f(n.value):F.value;S.value=e.getFullYear(),C.value=e.getMonth()+1}function B(e){return!l.value||!n.value?!1:e>=f(l.value)&&e<=f(n.value)}function L(e){return e?(typeof e=="string"&&(e=e.split(",")),s.formatter?s.formatter(e[0])+" to "+s.formatter(e[1]):e):""}function J(){l.value="",n.value="",$()}const E=V();return T(()=>{let e=typeof(c==null?void 0:c.value)=="string"?c.value.split(","):c.value;l.value=(e==null?void 0:e[0])||"",n.value=(e==null?void 0:e[1])||"",d()}),a({open:()=>{var e;(e=E.value)==null||e.open()}}),(e,u)=>{const x=G("FeatherIcon"),M=G("Button");return D(),X(o(ne),{ref_key:"popoverRef",ref:E,onOpen:d,class:"flex w-full [&>div:first-child]:w-full",placement:e.placement},{target:_(({togglePopover:j})=>[h(o(O),te({readonly:"",type:"text",placeholder:e.placeholder,value:c.value&&e.formatter?L(c.value):c.value,onFocus:y=>e.readonly?null:j(),class:["w-full",e.inputClass]},e.$attrs),Z({_:2},[e.$slots.prefix?{name:"prefix",fn:_(()=>[ee(e.$slots,"prefix")]),key:"0"}:void 0]),1040,["placeholder","value","onFocus","class"])]),body:_(({togglePopover:j})=>[k("div",{class:H(["w-fit select-none text-base text-ink-gray-9 divide-y divide-outline-gray-modals rounded-lg bg-surface-modal shadow-2xl ring-1 ring-black ring-opacity-5 focus:outline-none",P.value])},[k("div",oe,[h(M,{variant:"ghost",class:"h-7 w-7",onClick:o(v)},{default:_(()=>[h(x,{"stroke-width":2,name:"chevron-left",class:"h-4 w-4"})]),_:1},8,["onClick"]),k("div",re,U(o(r)),1),h(M,{variant:"ghost",class:"h-7 w-7",onClick:o(g)},{default:_(()=>[h(x,{"stroke-width":2,name:"chevron-right",class:"h-4 w-4"})]),_:1},8,["onClick"])]),k("div",ue,[h(o(O),{class:"w-28 text-sm",type:"text",modelValue:l.value,"onUpdate:modelValue":u[0]||(u[0]=y=>l.value=y)},null,8,["modelValue"]),h(o(O),{class:"w-28 text-sm",type:"text",modelValue:n.value,"onUpdate:modelValue":u[1]||(u[1]=y=>n.value=y)},null,8,["modelValue"])]),k("div",ie,[k("div",ce,[(D(),I(z,null,q(["s","m","t","w","t","f","s"],(y,N)=>k("div",{class:"flex h-6 w-8 items-center justify-center text-center",key:N},U(y),1)),64))]),(D(!0),I(z,null,q(o(b),(y,N)=>(D(),I("div",{class:"flex items-center",key:N},[(D(!0),I(z,null,q(y,m=>(D(),I("div",{key:o(i)(m),class:H(["flex h-8 w-8 cursor-pointer items-center justify-center rounded hover:bg-surface-gray-2",{"text-ink-gray-3":m.getMonth()!==o(C)-1,"text-ink-gray-9":m.getMonth()===o(C)-1,"font-extrabold text-ink-gray-9":o(i)(m)===o(i)(o(F)),"rounded-none bg-surface-gray-3":B(m),"rounded-l-md rounded-r-none bg-surface-gray-6 text-ink-white hover:bg-surface-gray-6":l.value&&o(i)(m)===o(i)(l.value),"rounded-r-md bg-surface-gray-6 text-ink-white hover:bg-surface-gray-6":n.value&&o(i)(m)===o(i)(n.value)}]),onClick:()=>W(m)},U(m.getDate()),11,fe))),128))]))),128))]),k("div",ve,[h(M,{label:"Clear",onClick:()=>{J(),j()},disabled:!l.value||!n.value},null,8,["onClick","disabled"]),h(M,{variant:"solid",label:"Apply",disabled:!l.value||!n.value,onClick:()=>{$(),j()}},null,8,["disabled","onClick"])])],2)]),_:3},8,["placement"])}}});export{me as _,i as a,f as g,se as u};
//# sourceMappingURL=DateRangePicker.vue_vue_type_script_setup_true_lang-fc0fa242.js.map
