{"version":3,"file":"MobileNotifications-7e95fc11.js","sources":["../../../../desk/src/pages/MobileNotifications.vue"],"sourcesContent":["<template>\n  <LayoutHeader>\n    <template #left-header>\n      <Breadcrumbs\n        :items=\"[{ label: 'Notifications', route: { name: 'Notifications' } }]\"\n      />\n    </template>\n    <template #right-header>\n      <Tooltip :text=\"'Mark all as read'\">\n        <div>\n          <Button\n            :label=\"'Mark all as read'\"\n            @click=\"() => notificationStore.clear.submit()\"\n          >\n            <template #prefix>\n              <LucideCheckCheck class=\"h-4 w-4\" />\n            </template>\n          </Button>\n        </div>\n      </Tooltip>\n    </template>\n  </LayoutHeader>\n  <div v-if=\"notificationStore.data.length\" class=\"divide-y text-base\">\n    <RouterLink\n      v-for=\"n in notificationStore.data\"\n      :key=\"n.name\"\n      class=\"flex cursor-pointer items-start gap-3.5 px-5 py-2.5 hover:bg-gray-100\"\n      :to=\"getRoute(n)\"\n      @click=\"\n        () => {\n          notificationStore.read(n.reference_ticket);\n        }\n      \"\n    >\n      <UserAvatar :name=\"n.user_from\" />\n      <div>\n        <div class=\"mb-2 leading-5\">\n          <span class=\"space-x-1 text-gray-700\">\n            <span class=\"font-medium text-gray-900\">{{ n.user_from }}</span>\n            <span v-if=\"n.notification_type === 'Mention'\"\n              >mentioned you in ticket</span\n            >\n            <span v-if=\"n.notification_type === 'Assignment'\"\n              >assigned you a ticket</span\n            >\n            <span v-if=\"n.notification_type === 'Reaction'\"\n              >has reopened the ticket</span\n            >\n            <span class=\"font-medium text-gray-900\">{{\n              n.reference_ticket\n            }}</span>\n          </span>\n        </div>\n        <div class=\"flex items-center gap-2\">\n          <div class=\"text-sm text-gray-600\">\n            {{ dayjs.tz(n.creation).fromNow() }}\n          </div>\n          <div v-if=\"!n.read\" class=\"h-1.5 w-1.5 rounded-full bg-blue-400\" />\n        </div>\n      </div>\n    </RouterLink>\n  </div>\n  <div v-else class=\"flex flex-1 flex-col items-center gap-2\">\n    <LucideBell class=\"h-20 w-20 text-gray-300\" />\n    <div class=\"text-lg font-medium text-gray-500\">\n      {{ \"No new notifications\" }}\n    </div>\n  </div>\n</template>\n<script setup lang=\"ts\">\nimport { Breadcrumbs, Tooltip } from \"frappe-ui\";\nimport LayoutHeader from \"@/components/LayoutHeader.vue\";\nimport { useNotificationStore } from \"@/stores/notification\";\nimport { ref } from \"vue\";\nimport { onClickOutside } from \"@vueuse/core\";\nimport { dayjs } from \"@/dayjs\";\nimport { Notification } from \"@/types\";\nimport { UserAvatar } from \"@/components\";\nimport LucideBell from \"~icons/lucide/bell\";\nconst notificationStore = useNotificationStore();\nconst target = ref(null);\nonClickOutside(\n  target,\n  () => {\n    if (notificationStore.visible) {\n      notificationStore.toggle();\n    }\n  },\n  {\n    ignore: [\"#notifications-btn\"],\n  }\n);\n\nfunction getRoute(n: Notification) {\n  switch (n.notification_type) {\n    case \"Mention\":\n      return {\n        name: \"TicketAgent\",\n        params: {\n          ticketId: n.reference_ticket,\n        },\n        hash: \"#\" + n.reference_comment,\n      };\n    case \"Assignment\":\n    case \"Reaction\":\n      return {\n        name: \"TicketAgent\",\n        params: {\n          ticketId: n.reference_ticket,\n        },\n      };\n  }\n}\n</script>\n"],"names":["notificationStore","useNotificationStore","target","ref","onClickOutside","getRoute","n","_createVNode","LayoutHeader","_unref","Breadcrumbs","Tooltip","_createElementVNode","_component_Button","_cache","_component_LucideCheckCheck","_openBlock","_createElementBlock","_hoisted_1","_Fragment","_renderList","_createBlock","_component_RouterLink","UserAvatar","_hoisted_2","_hoisted_3","_hoisted_4","_toDisplayString","_hoisted_8","_hoisted_9","_hoisted_10","dayjs","_hoisted_11","_hoisted_12","LucideBell"],"mappings":"miCA+EA,MAAMA,EAAoBC,IACpBC,EAASC,EAAI,IAAI,EACvBC,EACEF,EACA,IAAM,CACAF,EAAkB,SACpBA,EAAkB,OAAO,CAE7B,EACA,CACE,OAAQ,CAAC,oBAAoB,CAC/B,CAAA,EAGF,SAASK,EAASC,EAAiB,CACjC,OAAQA,EAAE,kBAAmB,CAC3B,IAAK,UACI,MAAA,CACL,KAAM,cACN,OAAQ,CACN,SAAUA,EAAE,gBACd,EACA,KAAM,IAAMA,EAAE,iBAAA,EAElB,IAAK,aACL,IAAK,WACI,MAAA,CACL,KAAM,cACN,OAAQ,CACN,SAAUA,EAAE,gBACd,CAAA,CAEN,CACF,8EA/GEC,EAoBeC,EAAA,KAAA,CAnBF,gBACT,IAEE,CAFFD,EAEEE,EAAAC,CAAA,EAAA,CADC,MAAO,CAA8D,CAAA,MAAA,gBAAA,MAAA,CAAA,KAAA,eAAA,CAAA,CAAA,EAAA,CAAA,GAG/D,iBACT,IAWU,CAXVH,EAWUE,EAAAE,CAAA,EAAA,CAXA,KAAM,oBAAkB,WAChC,IASM,CATNC,EASM,MAAA,KAAA,CARJL,EAOSM,EAAA,CANN,MAAO,mBACP,QAAaC,EAAA,CAAA,IAAAA,EAAA,CAAA,EAAA,IAAAL,EAAAT,CAAA,EAAkB,MAAM,OAAM,EAAA,GAEjC,SACT,IAAoC,CAApCO,EAAoCQ,EAAA,CAAlB,MAAM,UAAS,CAAA,2BAOlCN,EAAiBT,CAAA,EAAC,KAAK,QAAlCgB,IAAAC,EAuCM,MAvCNC,EAuCM,EAtCJF,EAAA,EAAA,EAAAC,EAqCaE,EApCC,KAAAC,EAAAX,EAAAT,CAAA,EAAkB,KAAvBM,QADTe,EAqCaC,EAAA,CAnCV,IAAKhB,EAAE,KACR,MAAM,wEACL,GAAID,EAASC,CAAC,EACd,aAAkCG,EAAAT,CAAA,EAAkB,KAAKM,EAAE,gBAAgB,eAM5E,IAAkC,CAAlCC,EAAkCE,EAAAc,CAAA,EAAA,CAArB,KAAMjB,EAAE,4BACrBM,EAwBM,MAAA,KAAA,CAvBJA,EAgBM,MAhBNY,EAgBM,CAfJZ,EAcO,OAdPa,EAcO,CAbLb,EAAgE,OAAhEc,EAA2CC,EAAArB,EAAE,SAAS,EAAA,CAAA,EAC1CA,EAAE,oBAAiB,WAA/BU,EAAA,EAAAC,EAEC,SADE,yBAAuB,YAEdX,EAAE,oBAAiB,cAA/BU,EAAA,EAAAC,EAEC,SADE,uBAAqB,YAEZX,EAAE,oBAAiB,YAA/BU,EAAA,EAAAC,EAEC,SADE,yBAAuB,YAE1BL,EAES,OAFTgB,EACED,EAAArB,EAAE,gBAAgB,EAAA,CAAA,CAAA,KAIxBM,EAKM,MALNiB,EAKM,CAJJjB,EAEM,MAFNkB,EAEMH,EADDlB,EAAKsB,CAAA,EAAC,GAAGzB,EAAE,QAAQ,EAAE,QAAO,CAAA,EAAA,CAAA,EAErBA,EAAE,eAAdU,EAAA,EAAAC,EAAmE,MAAnEe,CAAmE,iDAK3EhB,EAAA,EAAAC,EAKM,MALNgB,EAKM,CAJJ1B,EAA8CE,EAAAyB,CAAA,EAAA,CAAlC,MAAM,0BAAyB,EAC3CpB,EAAA,CAAA,IAAAA,EAAA,CAAA,EAAAF,EAEM,MAFD,CAAA,MAAM,uCACN,sBAAsB,EAAA,EAAA,EAAA"}