import{_ as N}from"./Link-5130f40e.js";import{d as V,W as D,a as E,A as c,c as v,N as K,k as M,g as o,w as d,h as r,l as s,az as T,aW as $,u as L,q as U,r as q,e as H,ar as I,as as R,R as x}from"./index-54e545bb.js";import{_ as W}from"./Breadcrumbs.vue_vue_type_script_setup_true_lang-04848fc3.js";import{T as z}from"./TextEditor-bf30f06f.js";import{a as O}from"./more-horizontal-b561c647.js";import"./dayjs-8f71cd34.js";import{_ as j}from"./UserAvatar.vue_vue_type_script_setup_true_lang-73349f36.js";import{L as F,e as P}from"./knowledgeBase-de4d1c97.js";import{g as G}from"./globalStore-842ad0ec.js";import"./Dropdown.vue_vue_type_script_setup_true_lang-20398480.js";import"./Avatar.vue_vue_type_script_setup_true_lang-33c4215a.js";const J={class:"flex flex-col flex-1"},Q={class:"pt-6 mx-auto w-full max-w-4xl px-5"},X={class:"flex flex-col gap-3 rounded-lg border w-full p-4"},Y={class:"flex justify-between items-center mb-3"},Z={class:"flex gap-1 items-center flex-1 mr-7 max-w-fit overflow-hidden"},ee={class:"flex gap-2"},fe=V({__name:"NewArticle",props:{id:{type:String,required:!0}},setup(h){const b=D().getUser(),{$dialog:w}=G(),i=L(),_=U(),{updateOnboardingStep:y}=O("helpdesk"),{isManager:A}=E(),l=c(""),n=c(""),u=c(h.id||null),m=v(()=>_.query.title||"");function C(){P.submit({title:l.value,content:n.value,category:u.value},{onSuccess:t=>{x.success("Article created"),A&&y("first_article"),p(),i.push({name:"Article",params:{articleId:t.name}})},onError:t=>{x.error(t)}})}function B(){if(!l.value&&!n.value){i.push({name:"AgentKnowledgeBase"});return}w({title:"Discard Article",message:"Are you sure you want to discard this article?",actions:[{label:"Confirm",variant:"solid",onClick(t){i.push({name:"AgentKnowledgeBase"}),p(),t()}}]})}function p(){l.value="",n.value=""}const S=v(()=>{const t=[{label:"Knowledge Base",route:{name:"AgentKnowledgeBase"}}];return m.value&&t.push({label:m.value,route:{name:"AgentKnowledgeBase"}}),t.push({label:"New Article"}),t});return K(()=>({title:"New Article"})),(t,e)=>{const k=N,f=q("Button");return H(),M("div",J,[o(r(F),null,{"left-header":d(()=>[o(r(W),{items:S.value},null,8,["items"])]),"right-header":d(()=>e[4]||(e[4]=[])),_:1}),s("div",Q,[s("div",X,[s("div",Y,[s("div",Z,[o(r(j),{name:r(b).name,expand:!0},null,8,["name"]),e[5]||(e[5]=s("span",null,"in",-1)),o(k,{class:"form-control",doctype:"HD Article Category",placeholder:"Select Category",modelValue:u.value,"onUpdate:modelValue":e[0]||(e[0]=a=>u.value=a),pageLength:100,"hide-clear-button":!0},null,8,["modelValue"])]),s("div",ee,[o(f,{label:"Discard",onClick:B}),o(f,{label:"Create",variant:"solid",onClick:C})])]),T(s("textarea",{class:"w-full resize-none border-0 text-3xl font-bold placeholder-ink-gray-3 p-0 pb-3 border-b border-gray-200 focus:ring-0 focus:border-gray-200","onUpdate:modelValue":e[1]||(e[1]=a=>l.value=a),placeholder:"Title",rows:"1",wrap:"soft",maxlength:"140",autofocus:"",onInput:e[2]||(e[2]=a=>{const g=a.target;g.style.height=`${g.scrollHeight}px`})},null,544),[[$,l.value]]),o(r(z),{content:n.value,onChange:e[3]||(e[3]=a=>n.value=a),placeholder:"Write your article here...","editor-class":"rounded-b-lg max-w-[unset] prose-sm h-[calc(100vh-340px)] sm:h-[calc(100vh-250px)] overflow-auto"},{bottom:d(()=>[o(r(I),{class:"-ml-1 overflow-x-auto w-full",buttons:r(R)},null,8,["buttons"])]),_:1},8,["content"])])])])}}});export{fe as default};
//# sourceMappingURL=NewArticle-f72715a7.js.map
