import{_ as L}from"./UserAvatar.vue_vue_type_script_setup_true_lang-73349f36.js";import{m as U,n as h,r as D,e as f,f as k,w as p,l as o,t as v,g as i,h as a,bn as R,Z as V,d as z,W as F,A as y,a3 as T,N as j,k as x,F as q,G as E,q as S,z as A,y as I,aG as G,aH as P,L as Q,U as W}from"./index-54e545bb.js";import{_ as Y}from"./Breadcrumbs.vue_vue_type_script_setup_true_lang-04848fc3.js";import{_ as Z}from"./Dropdown.vue_vue_type_script_setup_true_lang-20398480.js";import{T as M}from"./TextEditor-bf30f06f.js";import"./more-horizontal-b561c647.js";import{d as J}from"./dayjs-8f71cd34.js";import{L as K}from"./knowledgeBase-de4d1c97.js";import{_ as O}from"./EmptyState.vue_vue_type_script_setup_true_lang-93f57bdf.js";import"./Avatar.vue_vue_type_script_setup_true_lang-33c4215a.js";const X={class:"flex items-center gap-3"},ee={class:"text-2xl font-semibold leading-6 text-gray-900"},te={class:"flex flex-col gap-4"},se={__name:"CannedResponseModal",props:U({name:{type:String,required:!1,default:null},isNew:{type:Boolean,required:!1,default:!1}},{modelValue:{},modelModifiers:{},title:{},titleModifiers:{},message:{},messageModifiers:{}}),emits:U(["update"],["update:modelValue","update:title","update:message"]),setup(u,{emit:w}){const _=u,g=h(u,"modelValue"),l=h(u,"title"),n=h(u,"message"),d=w;async function b(){_.name?await V("frappe.client.set_value",{doctype:"HD Canned Response",name:_.name,fieldname:{title:l.value,message:n.value}}):await V("frappe.client.insert",{doc:{doctype:"HD Canned Response",title:l.value,message:n.value}}),d("update"),g.value=!1}return(r,s)=>{const C=D("Dialog");return f(),k(C,{modelValue:g.value,"onUpdate:modelValue":s[2]||(s[2]=m=>g.value=m),options:{size:"xl",actions:[{label:u.isNew?"Create":"Update",variant:"solid",onClick:()=>b()}]}},{"body-title":p(()=>[o("div",X,[o("h3",ee,v(u.isNew?"Create Canned Response":"Edit Canned Response"),1)])]),"body-content":p(()=>[o("div",te,[o("div",null,[s[3]||(s[3]=o("div",{class:"mb-1.5 text-sm text-gray-600"},v("Title"),-1)),i(a(R),{modelValue:l.value,"onUpdate:modelValue":s[0]||(s[0]=m=>l.value=m),variant:"outline",placeholder:"Customer Query Resolved"},null,8,["modelValue"])]),o("div",null,[s[4]||(s[4]=o("div",{class:"mb-1.5 text-sm text-gray-600"},v("Message"),-1)),i(a(M),{ref:"content",variant:"outline","editor-class":"!prose-sm overflow-auto min-h-[180px] max-h-80 py-1.5 px-2 rounded border border-gray-300 bg-white hover:border-gray-400 hover:shadow-sm focus:bg-white focus:border-gray-500 focus:shadow-sm focus:ring-0 focus-visible:ring-2 focus-visible:ring-gray-400 text-gray-800 transition-colors","bubble-menu":!0,content:n.value,placeholder:"Your query has been resolved. Thank you for reaching out.",onChange:s[1]||(s[1]=m=>n.value=m)},null,8,["content"])])])]),_:1},8,["modelValue","options"])}}},ae={class:"flex flex-col"},oe={class:"flex-1 overflow-y-auto"},le={key:0,class:"grid grid-cols-1 md:grid-cols-3 lg:grid-cols-4 gap-4 p-4"},ne=["onClick"],ie={class:"flex items-center justify-between"},re={class:"truncate text-lg font-medium"},ue={class:"mt-2 flex items-center justify-between gap-2"},de={class:"flex items-center gap-2"},me={class:"text-sm text-gray-800"},fe={class:"text-sm text-gray-700"},ke=z({__name:"CannedResponses",setup(u){const{getUser:w}=F(),_=[{label:"Canned Responses",route:{name:"CannedResponses"}}],g=S(),l=y(null),n=y(null),d=y(null),b=g.hash.split("#")[1]==="new",r=y(b||!1),s=T({doctype:"HD Canned Response",fields:["name","title","message","owner","modified"],auto:!0,orderBy:"modified desc"});function C(c){l.value=c.title,n.value=c.message,d.value=c.name,r.value=!0}async function m(c){await V("frappe.client.delete",{doctype:"HD Canned Response",name:c}),s.reload()}return j(()=>({title:"Canned Responses"})),(c,t)=>{var N;const B=W,$=D("Button"),H=L;return f(),x("div",ae,[i(a(K),null,{"left-header":p(()=>[i(a(Y),{items:_})]),"right-header":p(()=>[i($,{label:"Create",theme:"gray",variant:"solid",onClick:t[0]||(t[0]=()=>{l.value=null,n.value=null,r.value=!0})},{prefix:p(()=>[i(B,{class:"h-4 w-4"})]),_:1})]),_:1}),o("div",oe,[((N=a(s).data)==null?void 0:N.length)>0?(f(),x("div",le,[(f(!0),x(q,null,E(a(s).data,e=>(f(),x("div",{key:e.name,class:"group flex h-60 cursor-pointer flex-col justify-between gap-2 rounded-lg border px-4 py-3 pt-2 shadow-sm hover:bg-gray-50",onClick:pe=>C(e)},[o("div",ie,[o("div",re,v(e.title),1),i(a(Z),{options:[{label:"Delete",icon:"trash-2",onClick:()=>m(e.name)}],onClick:t[1]||(t[1]=A(()=>{},["stop"]))},{default:p(()=>[i($,{icon:"more-horizontal",variant:"ghosted",class:"hover:bg-white"})]),_:2},1032,["options"])]),e.message?(f(),k(a(M),{key:0,content:e.message,editable:!1,"editor-class":"prose-sm",class:"flex-1 overflow-hidden response-preview"},null,8,["content"])):I("",!0),o("div",ue,[o("div",de,[i(H,{name:e.owner,size:"xs"},null,8,["name"]),o("div",me,v(a(w)(e.owner).full_name),1)]),i(a(Q),{text:a(G)(e.modified,a(P))},{default:p(()=>[o("div",fe,v(a(J).tz(e.modified).fromNow()),1)]),_:2},1032,["text"])])],8,ne))),128))])):(f(),k(O,{key:1,title:"No Canned Responses Found",onEmptyStateAction:t[2]||(t[2]=e=>r.value=!0)}))]),i(a(se),{modelValue:r.value,"onUpdate:modelValue":t[3]||(t[3]=e=>r.value=e),title:l.value,"onUpdate:title":t[4]||(t[4]=e=>l.value=e),message:n.value,"onUpdate:message":t[5]||(t[5]=e=>n.value=e),name:d.value,"is-new":!d.value,onClose:t[6]||(t[6]=()=>{r.value=!1,l.value=null,n.value=null,d.value=null}),onUpdate:t[7]||(t[7]=()=>{a(s).reload(),r.value=!1,l.value=null,n.value=null,d.value=null})},null,8,["modelValue","title","message","name","is-new"])])}}});export{ke as default};
//# sourceMappingURL=CannedResponses-71620722.js.map
