{"version":3,"file":"KnowledgeBaseAgent-43a197da.js","sources":["../../../../desk/src/components/knowledge-base/CategoryModal.vue","../../../../desk/src/components/knowledge-base/MergeCategoryModal.vue","../../../../desk/src/pages/knowledge-base/KnowledgeBaseAgent.vue"],"sourcesContent":["<template>\n  <Dialog\n    v-model=\"showDialog\"\n    :options=\"{ title: dialogTitle, actions: getActionButton() }\"\n  >\n    <template #body-content>\n      <div class=\"flex flex-col flex-1 gap-3\">\n        <textarea\n          class=\"text-base rounded py-1.5 px-2 border border-[--surface-gray-2] bg-surface-gray-2 placeholder-ink-gray-4 hover:border-outline-gray-modals hover:bg-surface-gray-3 focus:bg-surface-white focus:border-outline-gray-4 focus:shadow-sm focus:ring-0 focus-visible:ring-2 focus-visible:ring-outline-gray-3 text-ink-gray-8 transition-colors w-full block\"\n          ref=\"titleRef\"\n          placeholder=\"Support Issues\"\n          v-model=\"newTitle\"\n          :rows=\"1\"\n          maxlength=\"50\"\n          autofocus\n          @input=\"(e: Event) => {\n            const target = e.target as HTMLTextAreaElement;\n            target.style.height = `${target.scrollHeight}px`;\n          }\"\n        />\n      </div>\n    </template>\n  </Dialog>\n</template>\n\n<script setup lang=\"ts\">\nimport { computed } from \"vue\";\nimport { Dialog } from \"frappe-ui\";\nimport { ref } from \"vue\";\nimport { watch } from \"vue\";\n\nconst props = defineProps({\n  title: {\n    type: String,\n    default: \"\",\n  },\n  edit: {\n    type: Boolean,\n    default: false,\n  },\n});\n\nconst emit = defineEmits([\"update\", \"create\"]);\n\nconst showDialog = defineModel<boolean>();\nconst newTitle = defineModel<string>(\"title\");\n\nconst dialogTitle = computed(() =>\n  props.edit ? \"Edit Category\" : \"Create Category\"\n);\n\nconst titleRef = ref(null);\nwatch(\n  () => titleRef.value,\n  (newVal) => {\n    if (!newVal) return;\n    titleRef.value.style.height =\n      newVal.scrollHeight > newVal.clientHeight\n        ? newVal.scrollHeight + \"px\"\n        : newVal.scrollHeight + \"px\";\n  }\n);\n\nfunction getActionButton() {\n  const action = [];\n  if (props.edit) {\n    action.push({\n      label: \"Save\",\n      variant: \"solid\",\n      onClick: () => {\n        emit(\"update\");\n      },\n    });\n  } else {\n    action.push({\n      label: \"Create\",\n      variant: \"solid\",\n      onClick: () => {\n        emit(\"create\");\n      },\n    });\n  }\n  return action;\n}\n</script>\n","<template>\n  <Dialog\n    :options=\"{\n      title: 'Merge with another category',\n    }\"\n    @after-leave=\"\n      () => {\n        toCategory = null;\n      }\n    \"\n    v-model=\"showDialog\"\n  >\n    <template #body-content>\n      <p class=\"text-p-base text-ink-gray-8 mb-4\">\n        This will move all articles of the\n        <span class=\"whitespace-nowrap font-semibold\">{{ categoryTitle }}</span>\n        category to the selected category. This change is irreversible!\n      </p>\n      <Link\n        class=\"form-control\"\n        doctype=\"HD Article Category\"\n        placeholder=\"Select Category\"\n        v-model=\"toCategory\"\n        label=\"Category\"\n        :page-length=\"100\"\n      />\n    </template>\n    <template #actions>\n      <Button\n        class=\"w-full\"\n        variant=\"solid\"\n        label=\"Merge\"\n        @click=\"emit('merge', categoryId, toCategory)\"\n      />\n    </template>\n  </Dialog>\n</template>\n<script setup lang=\"ts\">\nimport { ref } from \"vue\";\nimport { Dialog } from \"frappe-ui\";\nimport { Link } from \"@/components\";\ndefineProps<{\n  categoryId: string;\n  categoryTitle: string;\n}>();\nconst emit = defineEmits([\"merge\"]);\nconst showDialog = defineModel<boolean>();\n\nconst toCategory = ref(\"\");\n</script>\n","<template>\n  <div class=\"flex flex-col\">\n    <LayoutHeader>\n      <template #left-header>\n        <div class=\"text-lg font-medium text-gray-900\">Knowledge Base</div>\n      </template>\n      <template #right-header>\n        <Dropdown :options=\"headerOptions\">\n          <Button label=\"Add new\" variant=\"solid\">\n            <template #prefix>\n              <LucidePlus class=\"h-4 w-4\" />\n            </template>\n          </Button>\n        </Dropdown>\n      </template>\n    </LayoutHeader>\n    <ListViewBuilder\n      ref=\"listViewRef\"\n      :options=\"options\"\n      @row-click=\"(row) => $router.push(`kb/articles/${row}`)\"\n    />\n    <CategoryModal\n      :edit=\"editTitle\"\n      v-model=\"showCategoryModal\"\n      v-model:title=\"category.title\"\n      @update=\"handleCategoryUpdate\"\n      @create=\"handleCategoryCreate\"\n    />\n    <MoveToCategoryModal v-model=\"moveToModal\" @move=\"handleMoveToCategory\" />\n    <MergeCategoryModal\n      :categoryTitle=\"category.title\"\n      :category-id=\"category.id\"\n      v-model=\"mergeModal\"\n      @merge=\"handleMergeCategory\"\n    />\n  </div>\n</template>\n\n<script setup lang=\"ts\">\nimport LayoutHeader from \"@/components/LayoutHeader.vue\";\nimport ListViewBuilder from \"@/components/ListViewBuilder.vue\";\nimport CategoryModal from \"@/components/knowledge-base/CategoryModal.vue\";\nimport MergeCategoryModal from \"@/components/knowledge-base/MergeCategoryModal.vue\";\nimport MoveToCategoryModal from \"@/components/knowledge-base/MoveToCategoryModal.vue\";\nimport { globalStore } from \"@/stores/globalStore\";\nimport {\n  deleteArticles,\n  deleteRes as deleteCategory,\n  mergeCategory,\n  moveToCategory,\n  newCategory,\n  updateCategoryTitle,\n} from \"@/stores/knowledgeBase\";\nimport { capture } from \"@/telemetry\";\nimport { Error } from \"@/types\";\nimport { copyToClipboard } from \"@/utils\";\nimport {\n  Badge,\n  Button,\n  Dropdown,\n  FeatherIcon,\n  createResource,\n  toast,\n  usePageMeta,\n} from \"frappe-ui\";\nimport { computed, h, onMounted, reactive, ref } from \"vue\";\nimport { useRouter } from \"vue-router\";\nimport LucideMerge from \"~icons/lucide/merge\";\n\nconst router = useRouter();\nconst { $dialog } = globalStore();\n\nconst category = reactive({\n  title: \"\",\n  id: \"\",\n});\n\nconst _title = ref(\"\");\nconst listViewRef = ref(null);\nconst editTitle = ref(false);\n\n// modals state\nconst showCategoryModal = ref(false);\nconst moveToModal = ref(false);\nconst mergeModal = ref(false);\n\nconst generalCategory = createResource({\n  url: \"helpdesk.api.knowledge_base.get_general_category\",\n  auto: true,\n  cache: [\"GeneralCategory\"],\n});\n\nconst headerOptions = [\n  {\n    label: \"Category\",\n    icon: \"folder\",\n    onClick: () => {\n      resetState();\n      editTitle.value = false;\n      showCategoryModal.value = true;\n    },\n  },\n  {\n    label: \"Article\",\n    icon: \"file-text\",\n    onClick: () => {\n      router.push({\n        name: \"NewArticle\",\n        params: {\n          id: generalCategory.data,\n        },\n        query: {\n          title: \"General\",\n        },\n      });\n    },\n  },\n];\n\nconst groupByActions = [\n  {\n    label: \"Add New Article\",\n    icon: \"plus\",\n    onClick: (groupedRow) => {\n      router.push({\n        name: \"NewArticle\",\n        params: {\n          id: groupedRow.group.value,\n        },\n        query: {\n          title: groupedRow.group.label,\n        },\n      });\n    },\n  },\n  {\n    label: \"Edit Title\",\n    icon: \"edit\",\n    onClick: (groupedRow) => {\n      editTitle.value = true;\n      showCategoryModal.value = true;\n      category.title = groupedRow.group.label;\n      category.id = groupedRow.group.value;\n      _title.value = groupedRow.group.label;\n    },\n  },\n  {\n    label: \"Merge\",\n    icon: LucideMerge,\n    onClick: (groupedRow) => {\n      mergeModal.value = true;\n      category.title = groupedRow.group.label;\n      category.id = groupedRow.group.value;\n    },\n  },\n  {\n    label: \"Share\",\n    icon: \"link\",\n    onClick: async ({ group }) => {\n      const { label, value } = group;\n      const url = new URL(window.location.href);\n      url.pathname = `/helpdesk/kb-public/${value}`;\n      await copyToClipboard();\n    },\n  },\n  {\n    label: \"Delete\",\n    icon: \"trash-2\",\n    onClick: (groupedRow) => {\n      handleCategoryDelete(groupedRow);\n    },\n  },\n];\n\nconst listSelections = ref(new Set());\nconst selectBannerActions = [\n  {\n    label: \"Move To\",\n    icon: \"corner-up-right\",\n    onClick: (selections: Set<string>) => {\n      listSelections.value = new Set(selections);\n      moveToModal.value = true;\n    },\n  },\n  {\n    label: \"Delete\",\n    icon: \"trash-2\",\n    onClick: (selections: Set<string>) => {\n      listSelections.value = selections;\n      $dialog({\n        title: \"Delete articles?\",\n        message: `Are you sure you want to delete these articles?`,\n        actions: [\n          {\n            label: \"Confirm\",\n            variant: \"solid\",\n            onClick({ close }) {\n              handleDeleteArticles();\n              close();\n            },\n          },\n        ],\n      });\n    },\n  },\n];\n\nfunction handleMoveToCategory(category: string) {\n  moveToCategory.submit(\n    {\n      category,\n      articles: Array.from(listSelections.value),\n    },\n    {\n      onSuccess: () => {\n        moveToModal.value = false;\n        listViewRef.value?.reload();\n        listViewRef.value?.unselectAll();\n        listSelections.value.clear();\n        toast.success(\"Articles moved\");\n      },\n      onError: (error: Error) => {\n        const title = error?.messages?.[0] || error.message;\n        toast.error(title);\n        moveToModal.value = false;\n      },\n    }\n  );\n}\n\nfunction handleCategoryCreate() {\n  newCategory.submit(\n    {\n      title: category.title,\n    },\n    {\n      onSuccess: (data: any) => {\n        listViewRef.value.reload();\n        showCategoryModal.value = false;\n        router.push({\n          name: \"Article\",\n          params: {\n            articleId: data.article,\n          },\n          query: {\n            category: data.category,\n            title: category.title,\n            isEdit: 1,\n          },\n        });\n        toast.success(\"Category created\");\n        capture(\"category_created\", {\n          data: {\n            category: category.title,\n          },\n        });\n        resetState();\n      },\n      onError: (error: string) => {\n        toast.error(error);\n      },\n    }\n  );\n}\n\nfunction handleCategoryUpdate() {\n  // if same title do nothing\n  if (category.title === _title.value) {\n    showCategoryModal.value = false;\n    editTitle.value = false;\n    return;\n  }\n  updateCategoryTitle.submit(\n    {\n      doctype: \"HD Article Category\",\n      name: category.id,\n      fieldname: \"category_name\",\n      value: category.title,\n    },\n    {\n      onSuccess: () => {\n        listViewRef.value.reload();\n        showCategoryModal.value = false;\n        editTitle.value = false;\n\n        toast.success(\"Category updated\");\n        resetState();\n      },\n      onError: (error: string) => {\n        toast.error(error);\n      },\n    }\n  );\n}\n\nfunction handleCategoryDelete(groupedRow) {\n  $dialog({\n    title: \"Delete category?\",\n    message: `All articles from this category will move to General category.`,\n    actions: [\n      {\n        label: \"Confirm\",\n        variant: \"solid\",\n        onClick(close: Function) {\n          deleteCategory.submit(\n            {\n              doctype: \"HD Article Category\",\n              name: groupedRow.group.value,\n            },\n            {\n              onSuccess: () => {\n                toast.success(\"Category deleted\");\n                listViewRef.value.reload();\n              },\n            }\n          );\n          close();\n        },\n      },\n    ],\n  });\n}\n\nfunction handleDeleteArticles() {\n  deleteArticles.submit(\n    {\n      articles: Array.from(listSelections.value),\n    },\n    {\n      onSuccess: () => {\n        listViewRef.value?.reload();\n        listViewRef.value?.unselectAll();\n        listSelections.value?.clear();\n        toast.success(\"Articles deleted\");\n      },\n    }\n  );\n}\n\nfunction handleMergeCategory(source: string, target: string) {\n  mergeCategory.submit(\n    {\n      source,\n      target,\n    },\n    {\n      onSuccess: () => {\n        listViewRef.value.reload();\n        toast.success(\"Category merged\");\n        mergeModal.value = false;\n        resetState();\n      },\n      onError: (error: Error) => {\n        const title = error?.messages?.[0] || error.message;\n        toast.error(title);\n      },\n    }\n  );\n}\n\nfunction resetState() {\n  category.title = \"\";\n  category.id = \"\";\n  _title.value = \"\";\n}\n\nconst options = computed(() => {\n  return {\n    doctype: \"HD Article\",\n    selectable: true,\n    view: {\n      view_type: \"group_by\",\n      group_by_field: \"category\",\n      label_doc: \"HD Article Category\",\n      label_field: \"category_name\",\n    },\n    columnConfig: {\n      title: {\n        prefix: () => {\n          return h(FeatherIcon, {\n            name: \"file-text\",\n            class: \"h-4 w-4 flex-shrink-0 text-ink-gray-6\",\n          });\n        },\n      },\n      status: {\n        custom: ({ item }) => {\n          return h(Badge, {\n            ...statusMap[item],\n          });\n        },\n      },\n    },\n    rowRoute: {\n      name: \"Article\",\n      prop: \"articleId\",\n    },\n    groupByActions,\n    showSelectBanner: true,\n    selectBannerActions,\n    default_page_length: 100,\n  };\n});\n\nconst statusMap = {\n  Published: {\n    label: \"Published\",\n    theme: \"green\",\n  },\n  Draft: {\n    label: \"Draft\",\n    theme: \"orange\",\n  },\n  Archived: {\n    label: \"Archived\",\n    theme: \"gray\",\n  },\n};\n\nonMounted(() => {\n  capture(\"kb_agent_page_viewed\");\n});\n\nusePageMeta(() => {\n  return {\n    title: \"Knowledge Base\",\n  };\n});\n</script>\n"],"names":["props","__props","emit","__emit","showDialog","_useModel","newTitle","dialogTitle","computed","titleRef","ref","watch","newVal","getActionButton","action","_createBlock","_unref","Dialog","$event","_createElementVNode","_hoisted_1","e","target","toCategory","_cache","_hoisted_2","_toDisplayString","categoryTitle","_createVNode","Link","_component_Button","categoryId","router","useRouter","$dialog","globalStore","category","reactive","_title","listViewRef","editTitle","showCategoryModal","moveToModal","mergeModal","generalCategory","createResource","headerOptions","resetState","groupByActions","groupedRow","LucideMerge","group","label","value","url","copyToClipboard","handleCategoryDelete","listSelections","selectBannerActions","selections","close","handleDeleteArticles","handleMoveToCategory","moveToCategory","_a","_b","toast","error","title","handleCategoryCreate","newCategory","data","capture","handleCategoryUpdate","updateCategoryTitle","deleteCategory","deleteArticles","_c","handleMergeCategory","source","mergeCategory","options","h","FeatherIcon","item","Badge","statusMap","onMounted","usePageMeta","_openBlock","_createElementBlock","LayoutHeader","Dropdown","Button","_component_LucidePlus","ListViewBuilder","row","$router","CategoryModal","MoveToCategoryModal","MergeCategoryModal"],"mappings":"i8CA+BA,MAAMA,EAAQC,EAWRC,EAAOC,EAEPC,EAAaC,gBAAqB,EAClCC,EAAWD,EAAoBJ,EAAA,OAAO,EAEtCM,EAAcC,EAAS,IAC3BR,EAAM,KAAO,gBAAkB,iBAAA,EAG3BS,EAAWC,EAAI,IAAI,EACzBC,EACE,IAAMF,EAAS,MACdG,GAAW,CACLA,IACIH,EAAA,MAAM,MAAM,QACnBG,EAAO,aAAeA,EAAO,aACzBA,EAAO,aAAe,MAE9B,CAAA,EAGF,SAASC,GAAkB,CACzB,MAAMC,EAAS,CAAA,EACf,OAAId,EAAM,KACRc,EAAO,KAAK,CACV,MAAO,OACP,QAAS,QACT,QAAS,IAAM,CACbZ,EAAK,QAAQ,CACf,CAAA,CACD,EAEDY,EAAO,KAAK,CACV,MAAO,SACP,QAAS,QACT,QAAS,IAAM,CACbZ,EAAK,QAAQ,CACf,CAAA,CACD,EAEIY,CACT,mBAlFEC,EAqBSC,EAAAC,CAAA,EAAA,YApBEb,EAAU,2CAAVA,EAAU,MAAAc,GAClB,QAAO,CAAA,MAAWX,EAAW,MAAA,QAAWM,GAAe,CAAA,GAE7C,iBACT,IAcM,CAdNM,EAcM,MAdNC,GAcM,GAbJD,EAYE,WAAA,CAXA,MAAM,iWACF,WAAJ,IAAIV,EACJ,YAAY,sDACHH,EAAQ,MAAAY,GAChB,KAAM,EACP,UAAU,KACV,UAAA,GACC,oBAAQG,GAAQ,OAAyBC,EAASD,EAAE,OAA2CC,EAAO,MAAM,OAAY,GAAAA,EAAO,YAAY,IAAA,kBAJnIhB,EAAQ,KAAA,CAAA,4TCkC3B,MAAMJ,EAAOC,EACPC,EAAaC,gBAAqB,EAElCkB,EAAab,EAAI,EAAE,+CA/CvBK,EAkCSC,EAAAC,CAAA,EAAA,CAjCN,QAAS,oCAET,EACA,aAAWO,EAAA,CAAA,IAAAA,EAAA,CAAA,OAAyBD,EAAU,MAAA,IAAA,cAKtCnB,EAAU,2CAAVA,EAAU,MAAAc,EAAA,GAER,iBACT,IAII,CAJJC,EAII,IAJJC,GAII,eAJwC,sCAE1C,GAAAD,EAAwE,OAAxEM,GAAwEC,EAAvBC,EAAa,aAAA,EAAA,CAAA,gBAAU,mEAE1E,EAAA,GACAC,EAOEZ,EAAAa,EAAA,EAAA,CANA,MAAM,eACN,QAAQ,sBACR,YAAY,6BACHN,EAAU,2CAAVA,EAAU,MAAAL,GACnB,MAAM,WACL,cAAa,8BAGP,UACT,IAKE,CALFU,EAKEE,EAAA,CAJA,MAAM,SACN,QAAQ,QACR,MAAM,QACL,QAAON,EAAA,CAAA,IAAAA,EAAA,CAAA,EAAAN,GAAAhB,EAAc6B,QAAAA,EAAAA,WAAYR,EAAU,KAAA,EAAA,sGCqCpD,MAAMS,EAASC,KACT,CAAE,QAAAC,GAAYC,KAEdC,EAAWC,EAAS,CACxB,MAAO,GACP,GAAI,EAAA,CACL,EAEKC,EAAS5B,EAAI,EAAE,EACf6B,EAAc7B,EAAI,IAAI,EACtB8B,EAAY9B,EAAI,EAAK,EAGrB+B,EAAoB/B,EAAI,EAAK,EAC7BgC,EAAchC,EAAI,EAAK,EACvBiC,EAAajC,EAAI,EAAK,EAEtBkC,EAAkBC,EAAe,CACrC,IAAK,mDACL,KAAM,GACN,MAAO,CAAC,iBAAiB,CAAA,CAC1B,EAEKC,EAAgB,CACpB,CACE,MAAO,WACP,KAAM,SACN,QAAS,IAAM,CACFC,IACXP,EAAU,MAAQ,GAClBC,EAAkB,MAAQ,EAC5B,CACF,EACA,CACE,MAAO,UACP,KAAM,YACN,QAAS,IAAM,CACbT,EAAO,KAAK,CACV,KAAM,aACN,OAAQ,CACN,GAAIY,EAAgB,IACtB,EACA,MAAO,CACL,MAAO,SACT,CAAA,CACD,CACH,CACF,CAAA,EAGII,EAAiB,CACrB,CACE,MAAO,kBACP,KAAM,OACN,QAAUC,GAAe,CACvBjB,EAAO,KAAK,CACV,KAAM,aACN,OAAQ,CACN,GAAIiB,EAAW,MAAM,KACvB,EACA,MAAO,CACL,MAAOA,EAAW,MAAM,KAC1B,CAAA,CACD,CACH,CACF,EACA,CACE,MAAO,aACP,KAAM,OACN,QAAUA,GAAe,CACvBT,EAAU,MAAQ,GAClBC,EAAkB,MAAQ,GACjBL,EAAA,MAAQa,EAAW,MAAM,MACzBb,EAAA,GAAKa,EAAW,MAAM,MACxBX,EAAA,MAAQW,EAAW,MAAM,KAClC,CACF,EACA,CACE,MAAO,QACP,KAAMC,GACN,QAAUD,GAAe,CACvBN,EAAW,MAAQ,GACVP,EAAA,MAAQa,EAAW,MAAM,MACzBb,EAAA,GAAKa,EAAW,MAAM,KACjC,CACF,EACA,CACE,MAAO,QACP,KAAM,OACN,QAAS,MAAO,CAAE,MAAAE,KAAY,CACtB,KAAA,CAAE,MAAAC,EAAO,MAAAC,CAAU,EAAAF,EACnBG,EAAM,IAAI,IAAI,OAAO,SAAS,IAAI,EACpCA,EAAA,SAAW,uBAAuBD,CAAK,GAC3C,MAAME,GAAgB,CACxB,CACF,EACA,CACE,MAAO,SACP,KAAM,UACN,QAAUN,GAAe,CACvBO,EAAqBP,CAAU,CACjC,CACF,CAAA,EAGIQ,EAAiB/C,EAAQ,IAAA,GAAK,EAC9BgD,EAAsB,CAC1B,CACE,MAAO,UACP,KAAM,kBACN,QAAUC,GAA4B,CACrBF,EAAA,MAAQ,IAAI,IAAIE,CAAU,EACzCjB,EAAY,MAAQ,EACtB,CACF,EACA,CACE,MAAO,SACP,KAAM,UACN,QAAUiB,GAA4B,CACpCF,EAAe,MAAQE,EACfzB,EAAA,CACN,MAAO,mBACP,QAAS,kDACT,QAAS,CACP,CACE,MAAO,UACP,QAAS,QACT,QAAQ,CAAE,MAAA0B,GAAS,CACIC,IACfD,GACR,CACF,CACF,CAAA,CACD,CACH,CACF,CAAA,EAGF,SAASE,EAAqB1B,EAAkB,CAC/B2B,GAAA,OACb,CACE,SAAA3B,EACA,SAAU,MAAM,KAAKqB,EAAe,KAAK,CAC3C,EACA,CACE,UAAW,IAAM,SACff,EAAY,MAAQ,IACpBsB,EAAAzB,EAAY,QAAZ,MAAAyB,EAAmB,UACnBC,EAAA1B,EAAY,QAAZ,MAAA0B,EAAmB,cACnBR,EAAe,MAAM,QACrBS,EAAM,QAAQ,gBAAgB,CAChC,EACA,QAAUC,GAAiB,OACzB,MAAMC,IAAQJ,EAAAG,GAAA,YAAAA,EAAO,WAAP,YAAAH,EAAkB,KAAMG,EAAM,QAC5CD,EAAM,MAAME,CAAK,EACjB1B,EAAY,MAAQ,EACtB,CACF,CAAA,CAEJ,CAEA,SAAS2B,GAAuB,CAClBC,GAAA,OACV,CACE,MAAOlC,EAAS,KAClB,EACA,CACE,UAAYmC,GAAc,CACxBhC,EAAY,MAAM,SAClBE,EAAkB,MAAQ,GAC1BT,EAAO,KAAK,CACV,KAAM,UACN,OAAQ,CACN,UAAWuC,EAAK,OAClB,EACA,MAAO,CACL,SAAUA,EAAK,SACf,MAAOnC,EAAS,MAChB,OAAQ,CACV,CAAA,CACD,EACD8B,EAAM,QAAQ,kBAAkB,EAChCM,EAAQ,mBAAoB,CAC1B,KAAM,CACJ,SAAUpC,EAAS,KACrB,CAAA,CACD,EACUW,GACb,EACA,QAAUoB,GAAkB,CAC1BD,EAAM,MAAMC,CAAK,CACnB,CACF,CAAA,CAEJ,CAEA,SAASM,GAAuB,CAE1B,GAAArC,EAAS,QAAUE,EAAO,MAAO,CACnCG,EAAkB,MAAQ,GAC1BD,EAAU,MAAQ,GAClB,MACF,CACoBkC,GAAA,OAClB,CACE,QAAS,sBACT,KAAMtC,EAAS,GACf,UAAW,gBACX,MAAOA,EAAS,KAClB,EACA,CACE,UAAW,IAAM,CACfG,EAAY,MAAM,SAClBE,EAAkB,MAAQ,GAC1BD,EAAU,MAAQ,GAElB0B,EAAM,QAAQ,kBAAkB,EACrBnB,GACb,EACA,QAAUoB,GAAkB,CAC1BD,EAAM,MAAMC,CAAK,CACnB,CACF,CAAA,CAEJ,CAEA,SAASX,EAAqBP,EAAY,CAChCf,EAAA,CACN,MAAO,mBACP,QAAS,iEACT,QAAS,CACP,CACE,MAAO,UACP,QAAS,QACT,QAAQ0B,EAAiB,CACRe,GAAA,OACb,CACE,QAAS,sBACT,KAAM1B,EAAW,MAAM,KACzB,EACA,CACE,UAAW,IAAM,CACfiB,EAAM,QAAQ,kBAAkB,EAChC3B,EAAY,MAAM,QACpB,CACF,CAAA,EAEIqB,GACR,CACF,CACF,CAAA,CACD,CACH,CAEA,SAASC,GAAuB,CACfe,GAAA,OACb,CACE,SAAU,MAAM,KAAKnB,EAAe,KAAK,CAC3C,EACA,CACE,UAAW,IAAM,YACfO,EAAAzB,EAAY,QAAZ,MAAAyB,EAAmB,UACnBC,EAAA1B,EAAY,QAAZ,MAAA0B,EAAmB,eACnBY,EAAApB,EAAe,QAAf,MAAAoB,EAAsB,QACtBX,EAAM,QAAQ,kBAAkB,CAClC,CACF,CAAA,CAEJ,CAES,SAAAY,EAAoBC,EAAgBzD,EAAgB,CAC7C0D,GAAA,OACZ,CACE,OAAAD,EACA,OAAAzD,CACF,EACA,CACE,UAAW,IAAM,CACfiB,EAAY,MAAM,SAClB2B,EAAM,QAAQ,iBAAiB,EAC/BvB,EAAW,MAAQ,GACRI,GACb,EACA,QAAUoB,GAAiB,OACzB,MAAMC,IAAQJ,EAAAG,GAAA,YAAAA,EAAO,WAAP,YAAAH,EAAkB,KAAMG,EAAM,QAC5CD,EAAM,MAAME,CAAK,CACnB,CACF,CAAA,CAEJ,CAEA,SAASrB,GAAa,CACpBX,EAAS,MAAQ,GACjBA,EAAS,GAAK,GACdE,EAAO,MAAQ,EACjB,CAEM,MAAA2C,EAAUzE,EAAS,KAChB,CACL,QAAS,aACT,WAAY,GACZ,KAAM,CACJ,UAAW,WACX,eAAgB,WAChB,UAAW,sBACX,YAAa,eACf,EACA,aAAc,CACZ,MAAO,CACL,OAAQ,IACC0E,EAAEC,GAAa,CACpB,KAAM,YACN,MAAO,uCAAA,CACR,CAEL,EACA,OAAQ,CACN,OAAQ,CAAC,CAAE,KAAAC,KACFF,EAAEG,GAAO,CACd,GAAGC,EAAUF,CAAI,CAAA,CAClB,CAEL,CACF,EACA,SAAU,CACR,KAAM,UACN,KAAM,WACR,EACA,eAAApC,EACA,iBAAkB,GAClB,oBAAAU,EACA,oBAAqB,GAAA,EAExB,EAEK4B,EAAY,CAChB,UAAW,CACT,MAAO,YACP,MAAO,OACT,EACA,MAAO,CACL,MAAO,QACP,MAAO,QACT,EACA,SAAU,CACR,MAAO,WACP,MAAO,MACT,CAAA,EAGF,OAAAC,EAAU,IAAM,CACdf,EAAQ,sBAAsB,CAAA,CAC/B,EAEDgB,EAAY,KACH,CACL,MAAO,gBAAA,EAEV,qBA1aC,OAAAC,EAAA,EAAAC,GAkCM,MAlCNtE,GAkCM,CAjCJQ,EAae+D,GAAA,KAAA,CAZF,gBACT,IAAmEnE,EAAA,CAAA,IAAAA,EAAA,CAAA,EAAA,CAAnEL,EAAmE,MAA9D,CAAA,MAAM,qCAAoC,iBAAc,EAAA,CAAA,IAEpD,iBACT,IAMW,CANXS,EAMWZ,EAAA4E,EAAA,EAAA,CANA,QAAS9C,GAAa,WAC/B,IAIS,CAJTlB,EAISZ,EAAA6E,EAAA,EAAA,CAJD,MAAM,UAAU,QAAQ,OAAA,GACnB,SACT,IAA8B,CAA9BjE,EAA8BkE,EAAA,CAAlB,MAAM,UAAS,CAAA,yBAMrClE,EAIEmE,GAAA,SAHI,cAAJ,IAAIxD,EACH,QAAS0C,EAAO,MAChB,uBAAYe,GAAQC,UAAQ,oBAAoBD,CAAG,EAAA,wBAEtDpE,EAMEsE,GAAA,CALC,KAAM1D,EAAS,iBACPC,EAAiB,2CAAjBA,EAAiB,MAAAvB,GAClB,MAAOkB,EAAS,MAAT,iBAAAZ,EAAA,CAAA,IAAAA,EAAA,CAAA,EAAAN,GAAAkB,EAAS,MAAKlB,GAC5B,SAAQuD,EACR,SAAQJ,CAAA,wCAEXzC,EAA0EuE,GAAA,YAA5CzD,EAAW,2CAAXA,EAAW,MAAAxB,GAAG,OAAM4C,0BAClDlC,EAKEwE,GAAA,CAJC,cAAehE,EAAS,MACxB,cAAaA,EAAS,cACdO,EAAU,2CAAVA,EAAU,MAAAzB,GAClB,QAAO4D,CAAA"}