{"version":3,"file":"CannedResponses-71620722.js","sources":["../../../../desk/src/components/canned-response/CannedResponseModal.vue","../../../../desk/src/pages/CannedResponses.vue"],"sourcesContent":["<template>\n  <Dialog\n    v-model=\"show\"\n    :options=\"{\n      size: 'xl',\n      actions: [\n        {\n          label: !isNew ? 'Update' : 'Create',\n          variant: 'solid',\n          onClick: () => updateItem(),\n        },\n      ],\n    }\"\n  >\n    <template #body-title>\n      <div class=\"flex items-center gap-3\">\n        <h3 class=\"text-2xl font-semibold leading-6 text-gray-900\">\n          {{ !isNew ? \"Edit Canned Response\" : \"Create Canned Response\" }}\n        </h3>\n      </div>\n    </template>\n    <template #body-content>\n      <div class=\"flex flex-col gap-4\">\n        <div>\n          <div class=\"mb-1.5 text-sm text-gray-600\">{{ \"Title\" }}</div>\n          <TextInput\n            v-model=\"title\"\n            variant=\"outline\"\n            :placeholder=\"'Customer Query Resolved'\"\n          />\n        </div>\n        <div>\n          <div class=\"mb-1.5 text-sm text-gray-600\">{{ \"Message\" }}</div>\n          <TextEditor\n            ref=\"content\"\n            variant=\"outline\"\n            editor-class=\"!prose-sm overflow-auto min-h-[180px] max-h-80 py-1.5 px-2 rounded border border-gray-300 bg-white hover:border-gray-400 hover:shadow-sm focus:bg-white focus:border-gray-500 focus:shadow-sm focus:ring-0 focus-visible:ring-2 focus-visible:ring-gray-400 text-gray-800 transition-colors\"\n            :bubble-menu=\"true\"\n            :content=\"message\"\n            :placeholder=\"'Your query has been resolved. Thank you for reaching out.'\"\n            @change=\"(val) => (message = val)\"\n          />\n        </div>\n      </div>\n    </template>\n  </Dialog>\n</template>\n\n<script setup>\nimport { TextEditor, call, TextInput } from \"frappe-ui\";\n\nconst props = defineProps({\n  name: {\n    type: String,\n    required: false,\n    default: null,\n  },\n  isNew: {\n    type: Boolean,\n    required: false,\n    default: false,\n  },\n});\n\nconst show = defineModel();\nconst title = defineModel(\"title\");\nconst message = defineModel(\"message\");\nconst emit = defineEmits([\"update\"]);\n\nasync function updateItem() {\n  if (props.name) {\n    await call(\"frappe.client.set_value\", {\n      doctype: \"HD Canned Response\",\n      name: props.name,\n      fieldname: {\n        title: title.value,\n        message: message.value,\n      },\n    });\n  } else {\n    await call(\"frappe.client.insert\", {\n      doc: {\n        doctype: \"HD Canned Response\",\n        title: title.value,\n        message: message.value,\n      },\n    });\n  }\n  emit(\"update\");\n  show.value = false;\n}\n</script>\n","<template>\n  <div class=\"flex flex-col\">\n    <LayoutHeader>\n      <template #left-header>\n        <Breadcrumbs :items=\"breadcrumbs\" />\n      </template>\n      <template #right-header>\n        <Button\n          label=\"Create\"\n          theme=\"gray\"\n          variant=\"solid\"\n          @click=\"\n            () => {\n              title = null;\n              message = null;\n              showNewDialog = true;\n            }\n          \"\n        >\n          <template #prefix>\n            <LucidePlus class=\"h-4 w-4\" />\n          </template>\n        </Button>\n      </template>\n    </LayoutHeader>\n    <div class=\"flex-1 overflow-y-auto\">\n      <div\n        v-if=\"cannedResponses.data?.length > 0\"\n        class=\"grid grid-cols-1 md:grid-cols-3 lg:grid-cols-4 gap-4 p-4\"\n      >\n        <div\n          v-for=\"cannedResponse in cannedResponses.data\"\n          :key=\"cannedResponse.name\"\n          class=\"group flex h-60 cursor-pointer flex-col justify-between gap-2 rounded-lg border px-4 py-3 pt-2 shadow-sm hover:bg-gray-50\"\n          @click=\"editItem(cannedResponse)\"\n        >\n          <div class=\"flex items-center justify-between\">\n            <div class=\"truncate text-lg font-medium\">\n              {{ cannedResponse.title }}\n            </div>\n            <Dropdown\n              :options=\"[\n                {\n                  label: 'Delete',\n                  icon: 'trash-2',\n                  onClick: () => deleteItem(cannedResponse.name),\n                },\n              ]\"\n              @click.stop\n            >\n              <Button\n                icon=\"more-horizontal\"\n                variant=\"ghosted\"\n                class=\"hover:bg-white\"\n              />\n            </Dropdown>\n          </div>\n          <TextEditor\n            v-if=\"cannedResponse.message\"\n            :content=\"cannedResponse.message\"\n            :editable=\"false\"\n            editor-class=\"prose-sm\"\n            class=\"flex-1 overflow-hidden response-preview\"\n          />\n          <div class=\"mt-2 flex items-center justify-between gap-2\">\n            <div class=\"flex items-center gap-2\">\n              <UserAvatar :name=\"cannedResponse.owner\" size=\"xs\" />\n              <div class=\"text-sm text-gray-800\">\n                {{ getUser(cannedResponse.owner).full_name }}\n              </div>\n            </div>\n            <Tooltip\n              :text=\"dateFormat(cannedResponse.modified, dateTooltipFormat)\"\n            >\n              <div class=\"text-sm text-gray-700\">\n                {{ dayjs.tz(cannedResponse.modified).fromNow() }}\n              </div>\n            </Tooltip>\n          </div>\n        </div>\n      </div>\n      <EmptyState\n        v-else\n        title=\"No Canned Responses Found\"\n        @emptyStateAction=\"showNewDialog = true\"\n      />\n    </div>\n    <CannedResponseModal\n      v-model=\"showNewDialog\"\n      v-model:title=\"title\"\n      v-model:message=\"message\"\n      :name=\"name\"\n      :is-new=\"name ? false : true\"\n      @close=\"\n        () => {\n          showNewDialog = false;\n          title = null;\n          message = null;\n          name = null;\n        }\n      \"\n      @update=\"\n        () => {\n          cannedResponses.reload();\n          showNewDialog = false;\n          title = null;\n          message = null;\n          name = null;\n        }\n      \"\n    />\n  </div>\n</template>\n<script setup lang=\"ts\">\nimport { LayoutHeader } from \"@/components\";\nimport { CannedResponseModal } from \"@/components/canned-response/\";\nimport { dayjs } from \"@/dayjs\";\nimport { useUserStore } from \"@/stores/user\";\nimport { dateFormat, dateTooltipFormat } from \"@/utils\";\nimport {\n  Breadcrumbs,\n  Dropdown,\n  TextEditor,\n  Tooltip,\n  call,\n  createListResource,\n  usePageMeta,\n} from \"frappe-ui\";\nimport { ref } from \"vue\";\nimport { useRoute } from \"vue-router\";\nimport EmptyState from \"../components/EmptyState.vue\";\n\nconst { getUser } = useUserStore();\n\nconst breadcrumbs = [\n  { label: \"Canned Responses\", route: { name: \"CannedResponses\" } },\n];\nconst route = useRoute();\n\nconst title = ref(null);\nconst message = ref(null);\nconst name = ref(null);\nconst isNew = route.hash.split(\"#\")[1] === \"new\";\nconst showNewDialog = ref(isNew || false);\n\nconst cannedResponses = createListResource({\n  doctype: \"HD Canned Response\",\n  fields: [\"name\", \"title\", \"message\", \"owner\", \"modified\"],\n  auto: true,\n  orderBy: \"modified desc\",\n});\n\nfunction editItem(cannedResponse) {\n  title.value = cannedResponse.title;\n  message.value = cannedResponse.message;\n  name.value = cannedResponse.name;\n  showNewDialog.value = true;\n}\n\nasync function deleteItem(name) {\n  await call(\"frappe.client.delete\", {\n    doctype: \"HD Canned Response\",\n    name,\n  });\n  cannedResponses.reload();\n}\n\nusePageMeta(() => {\n  return {\n    title: \"Canned Responses\",\n  };\n});\n</script>\n\n<style>\n.response-preview :where(p, span, a) {\n  @apply !text-gray-600;\n}\n</style>\n"],"names":["props","__props","show","_useModel","title","message","emit","__emit","updateItem","call","_createBlock","_component_Dialog","$event","_createElementVNode","_hoisted_1","_hoisted_2","_toDisplayString","_hoisted_3","_cache","_createVNode","_unref","TextInput","TextEditor","val","getUser","useUserStore","breadcrumbs","route","useRoute","ref","name","isNew","showNewDialog","cannedResponses","createListResource","editItem","cannedResponse","deleteItem","usePageMeta","_openBlock","_createElementBlock","LayoutHeader","Breadcrumbs","_component_Button","_component_LucidePlus","_Fragment","_renderList","_hoisted_5","_hoisted_6","Dropdown","_hoisted_7","_hoisted_8","_component_UserAvatar","_hoisted_9","Tooltip","dateFormat","dateTooltipFormat","_hoisted_10","dayjs","EmptyState","CannedResponseModal"],"mappings":"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"}