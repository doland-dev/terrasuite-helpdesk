import{d as $e,A as B,c as D,al as Ne,ab as O,b4 as it,ah as qe,$ as Ee,b5 as fl,b6 as Je,b7 as vl,b8 as ml,aa as ut,b9 as hl,ba as gl,bb as yl,bc as bl,I as J,ac as Te,F as ee,ae as Ae,M as Se,Y as tt,bd as Ft,a8 as Qe,a7 as Xe,am as ke,an as fe,be as wl,ag as xt,af as le,ai as ue,bf as Fe,aj as He,h as t,bg as At,bh as _l,bi as Re,a9 as kl,bj as xl,a4 as Ge,bk as Cl,bl as $l,ad as Sl,bm as Vl,e as r,f as j,w as R,g as y,bn as Le,a2 as ye,aI as je,C as G,l as h,x as oe,aN as ve,S as Be,t as W,k as L,G as ae,P as jt,bo as st,bp as Rl,bq as Ll,j as me,r as re,y as z,az as ct,s as dt,aD as pt,br as Dt,D as be,E as Ce,z as xe,bs as ft,bt as vt,v as _e,L as Et,bu as Fl,aR as Al,p as Ze,bv as It,ao as lt,bw as Pt,V as mt,b as Ot,a0 as ge,bx as jl,by as Dl,bz as El,O as Il,bA as Pl,bB as Ol,a as Ml,aP as Nl,Z as ql,R as Bl,X as Ke,ap as Tl,q as zl,Q as Hl,u as Gl,bC as Ul}from"./index-54e545bb.js";import{s as Wl,_ as Mt}from"./Dropdown.vue_vue_type_script_setup_true_lang-20398480.js";import{S as Kl,D as Yl,i as Zl,u as Jl,v as ot,c as Ye}from"./more-horizontal-b561c647.js";import"./dayjs-8f71cd34.js";import{_ as Nt}from"./StarRating.vue_vue_type_script_setup_true_lang-87d7ba3b.js";import"./knowledgeBase-de4d1c97.js";import{a as Ql,_ as Xl}from"./FadedScrollableDiv.vue_vue_type_script_setup_true_lang-897d9728.js";import{u as qt,g as pe,a as Me,_ as en}from"./DateRangePicker.vue_vue_type_script_setup_true_lang-fc0fa242.js";import{a as De,_ as Bt}from"./Link-5130f40e.js";import{g as tn}from"./globalStore-842ad0ec.js";import{_ as ln}from"./EmptyState.vue_vue_type_script_setup_true_lang-93f57bdf.js";var nn=(e=>(e[e.Open=0]="Open",e[e.Closed=1]="Closed",e))(nn||{});let Tt=Symbol("PopoverContext");function ht(e){let o=le(Tt,null);if(o===null){let a=new Error(`<${e} /> is missing a parent <${gt.name} /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(a,ht),a}return o}let an=Symbol("PopoverGroupContext");function zt(){return le(an,null)}let Ht=Symbol("PopoverPanelContext");function on(){return le(Ht,null)}let gt=$e({name:"Popover",inheritAttrs:!1,props:{as:{type:[Object,String],default:"div"}},setup(e,{slots:o,attrs:a,expose:u}){var v;let i=B(null);u({el:i,$el:i});let l=B(1),n=B(null),_=B(null),A=B(null),d=B(null),V=D(()=>Ne(i)),b=D(()=>{var m,c;if(!O(n)||!O(d))return!1;for(let we of document.querySelectorAll("body > *"))if(Number(we==null?void 0:we.contains(O(n)))^Number(we==null?void 0:we.contains(O(d))))return!0;let F=it(),I=F.indexOf(O(n)),P=(I+F.length-1)%F.length,N=(I+1)%F.length,H=F[P],Ve=F[N];return!((m=O(d))!=null&&m.contains(H))&&!((c=O(d))!=null&&c.contains(Ve))}),$={popoverState:l,buttonId:B(null),panelId:B(null),panel:d,button:n,isPortalled:b,beforePanelSentinel:_,afterPanelSentinel:A,togglePopover(){l.value=qe(l.value,{0:1,1:0})},closePopover(){l.value!==1&&(l.value=1)},close(m){$.closePopover();let c=(()=>m?m instanceof HTMLElement?m:m.value instanceof HTMLElement?O(m):O($.button):O($.button))();c==null||c.focus()}};Ee(Tt,$),fl(D(()=>qe(l.value,{0:Je.Open,1:Je.Closed})));let x={buttonId:$.buttonId,panelId:$.panelId,close(){$.closePopover()}},s=zt(),w=s==null?void 0:s.registerPopover,[C,p]=vl(),S=ml({mainTreeNodeRef:s==null?void 0:s.mainTreeNodeRef,portals:C,defaultContainers:[n,d]});function f(){var m,c,F,I;return(I=s==null?void 0:s.isFocusWithinPopoverGroup())!=null?I:((m=V.value)==null?void 0:m.activeElement)&&(((c=O(n))==null?void 0:c.contains(V.value.activeElement))||((F=O(d))==null?void 0:F.contains(V.value.activeElement)))}return ut(()=>w==null?void 0:w(x)),hl((v=V.value)==null?void 0:v.defaultView,"focus",m=>{var c,F;m.target!==window&&m.target instanceof HTMLElement&&l.value===0&&(f()||n&&d&&(S.contains(m.target)||(c=O($.beforePanelSentinel))!=null&&c.contains(m.target)||(F=O($.afterPanelSentinel))!=null&&F.contains(m.target)||$.closePopover()))},!0),gl(S.resolveContainers,(m,c)=>{var F;$.closePopover(),yl(c,bl.Loose)||(m.preventDefault(),(F=O(n))==null||F.focus())},D(()=>l.value===0)),()=>{let m={open:l.value===0,close:$.close};return J(ee,[J(p,{},()=>Te({theirProps:{...e,...a},ourProps:{ref:i},slot:m,slots:o,attrs:a,name:"Popover"})),J(S.MainTreeNode)])}}}),Gt=$e({name:"PopoverButton",props:{as:{type:[Object,String],default:"button"},disabled:{type:[Boolean],default:!1},id:{type:String,default:null}},inheritAttrs:!1,setup(e,{attrs:o,slots:a,expose:u}){var v;let i=(v=e.id)!=null?v:`headlessui-popover-button-${Ae()}`,l=ht("PopoverButton"),n=D(()=>Ne(l.button));u({el:l.button,$el:l.button}),Se(()=>{l.buttonId.value=i}),tt(()=>{l.buttonId.value=null});let _=zt(),A=_==null?void 0:_.closeOthers,d=on(),V=D(()=>d===null?!1:d.value===l.panelId.value),b=B(null),$=`headlessui-focus-sentinel-${Ae()}`;V.value||ut(()=>{l.button.value=O(b)});let x=Wl(D(()=>({as:e.as,type:o.type})),b);function s(m){var c,F,I,P,N;if(V.value){if(l.popoverState.value===1)return;switch(m.key){case ue.Space:case ue.Enter:m.preventDefault(),(F=(c=m.target).click)==null||F.call(c),l.closePopover(),(I=O(l.button))==null||I.focus();break}}else switch(m.key){case ue.Space:case ue.Enter:m.preventDefault(),m.stopPropagation(),l.popoverState.value===1&&(A==null||A(l.buttonId.value)),l.togglePopover();break;case ue.Escape:if(l.popoverState.value!==0)return A==null?void 0:A(l.buttonId.value);if(!O(l.button)||(P=n.value)!=null&&P.activeElement&&!((N=O(l.button))!=null&&N.contains(n.value.activeElement)))return;m.preventDefault(),m.stopPropagation(),l.closePopover();break}}function w(m){V.value||m.key===ue.Space&&m.preventDefault()}function C(m){var c,F;e.disabled||(V.value?(l.closePopover(),(c=O(l.button))==null||c.focus()):(m.preventDefault(),m.stopPropagation(),l.popoverState.value===1&&(A==null||A(l.buttonId.value)),l.togglePopover(),(F=O(l.button))==null||F.focus()))}function p(m){m.preventDefault(),m.stopPropagation()}let S=Ft();function f(){let m=O(l.panel);if(!m)return;function c(){qe(S.value,{[Fe.Forwards]:()=>ke(m,fe.First),[Fe.Backwards]:()=>ke(m,fe.Last)})===He.Error&&ke(it().filter(F=>F.dataset.headlessuiFocusGuard!=="true"),qe(S.value,{[Fe.Forwards]:fe.Next,[Fe.Backwards]:fe.Previous}),{relativeTo:O(l.button)})}c()}return()=>{let m=l.popoverState.value===0,c={open:m},{...F}=e,I=V.value?{ref:b,type:x.value,onKeydown:s,onClick:C}:{ref:b,id:i,type:x.value,"aria-expanded":l.popoverState.value===0,"aria-controls":O(l.panel)?l.panelId.value:void 0,disabled:e.disabled?!0:void 0,onKeydown:s,onKeyup:w,onClick:C,onMousedown:p};return J(ee,[Te({ourProps:I,theirProps:{...o,...F},slot:c,attrs:o,slots:a,name:"PopoverButton"}),m&&!V.value&&l.isPortalled.value&&J(Qe,{id:$,features:Xe.Focusable,"data-headlessui-focus-guard":!0,as:"button",type:"button",onFocus:f})])}}}),Ut=$e({name:"PopoverPanel",props:{as:{type:[Object,String],default:"div"},static:{type:Boolean,default:!1},unmount:{type:Boolean,default:!0},focus:{type:Boolean,default:!1},id:{type:String,default:null}},inheritAttrs:!1,setup(e,{attrs:o,slots:a,expose:u}){var v;let i=(v=e.id)!=null?v:`headlessui-popover-panel-${Ae()}`,{focus:l}=e,n=ht("PopoverPanel"),_=D(()=>Ne(n.panel)),A=`headlessui-focus-sentinel-before-${Ae()}`,d=`headlessui-focus-sentinel-after-${Ae()}`;u({el:n.panel,$el:n.panel}),Se(()=>{n.panelId.value=i}),tt(()=>{n.panelId.value=null}),Ee(Ht,n.panelId),ut(()=>{var p,S;if(!l||n.popoverState.value!==0||!n.panel)return;let f=(p=_.value)==null?void 0:p.activeElement;(S=O(n.panel))!=null&&S.contains(f)||ke(O(n.panel),fe.First)});let V=wl(),b=D(()=>V!==null?(V.value&Je.Open)===Je.Open:n.popoverState.value===0);function $(p){var S,f;switch(p.key){case ue.Escape:if(n.popoverState.value!==0||!O(n.panel)||_.value&&!((S=O(n.panel))!=null&&S.contains(_.value.activeElement)))return;p.preventDefault(),p.stopPropagation(),n.closePopover(),(f=O(n.button))==null||f.focus();break}}function x(p){var S,f,m,c,F;let I=p.relatedTarget;I&&O(n.panel)&&((S=O(n.panel))!=null&&S.contains(I)||(n.closePopover(),((m=(f=O(n.beforePanelSentinel))==null?void 0:f.contains)!=null&&m.call(f,I)||(F=(c=O(n.afterPanelSentinel))==null?void 0:c.contains)!=null&&F.call(c,I))&&I.focus({preventScroll:!0})))}let s=Ft();function w(){let p=O(n.panel);if(!p)return;function S(){qe(s.value,{[Fe.Forwards]:()=>{var f;ke(p,fe.First)===He.Error&&((f=O(n.afterPanelSentinel))==null||f.focus())},[Fe.Backwards]:()=>{var f;(f=O(n.button))==null||f.focus({preventScroll:!0})}})}S()}function C(){let p=O(n.panel);if(!p)return;function S(){qe(s.value,{[Fe.Forwards]:()=>{let f=O(n.button),m=O(n.panel);if(!f)return;let c=it(),F=c.indexOf(f),I=c.slice(0,F+1),P=[...c.slice(F+1),...I];for(let N of P.slice())if(N.dataset.headlessuiFocusGuard==="true"||m!=null&&m.contains(N)){let H=P.indexOf(N);H!==-1&&P.splice(H,1)}ke(P,fe.First,{sorted:!1})},[Fe.Backwards]:()=>{var f;ke(p,fe.Previous)===He.Error&&((f=O(n.button))==null||f.focus())}})}S()}return()=>{let p={open:n.popoverState.value===0,close:n.close},{focus:S,...f}=e,m={ref:n.panel,id:i,onKeydown:$,onFocusout:l&&n.popoverState.value===0?x:void 0,tabIndex:-1};return Te({ourProps:m,theirProps:{...o,...f},attrs:o,slot:p,slots:{...a,default:(...c)=>{var F;return[J(ee,[b.value&&n.isPortalled.value&&J(Qe,{id:A,ref:n.beforePanelSentinel,features:Xe.Focusable,"data-headlessui-focus-guard":!0,as:"button",type:"button",onFocus:w}),(F=a.default)==null?void 0:F.call(a,...c),b.value&&n.isPortalled.value&&J(Qe,{id:d,ref:n.afterPanelSentinel,features:Xe.Focusable,"data-headlessui-focus-guard":!0,as:"button",type:"button",onFocus:C})])]}},features:xt.RenderStrategy|xt.Static,visible:b.value,name:"PopoverPanel"})}}}),Wt=Symbol("LabelContext");function Kt(){let e=le(Wt,null);if(e===null){let o=new Error("You used a <Label /> component, but it is not inside a parent.");throw Error.captureStackTrace&&Error.captureStackTrace(o,Kt),o}return e}function Yt({slot:e={},name:o="Label",props:a={}}={}){let u=B([]);function v(i){return u.value.push(i),()=>{let l=u.value.indexOf(i);l!==-1&&u.value.splice(l,1)}}return Ee(Wt,{register:v,slot:e,name:o,props:a}),D(()=>u.value.length>0?u.value.join(" "):void 0)}let sn=$e({name:"Label",props:{as:{type:[Object,String],default:"label"},passive:{type:[Boolean],default:!1},id:{type:String,default:null}},setup(e,{slots:o,attrs:a}){var u;let v=(u=e.id)!=null?u:`headlessui-label-${Ae()}`,i=Kt();return Se(()=>tt(i.register(v))),()=>{let{name:l="Label",slot:n={},props:_={}}=i,{passive:A,...d}=e,V={...Object.entries(_).reduce((b,[$,x])=>Object.assign(b,{[$]:t(x)}),{}),id:v};return A&&(delete V.onClick,delete V.htmlFor,delete d.onClick),Te({ourProps:V,theirProps:d,slot:n,attrs:a,slots:o,name:l})}}});function rn(e,o){return e===o}let Zt=Symbol("RadioGroupContext");function Jt(e){let o=le(Zt,null);if(o===null){let a=new Error(`<${e} /> is missing a parent <RadioGroup /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(a,Jt),a}return o}let un=$e({name:"RadioGroup",emits:{"update:modelValue":e=>!0},props:{as:{type:[Object,String],default:"div"},disabled:{type:[Boolean],default:!1},by:{type:[String,Function],default:()=>rn},modelValue:{type:[Object,String,Number,Boolean],default:void 0},defaultValue:{type:[Object,String,Number,Boolean],default:void 0},form:{type:String,optional:!0},name:{type:String,optional:!0},id:{type:String,default:null}},inheritAttrs:!1,setup(e,{emit:o,attrs:a,slots:u,expose:v}){var i;let l=(i=e.id)!=null?i:`headlessui-radiogroup-${Ae()}`,n=B(null),_=B([]),A=Yt({name:"RadioGroupLabel"}),d=At({name:"RadioGroupDescription"});v({el:n,$el:n});let[V,b]=_l(D(()=>e.modelValue),w=>o("update:modelValue",w),D(()=>e.defaultValue)),$={options:_,value:V,disabled:D(()=>e.disabled),firstOption:D(()=>_.value.find(w=>!w.propsRef.disabled)),containsCheckedOption:D(()=>_.value.some(w=>$.compare(Re(w.propsRef.value),Re(e.modelValue)))),compare(w,C){if(typeof e.by=="string"){let p=e.by;return(w==null?void 0:w[p])===(C==null?void 0:C[p])}return e.by(w,C)},change(w){var C;if(e.disabled||$.compare(Re(V.value),Re(w)))return!1;let p=(C=_.value.find(S=>$.compare(Re(S.propsRef.value),Re(w))))==null?void 0:C.propsRef;return p!=null&&p.disabled?!1:(b(w),!0)},registerOption(w){_.value.push(w),_.value=kl(_.value,C=>C.element)},unregisterOption(w){let C=_.value.findIndex(p=>p.id===w);C!==-1&&_.value.splice(C,1)}};Ee(Zt,$),xl({container:D(()=>O(n)),accept(w){return w.getAttribute("role")==="radio"?NodeFilter.FILTER_REJECT:w.hasAttribute("role")?NodeFilter.FILTER_SKIP:NodeFilter.FILTER_ACCEPT},walk(w){w.setAttribute("role","none")}});function x(w){if(!n.value||!n.value.contains(w.target))return;let C=_.value.filter(p=>p.propsRef.disabled===!1).map(p=>p.element);switch(w.key){case ue.Enter:Vl(w.currentTarget);break;case ue.ArrowLeft:case ue.ArrowUp:if(w.preventDefault(),w.stopPropagation(),ke(C,fe.Previous|fe.WrapAround)===He.Success){let p=_.value.find(S=>{var f;return S.element===((f=Ne(n))==null?void 0:f.activeElement)});p&&$.change(p.propsRef.value)}break;case ue.ArrowRight:case ue.ArrowDown:if(w.preventDefault(),w.stopPropagation(),ke(C,fe.Next|fe.WrapAround)===He.Success){let p=_.value.find(S=>{var f;return S.element===((f=Ne(S.element))==null?void 0:f.activeElement)});p&&$.change(p.propsRef.value)}break;case ue.Space:{w.preventDefault(),w.stopPropagation();let p=_.value.find(S=>{var f;return S.element===((f=Ne(S.element))==null?void 0:f.activeElement)});p&&$.change(p.propsRef.value)}break}}let s=D(()=>{var w;return(w=O(n))==null?void 0:w.closest("form")});return Se(()=>{Ge([s],()=>{if(!s.value||e.defaultValue===void 0)return;function w(){$.change(e.defaultValue)}return s.value.addEventListener("reset",w),()=>{var C;(C=s.value)==null||C.removeEventListener("reset",w)}},{immediate:!0})}),()=>{let{disabled:w,name:C,form:p,...S}=e,f={ref:n,id:l,role:"radiogroup","aria-labelledby":A.value,"aria-describedby":d.value,onKeydown:x};return J(ee,[...C!=null&&V.value!=null?Cl({[C]:V.value}).map(([m,c])=>J(Qe,$l({features:Xe.Hidden,key:m,as:"input",type:"hidden",hidden:!0,readOnly:!0,form:p,disabled:w,name:m,value:c}))):[],Te({ourProps:f,theirProps:{...a,...Sl(S,["modelValue","defaultValue","by"])},slot:{},attrs:a,slots:u,name:"RadioGroup"})])}}});var cn=(e=>(e[e.Empty=1]="Empty",e[e.Active=2]="Active",e))(cn||{});let dn=$e({name:"RadioGroupOption",props:{as:{type:[Object,String],default:"div"},value:{type:[Object,String,Number,Boolean]},disabled:{type:Boolean,default:!1},id:{type:String,default:null}},setup(e,{attrs:o,slots:a,expose:u}){var v;let i=(v=e.id)!=null?v:`headlessui-radiogroup-option-${Ae()}`,l=Jt("RadioGroupOption"),n=Yt({name:"RadioGroupLabel"}),_=At({name:"RadioGroupDescription"}),A=B(null),d=D(()=>({value:e.value,disabled:e.disabled})),V=B(1);u({el:A,$el:A});let b=D(()=>O(A));Se(()=>l.registerOption({id:i,element:b,propsRef:d})),tt(()=>l.unregisterOption(i));let $=D(()=>{var f;return((f=l.firstOption.value)==null?void 0:f.id)===i}),x=D(()=>l.disabled.value||e.disabled),s=D(()=>l.compare(Re(l.value.value),Re(e.value))),w=D(()=>x.value?-1:s.value||!l.containsCheckedOption.value&&$.value?0:-1);function C(){var f;l.change(e.value)&&(V.value|=2,(f=O(A))==null||f.focus())}function p(){V.value|=2}function S(){V.value&=-3}return()=>{let{value:f,disabled:m,...c}=e,F={checked:s.value,disabled:x.value,active:!!(V.value&2)},I={id:i,ref:A,role:"radio","aria-checked":s.value?"true":"false","aria-labelledby":n.value,"aria-describedby":_.value,"aria-disabled":x.value?!0:void 0,tabIndex:w.value,onClick:x.value?void 0:C,onFocus:x.value?void 0:p,onBlur:x.value?void 0:S};return Te({ourProps:I,theirProps:c,slot:F,attrs:o,slots:a,name:"RadioGroupOption"})}}}),pn=sn;const fn={class:"flex items-center p-1 text-ink-gray-4"},vn={class:"flex-1 text-center text-base font-medium text-ink-gray-6"},mn={class:"flex items-center justify-center gap-1 p-1"},hn={class:"flex flex-col items-center justify-center p-1 text-ink-gray-8"},gn={class:"flex items-center text-xs uppercase"},yn=["onClick"],bn={class:"flex justify-end p-1"},Qt=$e({__name:"DatePicker",props:{value:{},modelValue:{},placeholder:{},formatter:{type:Function},readonly:{type:Boolean},inputClass:{},placement:{}},emits:["update:modelValue","change"],setup(e,{emit:o}){const a=e,u=o,{currentYear:v,currentMonth:i,today:l,datesAsWeeks:n,formattedMonth:_,prevMonth:A,nextMonth:d}=qt(),V=D(()=>{var w,C,p;let s="mt-2";return(w=a.placement)!=null&&w.startsWith("top")?s="mb-2":(C=a.placement)!=null&&C.startsWith("left")?s="mr-2":(p=a.placement)!=null&&p.startsWith("right")&&(s="ml-2"),s}),b=D(()=>a.value?a.value:a.modelValue);function $(s,w=!1){s=w?st(s):s,u("change",Me(s)),u("update:modelValue",Me(s))}function x(){let s=b.value?pe(b.value):pe();s.toString()==="Invalid Date"&&(s=pe()),v.value=s.getFullYear(),i.value=s.getMonth()+1}return Se(()=>x()),(s,w)=>(r(),j(t(jt),{onOpen:x,class:"flex w-full [&>div:first-child]:w-full",placement:s.placement},{target:R(({togglePopover:C})=>[y(t(Le),ye({readonly:"",type:"text",placeholder:s.placeholder,value:b.value&&s.formatter?s.formatter(b.value):b.value,onFocus:p=>s.readonly?null:C(),class:["w-full",s.inputClass]},s.$attrs),je({_:2},[s.$slots.prefix?{name:"prefix",fn:R(()=>[G(s.$slots,"prefix")]),key:"0"}:void 0]),1040,["placeholder","value","onFocus","class"])]),body:R(({togglePopover:C})=>[h("div",{class:oe(["w-fit select-none text-base text-ink-gray-9 divide-y divide-outline-gray-modals rounded-lg bg-surface-modal shadow-2xl ring-1 ring-black ring-opacity-5 focus:outline-none",V.value])},[h("div",fn,[y(t(ve),{variant:"ghost",class:"h-7 w-7",onClick:t(A)},{default:R(()=>[y(Be,{"stroke-width":2,name:"chevron-left",class:"h-4 w-4"})]),_:1},8,["onClick"]),h("div",vn,W(t(_)),1),y(t(ve),{variant:"ghost",class:"h-7 w-7",onClick:t(d)},{default:R(()=>[y(Be,{"stroke-width":2,name:"chevron-right",class:"h-4 w-4"})]),_:1},8,["onClick"])]),h("div",mn,[y(t(Le),{class:"text-sm",type:"text",value:b.value,onChange:w[0]||(w[0]=p=>$(t(pe)(p.target.value)))},null,8,["value"]),y(t(ve),{label:"Today",class:"text-sm",onClick:()=>{$(t(pe)(),!0),C()}},null,8,["onClick"])]),h("div",hn,[h("div",gn,[(r(),L(ee,null,ae(["s","m","t","w","t","f","s"],(p,S)=>h("div",{class:"flex h-6 w-8 items-center justify-center text-center",key:S},W(p),1)),64))]),(r(!0),L(ee,null,ae(t(n),(p,S)=>(r(),L("div",{class:"flex items-center",key:S},[(r(!0),L(ee,null,ae(p,f=>(r(),L("div",{key:t(Me)(f),class:oe(["flex h-8 w-8 cursor-pointer items-center justify-center rounded hover:bg-surface-gray-2",{"text-ink-gray-3":f.getMonth()!==t(i)-1,"font-extrabold text-ink-gray-9":t(Me)(f)===t(Me)(t(l)),"bg-surface-gray-6 text-ink-white hover:bg-surface-gray-6":t(Me)(f)===b.value}]),onClick:()=>{$(f),C()}},W(f.getDate()),11,yn))),128))]))),128))]),h("div",bn,[y(t(ve),{label:"Clear",class:"text-sm",onClick:()=>{$(""),C()}},null,8,["onClick"])])],2)]),_:3},8,["placement"]))}}),wn={class:"flex items-center p-1 text-ink-gray-4"},_n={class:"flex-1 text-center text-base font-medium text-ink-gray-6"},kn={class:"flex items-center justify-center gap-1 p-1"},xn={class:"flex flex-col items-center justify-center p-1 text-ink-gray-8"},Cn={class:"flex items-center text-xs uppercase"},$n=["onClick"],Sn={class:"flex items-center justify-around gap-2 p-1"},Vn={class:"flex flex-col items-center justify-center"},Rn={class:"slider flex min-h-4 items-center justify-center"},Ln={class:"slider flex min-h-4 items-center justify-center"},Fn={class:"slider flex min-h-4 items-center justify-center"},An={class:"flex justify-end p-1"},jn=$e({__name:"DateTimePicker",props:{value:{},modelValue:{},placeholder:{},formatter:{type:Function},readonly:{type:Boolean},inputClass:{},placement:{}},emits:["update:modelValue","change"],setup(e,{emit:o}){const a=e,u=o,{currentYear:v,currentMonth:i,today:l,datesAsWeeks:n,formattedMonth:_,prevMonth:A,nextMonth:d}=qt(),V=D(()=>{var F,I,P;let c="mt-2";return(F=a.placement)!=null&&F.startsWith("top")?c="mb-2":(I=a.placement)!=null&&I.startsWith("left")?c="mr-2":(P=a.placement)!=null&&P.startsWith("right")&&(c="ml-2"),c}),b=B(0),$=B(0),x=B(0),s=D(()=>{let c=a.value?a.value:a.modelValue;return c?st(c).format("YYYY-MM-DD HH:mm:ss"):""});function w(){let c=s.value?pe(s.value):pe();C(c)}function C(c,F=!1){F&&(c=st(c),b.value=c.hour(),$.value=c.minute(),x.value=c.second());let I=c?Rl(p(c)).format("YYYY-MM-DD HH:mm:ss"):"";u("change",I),u("update:modelValue",I)}function p(c){return!c||c.toString()==="Invalid Date"?"":Ll(c).set("hour",b.value).set("minute",$.value).set("second",x.value).format("YYYY-MM-DD HH:mm:ss")}function S(c){return c.toString().padStart(2,"0")}function f(c){c=pe(c),b.value=c.getHours(),$.value=c.getMinutes(),x.value=c.getSeconds(),C(c)}function m(){let c=s.value?pe(s.value):pe();c.toString()==="Invalid Date"&&(c=pe()),v.value=c.getFullYear(),i.value=c.getMonth()+1,b.value=c.getHours(),$.value=c.getMinutes(),x.value=c.getSeconds()}return Se(()=>m()),(c,F)=>(r(),j(t(jt),{onOpen:m,class:"flex w-full [&>div:first-child]:w-full",placement:c.placement},{target:R(({togglePopover:I})=>[y(t(Le),ye({readonly:"",type:"text",placeholder:c.placeholder,value:s.value&&c.formatter?c.formatter(s.value):s.value,onFocus:P=>c.readonly?null:I(),class:["w-full",c.inputClass]},c.$attrs),je({_:2},[c.$slots.prefix?{name:"prefix",fn:R(()=>[G(c.$slots,"prefix",{},void 0,!0)]),key:"0"}:void 0]),1040,["placeholder","value","onFocus","class"])]),body:R(({togglePopover:I})=>[h("div",{class:oe(["w-fit select-none text-base text-ink-gray-9 divide-y divide-outline-gray-modals rounded-lg bg-surface-modal shadow-2xl ring-1 ring-black ring-opacity-5 focus:outline-none",V.value])},[h("div",wn,[y(t(ve),{variant:"ghost",class:"h-7 w-7",onClick:t(A)},{default:R(()=>[y(Be,{"stroke-width":2,name:"chevron-left",class:"h-4 w-4"})]),_:1},8,["onClick"]),h("div",_n,W(t(_)),1),y(t(ve),{variant:"ghost",class:"h-7 w-7",onClick:t(d)},{default:R(()=>[y(Be,{"stroke-width":2,name:"chevron-right",class:"h-4 w-4"})]),_:1},8,["onClick"])]),h("div",kn,[y(t(Le),{class:"text-sm",type:"text",value:s.value,onChange:P=>{f(P.target.value),I()}},null,8,["value","onChange"]),y(t(ve),{label:"Now",class:"text-sm",onClick:()=>{C(t(pe)(),!0),I()}},null,8,["onClick"])]),h("div",xn,[h("div",Cn,[(r(),L(ee,null,ae(["s","m","t","w","t","f","s"],(P,N)=>h("div",{class:"flex h-6 w-8 items-center justify-center text-center",key:N},W(P),1)),64))]),(r(!0),L(ee,null,ae(t(n),(P,N)=>(r(),L("div",{class:"flex items-center",key:N},[(r(!0),L(ee,null,ae(P,H=>(r(),L("div",{key:p(H),class:oe(["flex h-8 w-8 cursor-pointer items-center justify-center rounded hover:bg-surface-gray-2",{"text-ink-gray-3":H.getMonth()!==t(i)-1,"font-extrabold text-ink-gray-9":p(H)===p(t(l)),"bg-surface-gray-6 text-ink-white hover:bg-surface-gray-6":p(H)===s.value}]),onClick:()=>{C(H),I()}},W(H.getDate()),11,$n))),128))]))),128))]),h("div",Sn,[h("div",null,W(S(b.value))+" : "+W(S($.value))+" : "+W(S(x.value)),1),h("div",Vn,[h("div",Rn,[y(t(Le),{modelValue:b.value,"onUpdate:modelValue":F[0]||(F[0]=P=>b.value=P),name:"hours",type:"range",min:"0",max:"23",step:"1",onChange:()=>{w(),I()}},null,8,["modelValue","onChange"])]),h("div",Ln,[y(t(Le),{modelValue:$.value,"onUpdate:modelValue":F[1]||(F[1]=P=>$.value=P),name:"minutes",type:"range",min:"0",max:"59",step:"1",onChange:()=>{w(),I()}},null,8,["modelValue","onChange"])]),h("div",Fn,[y(t(Le),{modelValue:x.value,"onUpdate:modelValue":F[2]||(F[2]=P=>x.value=P),name:"seconds",type:"range",min:"0",max:"59",step:"1",onChange:()=>{w(),I()}},null,8,["modelValue","onChange"])])])]),h("div",An,[y(t(ve),{label:"Clear",class:"text-sm",onClick:()=>{C(""),I()}},null,8,["onClick"])])],2)]),_:3},8,["placement"]))}}),Xt=me(jn,[["__scopeId","data-v-0036c221"]]),Dn={name:"TabButtons",props:{buttons:{type:Array,required:!0},modelValue:{type:[String,Boolean,Number]}},emits:["update:modelValue"],components:{FeatherIcon:Be,RadioGroup:un,RadioGroupOption:dn,RadioGroupLabel:pn},computed:{value:{get(){return this.modelValue},set(e){this.$emit("update:modelValue",e)}}}},En={class:"flex space-x-1 rounded bg-surface-gray-2 p-0.5 text-sm"};function In(e,o,a,u,v,i){const l=re("FeatherIcon"),n=re("RadioGroupLabel"),_=re("RadioGroupOption"),A=re("RadioGroup");return r(),j(A,{modelValue:i.value,"onUpdate:modelValue":o[0]||(o[0]=d=>i.value=d)},{default:R(()=>[h("div",En,[(r(!0),L(ee,null,ae(a.buttons,d=>(r(),j(_,{as:"template",key:d.label,value:d.value??d.label},{default:R(({active:V,checked:b})=>[h("button",{class:oe([V?"ring-outline-gray-2 focus-visible:ring":"",b?"bg-surface-white text-ink-gray-9 shadow":"text-ink-gray-7","flex flex-1 justify-center gap-2 whitespace-nowrap rounded-[7px] px-3 py-[5px] leading-none transition-colors focus:outline-none"])},[d.icon?(r(),j(l,{key:0,class:"h-4 w-4",name:d.icon,label:d.label,"aria-label":d.label},null,8,["name","label","aria-label"])):z("",!0),ct(y(n,{as:"span",class:"flex h-4 items-center"},{default:R(()=>[dt(W(d.label),1)]),_:2},1536),[[pt,d.label&&!d.hideLabel]])],2)]),_:2},1032,["value"]))),128))])]),_:1},8,["modelValue"])}const Pn=me(Dn,[["render",In]]),On={class:"flex h-full w-full flex-col items-center justify-center text-base"},Mn={class:"text-xl font-medium"},Nn={class:"mt-1 text-base text-ink-gray-5"},qn={__name:"ListEmptyState",setup(e){const o=le("list");return(a,u)=>(r(),L("div",On,[G(a.$slots,"default",{},()=>[h("div",Mn,W(t(o).options.emptyState.title),1),h("div",Nn,W(t(o).options.emptyState.description),1),t(o).options.emptyState.button?(r(),j(t(ve),ye({key:0},t(o).options.emptyState.button,{class:"mt-4"}),null,16)):z("",!0)])]))}};function el(e,o=!0){let a=o?"14px ":"",u=e.map(v=>{let i=v.width||1;return typeof i=="number"?i+"fr":i}).join(" ");return a+u}const yt={left:"justify-start",start:"justify-start",center:"justify-center",middle:"justify-center",right:"justify-end",end:"justify-end"},Bn={class:"truncate"},tl={__name:"ListHeaderItem",props:{item:{type:Object,required:!0},debounce:{type:Number,default:1e3}},emits:["columnWidthUpdated"],setup(e,{emit:o}){const a=e,u=o,v=B(null),i=B(null),l=D(()=>{if(typeof a.item.width=="string"){const d=parseInt(a.item.width);if(a.item.width.includes("rem"))return d*16;if(a.item.width.includes("px"))return d}return i.value.offsetWidth}),n=d=>{const V=d.clientX,b=l.value,$=s=>{document.body.classList.add("select-none"),document.body.classList.add("cursor-col-resize"),v.value.style.backgroundColor="rgb(199 199 199)";let w=b+(s.clientX-V);a.item.width=`${w<50?50:w}px`,_(a.item.width)},x=()=>{document.body.classList.remove("select-none"),document.body.classList.remove("cursor-col-resize"),v.value.style.backgroundColor="",window.removeEventListener("mousemove",$),window.removeEventListener("mouseup",x)};window.addEventListener("mousemove",$),window.addEventListener("mouseup",x)},_=Dt(d=>{a.item.width=d,u("columnWidthUpdated")},a.debounce),A=le("list");return(d,V)=>(r(),L("div",{ref_key:"columnRef",ref:i,class:oe(["group relative flex items-center",e.item.align?t(yt)[e.item.align]:"justify-between"])},[h("div",{class:oe(["flex items-center space-x-2 truncate text-sm text-ink-gray-5",d.$attrs.class])},[G(d.$slots,"prefix",be(Ce({item:e.item}))),G(d.$slots,"default",{},()=>[h("div",Bn,W(e.item.label),1)]),G(d.$slots,"suffix",be(Ce({item:e.item})))],2),t(A).options.resizeColumn?G(d.$slots,"resizer",be(ye({key:0},{item:e.item})),()=>[h("div",{class:"flex h-4 absolute -right-2 w-2 cursor-col-resize justify-center",onMousedown:n},[h("div",{ref_key:"resizer",ref:v,class:"h-full w-[2px] rounded-full transition-all duration-300 ease-in-out group-hover:bg-gray-400"},null,512)],32)]):z("",!0)],2))}},ll={__name:"ListHeader",emits:["columnWidthUpdated"],setup(e,{emit:o}){const a=o,u=le("list");return(v,i)=>(r(),L("div",{class:"mb-2 grid items-center space-x-4 rounded bg-surface-gray-2 p-2",style:vt({gridTemplateColumns:t(el)(t(u).columns,t(u).options.selectable)})},[t(u).options.selectable?(r(),j(ft,{key:0,class:"cursor-pointer duration-300",modelValue:t(u).allRowsSelected,onClick:xe(t(u).toggleAllRows,["stop"])},null,8,["modelValue","onClick"])):z("",!0),G(v.$slots,"default",{},()=>[(r(!0),L(ee,null,ae(t(u).columns,l=>(r(),j(tl,{key:l.key,item:l,onColumnWidthUpdated:n=>a("columnWidthUpdated",l)},null,8,["item","onColumnWidthUpdated"]))),128))])],4))}},Tn={class:"truncate text-base"},nl={__name:"ListRowItem",props:{column:{type:Object,default:{}},row:{type:Object,default:{}},item:{type:[String,Number,Object],default:""},align:{type:String,default:"left"}},setup(e){const o=e,a=D(()=>{var l,n;return(l=o.column)!=null&&l.getLabel?(n=o.column)==null?void 0:n.getLabel({row:o.row}):v(o.item).label||""}),u=D(()=>i.value.options.showTooltip?o.column.getTooltip?o.column.getTooltip(o.row):v(o.item).label:"");function v(l){return l&&typeof l=="object"?l:{label:l}}const i=le("list");return(l,n)=>(r(),L("div",{class:oe(["flex items-center space-x-2",t(yt)[e.align]])},[G(l.$slots,"prefix",{},()=>[e.column.prefix?(r(),j(_e(typeof e.column.prefix=="function"?e.column.prefix({row:e.row}):e.column.prefix),{key:0})):z("",!0)]),y(t(Et),be(Ce(t(i).options.showTooltip?{text:u.value}:{text:""})),{default:R(()=>[G(l.$slots,"default",be(Ce({label:a.value})),()=>[h("div",Tn,W(a.value),1)])]),_:3},16),G(l.$slots,"suffix")],2))}},et={__name:"ListRow",props:{row:{type:Object,required:!0}},setup(e){const o=e,a=le("list"),u=D(()=>{var d;return(d=a.value.rows)!=null&&d.length?a.value.rows[a.value.rows.length-1][a.value.rowKey]===o.row[a.value.rowKey]:!1}),v=D(()=>a.value.selections.has(o.row[a.value.rowKey])),i=D(()=>a.value.options.enableActive&&a.value.activeRow.value===o.row.name),l=D(()=>a.value.options.getRowRoute||a.value.options.onRowClick),n=D(()=>typeof a.value.options.rowHeight=="number"?`${a.value.options.rowHeight}px`:a.value.options.rowHeight),_=D(()=>{var b,$,x;if(!v.value)return"rounded";const d=[...a.value.selections];let V=(b=a.value.rows[0])!=null&&b.group?a.value.rows.map(s=>s.rows):[a.value.rows];for(let s of V){let w=s.findIndex(S=>S==o.row);if(w===-1)continue;let C=!d.includes(($=s[w+1])==null?void 0:$.name),p=!d.includes((x=s[w-1])==null?void 0:x.name);return(C?"rounded-b ":"")+(p?"rounded-t":"")}}),A=(d,V)=>{a.value.options.onRowClick&&a.value.options.onRowClick(d,V),a.value.activeRow.value===d.name?a.value.activeRow.value=null:a.value.activeRow.value=d.name};return(d,V)=>(r(),j(_e(t(a).options.getRowRoute?"router-link":"div"),ye({class:[[_.value,v.value||i.value?"bg-surface-gray-2":"",l.value?"cursor-pointer":"",l.value?v.value||i.value?"hover:bg-surface-gray-3":"hover:bg-surface-menu-bar":""],"flex flex-col transition-all duration-300 ease-in-out"]},{to:t(a).options.getRowRoute?t(a).options.getRowRoute(e.row):void 0,onClick:b=>A(e.row,b)}),{default:R(()=>[(r(),j(_e(t(a).options.getRowRoute?"template":"button"),{class:"[all:unset] hover:[all:unset]"},{default:R(()=>{var b,$;return[h("div",{class:"grid items-center space-x-4 px-2",style:vt({height:n.value,gridTemplateColumns:t(el)(t(a).columns,t(a).options.selectable)})},[t(a).options.selectable?(r(),L("div",{key:0,class:"w-fit pr-2 py-3 flex",onClick:V[1]||(V[1]=xe(()=>{},["stop","prevent"])),onDblclick:V[2]||(V[2]=xe(()=>{},["stop"]))},[y(ft,{modelValue:v.value,class:"cursor-pointer duration-300",onClick:V[0]||(V[0]=xe(x=>t(a).toggleRow(e.row[t(a).rowKey]),["stop"]))},null,8,["modelValue"])],32)):z("",!0),(r(!0),L(ee,null,ae(t(a).columns,(x,s)=>(r(),L("div",{key:x.key,class:oe([t(yt)[x.align],s==0?"text-ink-gray-9":"text-ink-gray-7"])},[G(d.$slots,"default",ye({ref_for:!0},{idx:s,column:x,item:e.row[x.key],isActive:i.value}),()=>[t(a).slots.cell?(r(),j(_e(t(a).slots.cell),ye({key:0,ref_for:!0},{column:x,row:e.row,item:e.row[x.key],align:x.align}),null,16)):(r(),j(nl,{key:1,column:x,row:e.row,item:e.row[x.key],align:x.align},null,8,["column","row","item","align"]))])],2))),128))],4),u.value?z("",!0):(r(),L("div",{key:0,class:oe(["h-px border-t",_.value==="rounded"||($=(b=_.value)==null?void 0:b.includes)!=null&&$.call(b,"rounded-b")?"mx-2 border-outline-gray-1":"border-t-[--surface-gray-2]"])},null,2))]}),_:3}))]),_:3},16,["class"]))}},zn={class:"h-full overflow-y-auto"},al={__name:"ListRows",setup(e){const o=le("list");return(a,u)=>(r(),L("div",zn,[G(a.$slots,"default",{},()=>[(r(!0),L(ee,null,ae(t(o).rows,v=>(r(),j(et,{key:v[t(o).rowKey],row:v},null,8,["row"]))),128))])]))}},Hn={},Gn={xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 16 16"};function Un(e,o){return r(),L("svg",Gn,o[0]||(o[0]=[h("path",{fill:"currentColor",d:"M4.293 5.28h7.413a.5.5 0 0 1 .41.787l-3.707 5.295a.5.5 0 0 1-.82 0L3.884 6.067a.5.5 0 0 1 .41-.787Z"},null,-1)]))}const Wn=me(Hn,[["render",Un]]),Kn={class:"flex items-center"},Yn={class:"w-full py-1.5 pr-2"},Zn={key:1,class:"text-base font-medium leading-6"},ol={__name:"ListGroupHeader",props:{group:{type:Object,required:!0}},setup(e){const o=e,a=le("list");function u(){o.group.collapsed==null&&(o.group.collapsed=!1),o.group.collapsed=!o.group.collapsed}return(v,i)=>(r(),L(ee,null,[h("div",Kn,[h("button",{onClick:u,class:"ml-[3px] mr-[11px] rounded p-1 hover:bg-surface-gray-2"},[y(Wn,{class:oe(["h-4 w-4 text-ink-gray-6 transition-transform duration-200",[e.group.collapsed?"-rotate-90":""]])},null,8,["class"])]),G(v.$slots,"default",{},()=>[h("div",Yn,[t(a).slots["group-header"]?(r(),j(_e(t(a).slots["group-header"]),be(ye({key:0},{group:e.group})),null,16)):(r(),L("span",Zn,W(e.group.group),1))])])]),i[0]||(i[0]=h("div",{class:"mx-2 h-px border-t border-outline-gray-modals"},null,-1))],64))}},Jn={key:0,class:"mb-5 mt-2"},sl={__name:"ListGroupRows",props:{group:{type:Object,required:!0}},setup(e){const o=le("list");return(a,u)=>e.group.collapsed?z("",!0):(r(),L("div",Jn,[G(a.$slots,"default",{},()=>[(r(!0),L(ee,null,ae(e.group.rows,v=>(r(),j(et,{key:v[t(o).rowKey],row:v},null,8,["row"]))),128))])]))}},Qn={class:"h-full overflow-y-auto"},Xn={__name:"ListGroups",setup(e){const o=le("list");return(a,u)=>(r(),L("div",Qn,[(r(!0),L(ee,null,ae(t(o).rows,v=>(r(),L("div",{key:v.group},[G(a.$slots,"default",{},()=>[y(ol,{group:v},{default:R(()=>[a.$slots["group-header"]?G(a.$slots,"group-header",ye({key:0,ref_for:!0},{group:v})):z("",!0)]),_:2},1032,["group"]),y(sl,{group:v},null,8,["group"])])]))),128))]))}},ea={key:0,class:"absolute inset-x-0 bottom-6 mx-auto w-max text-base"},ta={class:"flex flex-1 justify-between border-r border-outline-gray-2 text-ink-gray-9"},la={class:"flex items-center space-x-3"},na={class:"mr-3"},aa={class:"flex items-center space-x-1"},rl=Object.assign({inheritAttrs:!1},{__name:"ListSelectBanner",setup(e){const o=le("list");let a=D(()=>o.value.options.selectionText(o.value.selections.size));return(u,v)=>(r(),j(Fl,{"enter-active-class":"duration-300 ease-out","enter-from-class":"transform opacity-0","enter-to-class":"opacity-100","leave-active-class":"duration-300 ease-in","leave-from-class":"opacity-100","leave-to-class":"transform opacity-0"},{default:R(()=>[t(o).selections.size?(r(),L("div",ea,[h("div",{class:oe(["flex min-w-[596px] items-center space-x-3 rounded-lg bg-surface-white px-4 py-2 shadow-2xl",u.$attrs.class])},[G(u.$slots,"default",be(Ce({selections:t(o).selections,allRowsSelected:t(o).allRowsSelected,selectAll:()=>t(o).toggleAllRows(!0),unselectAll:()=>t(o).toggleAllRows(!1)})),()=>[h("div",ta,[h("div",la,[y(ft,{modelValue:!0,disabled:!0,class:"text-ink-gray-9"}),h("div",null,W(t(a)),1)]),h("div",na,[G(u.$slots,"actions",be(Ce({selections:t(o).selections,allRowsSelected:t(o).allRowsSelected,selectAll:()=>t(o).toggleAllRows(!0),unselectAll:()=>t(o).toggleAllRows(!1)})))])]),h("div",aa,[y(t(ve),{class:oe(["w- text-ink-gray-7",t(o).allRowsSelected?"cursor-not-allowed":""]),disabled:t(o).allRowsSelected,variant:"ghost",onClick:v[0]||(v[0]=i=>t(o).toggleAllRows(!0))},{default:R(()=>v[2]||(v[2]=[dt(" Select all ")])),_:1,__:[2]},8,["disabled","class"]),y(t(ve),{icon:"x",variant:"ghost",onClick:v[1]||(v[1]=i=>t(o).toggleAllRows(!1))})])])],2)])):z("",!0)]),_:3}))}}),oa={class:"relative flex w-full flex-1 flex-col overflow-x-auto"},sa=Object.assign({inheritAttrs:!1},{__name:"ListView",props:{columns:{type:Array,default:[]},rows:{type:Array,default:[]},rowKey:{type:String,required:!0},options:{type:Object,default:()=>({getRowRoute:null,onRowClick:null,showTooltip:!0,selectable:!0,resizeColumn:!1,rowHeight:40,emptyState:{title:"No Data",description:"No data available"}})}},emits:["update:selections","update:active-row"],setup(e,{expose:o,emit:a}){const u=e,v=Al();let i=Ze(new Set),l=B(null);const n=a;Ge(i,x=>{i.size&&(l.value=null),n("update:selections",x)}),Ge(l,x=>{n("update:active-row",x)});let _=D(()=>{function x(w){return w===void 0?!0:w}function s(w){return w===void 0?!1:w}return{getRowRoute:u.options.getRowRoute||null,onRowClick:u.options.onRowClick||null,showTooltip:x(u.options.showTooltip),selectionText:u.options.selectionText||(w=>w===1?"1 row selected":`${w} rows selected`),enableActive:s(u.options.enableActive),selectable:x(u.options.selectable),resizeColumn:s(u.options.resizeColumn),rowHeight:u.options.rowHeight||40,emptyState:u.options.emptyState}});const A=D(()=>u.rows.length?V.value?i.size===u.rows.reduce((x,s)=>x+s.rows.length,0):i.size===u.rows.length:!1),d=D(()=>_.value.selectable);let V=D(()=>u.rows.every(x=>x.group&&x.rows&&Array.isArray(x.rows)));function b(x){i.delete(x)||i.add(x)}function $(x){if(!x||A.value){i.clear();return}if(V.value){u.rows.forEach(s=>{s.rows.forEach(w=>i.add(w[u.rowKey]))});return}u.rows.forEach(s=>i.add(s[u.rowKey]))}return Ee("list",D(()=>({rowKey:u.rowKey,rows:u.rows,columns:u.columns,options:_.value,selections:i,activeRow:l,allRowsSelected:A.value,slots:v,toggleRow:b,toggleAllRows:$}))),o({selections:i,allRowsSelected:A,toggleRow:b,toggleAllRows:$}),(x,s)=>(r(),L("div",oa,[h("div",{class:oe(["flex w-max min-w-full flex-col overflow-y-hidden",x.$attrs.class]),style:vt(x.$attrs.style)},[G(x.$slots,"default",be(Ce({showGroupedRows:t(V),selectable:d.value})),()=>[y(ll),u.rows.length?(r(),L(ee,{key:0},[t(V)?(r(),j(Xn,{key:0})):(r(),j(al,{key:1}))],64)):(r(),j(qn,{key:1})),d.value?(r(),j(rl,{key:2})):z("",!0)])],6)]))}}),ra={class:"flex justify-between gap-2"},ia={class:"flex items-center"},ua={key:1,class:"mx-3 h-[80%] border-l"},ca={class:"flex items-center gap-1 text-base text-ink-gray-5"},da={__name:"ListFooter",props:{modelValue:{type:Number,default:20},options:{type:Object,default:()=>({rowCount:0,totalCount:0,pageLengthOptions:[20,50,100]})}},emits:["update:modelValue","loadMore"],setup(e,{emit:o}){const a=e,u=o,v=D({get:()=>a.modelValue,set:n=>u("update:modelValue",n)}),i=B(a.options.pageLengthOptions||[20,50,100]),l=D(()=>a.options.rowCount&&a.options.totalCount&&a.options.rowCount<a.options.totalCount);return(n,_)=>{const A=re("Button");return r(),L("div",ra,[G(n.$slots,"default",{},()=>[G(n.$slots,"left",{},()=>[y(Pn,{modelValue:v.value,"onUpdate:modelValue":_[0]||(_[0]=d=>v.value=d),buttons:i.value.map(d=>({label:d,value:d}))},null,8,["modelValue","buttons"])]),G(n.$slots,"right",{},()=>[h("div",ia,[l.value?(r(),j(A,{key:0,label:"Load More",onClick:_[1]||(_[1]=d=>u("loadMore"))})):z("",!0),l.value?(r(),L("div",ua)):z("",!0),h("div",ca,[h("div",null,W(e.options.rowCount||"0"),1),_[2]||(_[2]=h("div",null,"of",-1)),h("div",null,W(e.options.totalCount||"0"),1)])])])])])}}},il={__name:"NestedPopover",props:{placement:{type:String,default:"bottom-start"}},setup(e){const o=e,a=B(null),u=B(null);let v=B(null);function i(){v.value?v.value.update():v.value=Pt(a.value.el,u.value.el,{placement:o.placement})}function l(){lt(()=>i())}return It(()=>{var n;(n=v.value)==null||n.destroy()}),(n,_)=>(r(),j(t(gt),null,{default:R(({open:A})=>[y(t(Gt),{as:"div",ref_key:"reference",ref:a,onClick:l,onFocusin:l,onKeydown:l},{default:R(({open:d})=>[G(n.$slots,"target",be(Ce({open:d})))]),_:2},1536),ct(h("div",null,[y(t(Ut),{ref_key:"popover",ref:u,static:"",class:"z-[100]"},{default:R(({open:d,close:V})=>[G(n.$slots,"body",be(Ce({open:d,close:V})))]),_:2},1536)],512),[[pt,A]])]),_:3}))}},pa={__name:"NestedPopover",props:{placement:{type:String,default:"bottom-start"}},setup(e){const o=e,a=B(null),u=B(null);let v=B(null);function i(){v.value?v.value.update():v.value=Pt(a.value.el,u.value.el,{placement:o.placement})}function l(){lt(()=>i())}return It(()=>{var n;(n=v.value)==null||n.destroy()}),(n,_)=>(r(),j(t(gt),null,{default:R(({open:A})=>[y(t(Gt),{ref_key:"reference",ref:a,as:"div",onClick:l,onFocusin:l,onKeydown:l},{default:R(({open:d})=>[G(n.$slots,"target",{open:d})]),_:3},512),ct(h("div",null,[y(t(Ut),{ref_key:"popover",ref:u,static:"",class:"z-[100]"},{default:R(({open:d,close:V})=>[G(n.$slots,"body",{open:d,close:V})]),_:3},512)],512),[[pt,A]])]),_:3}))}},fa={},va={xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"1","stroke-linecap":"round","stroke-linejoin":"round",class:"lucide lucide-arrow-down-a-z"};function ma(e,o){return r(),L("svg",va,o[0]||(o[0]=[mt('<path d="m3 16 4 4 4-4"></path><path d="M7 20V4"></path><path d="M20 8h-5"></path><path d="M15 10V6.5a2.5 2.5 0 0 1 5 0V10"></path><path d="M15 14h5l-5 6h5"></path>',5)]))}const Ct=me(fa,[["render",ma]]),ha={},ga={width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"};function ya(e,o){return r(),L("svg",ga,o[0]||(o[0]=[h("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M8.07548 1.50005C8.05087 1.49632 8.02566 1.49438 8 1.49438C7.97434 1.49438 7.94914 1.49632 7.92452 1.50005H3C1.89543 1.50005 1 2.39548 1 3.50005V12.5C1 13.6046 1.89543 14.5 3 14.5H7.92511C7.94954 14.5037 7.97455 14.5056 8 14.5056C8.02545 14.5056 8.05046 14.5037 8.07489 14.5H13C14.1046 14.5 15 13.6046 15 12.5V3.50005C15 2.39548 14.1046 1.50005 13 1.50005H8.07548ZM7.5 2.50005H3C2.44772 2.50005 2 2.94776 2 3.50005V12.5C2 13.0523 2.44772 13.5 3 13.5H7.5L7.5 2.50005ZM8.5 13.5L8.5 2.50005H13C13.5523 2.50005 14 2.94776 14 3.50005V12.5C14 13.0523 13.5523 13.5 13 13.5H8.5Z",fill:"currentColor"},null,-1)]))}const $t=me(ha,[["render",ya]]),ba={},wa={xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"1","stroke-linecap":"round","stroke-linejoin":"round",class:"lucide lucide-arrow-up-z-a"};function _a(e,o){return r(),L("svg",wa,o[0]||(o[0]=[mt('<path d="m3 8 4-4 4 4"></path><path d="M7 4v16"></path><path d="M15 4h5l-5 6h5"></path><path d="M15 20v-3.5a2.5 2.5 0 0 1 5 0V20"></path><path d="M20 18h-5"></path>',5)]))}const St=me(ba,[["render",_a]]),ka={},xa={width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"};function Ca(e,o){return r(),L("svg",xa,o[0]||(o[0]=[h("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M13 6.75C12.3096 6.75 11.75 6.19036 11.75 5.5C11.75 4.80964 12.3096 4.25 13 4.25C13.6904 4.25 14.25 4.80964 14.25 5.5C14.25 6.19036 13.6904 6.75 13 6.75ZM3 6.75C2.30964 6.75 1.75 6.19036 1.75 5.5C1.75 4.80964 2.30964 4.25 3 4.25C3.69036 4.25 4.25 4.80964 4.25 5.5C4.25 6.19036 3.69036 6.75 3 6.75ZM6.75 5.5C6.75 6.19036 7.30964 6.75 8 6.75C8.69036 6.75 9.25 6.19036 9.25 5.5C9.25 4.80964 8.69036 4.25 8 4.25C7.30964 4.25 6.75 4.80964 6.75 5.5ZM13 11.75C12.3096 11.75 11.75 11.1904 11.75 10.5C11.75 9.80964 12.3096 9.25 13 9.25C13.6904 9.25 14.25 9.80964 14.25 10.5C14.25 11.1904 13.6904 11.75 13 11.75ZM1.75 10.5C1.75 11.1904 2.30964 11.75 3 11.75C3.69036 11.75 4.25 11.1904 4.25 10.5C4.25 9.80964 3.69036 9.25 3 9.25C2.30964 9.25 1.75 9.80964 1.75 10.5ZM8 11.75C7.30964 11.75 6.75 11.1904 6.75 10.5C6.75 9.80964 7.30964 9.25 8 9.25C8.69036 9.25 9.25 9.80964 9.25 10.5C9.25 11.1904 8.69036 11.75 8 11.75Z",fill:"currentColor"},null,-1)]))}const ul=me(ka,[["render",Ca]]),$a={},Sa={width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"};function Va(e,o){return r(),L("svg",Sa,o[0]||(o[0]=[h("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M2.5 4.5C2.5 3.39543 3.39543 2.5 4.5 2.5H8.5C8.77614 2.5 9 2.27614 9 2C9 1.72386 8.77614 1.5 8.5 1.5H4.5C2.84315 1.5 1.5 2.84315 1.5 4.5V11.5C1.5 13.1569 2.84315 14.5 4.5 14.5H11.5C13.1569 14.5 14.5 13.1569 14.5 11.5V7.5C14.5 7.22386 14.2761 7 14 7C13.7239 7 13.5 7.22386 13.5 7.5V11.5C13.5 12.6046 12.6046 13.5 11.5 13.5H4.5C3.39543 13.5 2.5 12.6046 2.5 11.5V4.5ZM14.1255 2.58446C14.3207 2.3892 14.3207 2.07261 14.1255 1.87735C13.9302 1.68209 13.6136 1.68209 13.4184 1.87735L6.68616 8.60954C6.4909 8.8048 6.4909 9.12139 6.68616 9.31665C6.88143 9.51191 7.19801 9.51191 7.39327 9.31665L14.1255 2.58446Z",fill:"currentColor"},null,-1)]))}const Ra=me($a,[["render",Va]]),La={},Fa={width:"16",height:"16",fill:"none",viewBox:"0 0 16 16"};function Aa(e,o){return r(),L("svg",Fa,o[0]||(o[0]=[h("g",{class:"es-line-reload","clip-path":"url(#a)"},[h("path",{fill:"currentColor","fill-rule":"evenodd",d:"M9.743 2.189a6 6 0 0 0-6.558 2.596.5.5 0 0 0 .844.535 5 5 0 0 1 9.12 1.683l-1.187-.686a.5.5 0 0 0-.5.866l2.165 1.25a.5.5 0 0 0 .683-.183l1.25-2.165a.5.5 0 0 0-.866-.5l-.603 1.044a6 6 0 0 0-4.348-4.44ZM3.356 9.024l1.189.687a.5.5 0 0 0 .5-.866L2.88 7.595a.5.5 0 0 0-.683.183L.947 9.943a.5.5 0 1 0 .866.5l.603-1.044a6 6 0 0 0 10.9 1.816.5.5 0 0 0-.844-.536 5 5 0 0 1-9.116-1.655Z",class:"Union","clip-rule":"evenodd"})],-1),h("defs",null,[h("clipPath",{id:"a",class:"a"},[h("path",{fill:"currentColor",d:"M.25 0h16v16h-16z"})])],-1)]))}const ja=me(La,[["render",Aa]]),Da={},Ea={width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"};function Ia(e,o){return r(),L("svg",Ea,o[0]||(o[0]=[h("path",{d:"M2.35619 8.42909C2.35644 9.77009 2.84031 11.066 3.719 12.079C4.5977 13.092 5.81226 13.7542 7.13977 13.9439C8.46729 14.1336 9.8187 13.8382 10.946 13.1119C12.0732 12.3856 12.9008 11.2771 13.2766 9.98982C13.6525 8.70258 13.5515 7.32295 12.9922 6.10414C12.4329 4.88534 11.4528 3.90914 10.2318 3.35469C9.0108 2.80025 7.63079 2.70476 6.34504 3.08576C5.0593 3.46675 3.95409 4.29867 3.23226 5.42883",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round"},null,-1),h("path",{d:"M3.21297 2V5.42886H6.64183",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round"},null,-1)]))}const Pa=me(Da,[["render",Ia]]),Oa={},Ma={width:"16",height:"17",viewBox:"0 0 16 17",fill:"none",xmlns:"http://www.w3.org/2000/svg"};function Na(e,o){return r(),L("svg",Ma,o[0]||(o[0]=[mt('<path d="M1.75 3.75H10.75" stroke="currentColor" stroke-miterlimit="10" stroke-linecap="round" stroke-linejoin="round"></path><path d="M1.75 7.75H7.75" stroke="currentColor" stroke-miterlimit="10" stroke-linecap="round" stroke-linejoin="round"></path><path d="M1.75 11.75H5.75" stroke="currentColor" stroke-miterlimit="10" stroke-linecap="round" stroke-linejoin="round"></path><path d="M14.25 8.25L12.25 6.25L10.25 8.25" stroke="currentColor" stroke-miterlimit="10" stroke-linecap="round" stroke-linejoin="round"></path><path d="M12.25 12.25L12.25 6.25" stroke="currentColor" stroke-miterlimit="10" stroke-linecap="round" stroke-linejoin="round"></path>',5)]))}const ze=me(Oa,[["render",Na]]),qa={},Ba={width:"16",height:"17",viewBox:"0 0 16 17",fill:"none",xmlns:"http://www.w3.org/2000/svg"};function Ta(e,o){return r(),L("svg",Ba,o[0]||(o[0]=[h("path",{d:"M2 4.5H14",stroke:"currentColor","stroke-miterlimit":"10","stroke-linecap":"round","stroke-linejoin":"round"},null,-1),h("path",{d:"M4 8.5H12",stroke:"currentColor","stroke-miterlimit":"10","stroke-linecap":"round","stroke-linejoin":"round"},null,-1),h("path",{d:"M6.5 12.5H9.5",stroke:"currentColor","stroke-miterlimit":"10","stroke-linecap":"round","stroke-linejoin":"round"},null,-1)]))}const za=me(qa,[["render",Ta]]),Ha={class:"flex items-center w-fit"},Ga={class:"flex h-5 w-5 items-center justify-center rounded-[5px] bg-surface-white pt-px text-xs font-medium text-ink-gray-8 shadow-sm"},Ua={class:"my-2 rounded-lg border border-gray-100 bg-white shadow-xl"},Wa={class:"min-w-72 p-2 sm:min-w-[400px]"},Ka={key:0,class:"flex flex-col gap-2"},Ya={class:"-mb-2 flex w-full items-center justify-between"},Za={class:"text-base text-gray-600"},Ja={id:"fieldname",class:"w-full"},Qa={id:"operator"},Xa={id:"value",class:"w-full"},eo={key:1,class:"flex items-center justify-between gap-2"},to={class:"flex items-center gap-2"},lo={class:"w-13 pl-2 text-end text-base text-gray-600"},no={id:"fieldname",class:"!min-w-[140px]"},ao={id:"operator"},oo={id:"value",class:"!min-w-[140px]"},so={key:1,class:"mb-3 flex h-7 items-center px-3 text-sm text-gray-600"},ro={class:"flex items-center justify-between gap-2"},Vt={__name:"Filter",props:{default_filters:{type:Object,required:!1,default:{}}},setup(e){const{isMobileView:o}=Ot(),a=["Check"],u=["Link","Dynamic Link"],v=["Float","Int","Currency","Percent"],i=["Select"],l=["Data","Long Text","Small Text","Text Editor","Text"],n=["Date","Datetime"],_=["Rating"],A=le("listViewData"),d=le("listViewActions"),{list:V,filterableFields:b}=A,$=D(()=>{var q,M,K;if(!V)return new Set;let k=((q=V==null?void 0:V.params)==null?void 0:q.filters)||((K=(M=V.data)==null?void 0:M.params)==null?void 0:K.filters);return!k||!b.data?new Set:x(b.data,k)});function x(k,q){let M=[];for(let[K,Q]of Object.entries(q)){let Y=k.find(ie=>ie.fieldname===K);(typeof Q!="object"||!Q)&&(Q=["=",Q],(Y==null?void 0:Y.fieldtype)==="Check"&&(Q=["equals",Q[1]?"Yes":"No"])),typeof Q[1]=="number"&&(Q[1]=Q[1].toString()),Y&&M.push({field:Y,fieldname:K,operator:nt[Q[0]],value:Q[1]})}return new Set(M)}function s(k,q){let M=[];return l.includes(k)&&M.push({label:"Equals",value:"equals"},{label:"Not Equals",value:"not equals"},{label:"Like",value:"like"},{label:"Not Like",value:"not like"},{label:"In",value:"in"},{label:"Not In",value:"not in"},{label:"Is",value:"is"}),q==="_assign"&&(M=[{label:"Like",value:"like"},{label:"Not Like",value:"not like"},{label:"Is",value:"is"}]),v.includes(k)&&M.push({label:"Equals",value:"equals"},{label:"Not Equals",value:"not equals"},{label:"Like",value:"like"},{label:"Not Like",value:"not like"},{label:"In",value:"in"},{label:"Not In",value:"not in"},{label:"Is",value:"is"},{label:"<",value:"<"},{label:">",value:">"},{label:"<=",value:"<="},{label:">=",value:">="}),i.includes(k)&&M.push({label:"Equals",value:"equals"},{label:"Not Equals",value:"not equals"},{label:"In",value:"in"},{label:"Not In",value:"not in"},{label:"Is",value:"is"}),u.includes(k)&&M.push({label:"Equals",value:"equals"},{label:"Not Equals",value:"not equals"},{label:"Like",value:"like"},{label:"Not Like",value:"not like"},{label:"In",value:"in"},{label:"Not In",value:"not in"},{label:"Is",value:"is"}),a.includes(k)&&M.push({label:"Equals",value:"equals"}),["Duration"].includes(k)&&M.push({label:"Like",value:"like"},{label:"Not Like",value:"not like"},{label:"In",value:"in"},{label:"Not In",value:"not in"},{label:"Is",value:"is"}),n.includes(k)&&M.push({label:"Equals",value:"equals"},{label:"Not Equals",value:"not equals"},{label:"Is",value:"is"},{label:">",value:">"},{label:"<",value:"<"},{label:">=",value:">="},{label:"<=",value:"<="},{label:"Between",value:"between"},{label:"Timespan",value:"timespan"}),_.includes(k)&&M.push({label:"Equals",value:"equals"},{label:"Not Equals",value:"not equals"},{label:"Is",value:"is"},{label:">",value:">"},{label:"<",value:"<"},{label:">=",value:">="},{label:"<=",value:"<="}),M}function w(k){const{field:q,operator:M}=k,{fieldtype:K,options:Q}=q;if(M=="is")return J(ge,{type:"select",options:[{label:"Set",value:"set"},{label:"Not Set",value:"not set"}]});if(M=="timespan")return J(ge,{type:"select",options:at});if(["like","not like","in","not in"].includes(M))return J(ge,{type:"text"});if(i.includes(K)||a.includes(K)){const Y=K=="Check"?["Yes","No"]:S(Q);return J(ge,{type:"select",options:Y.map(ie=>({label:ie,value:ie}))})}else return u.includes(K)?K=="Dynamic Link"?J(ge,{type:"text"}):J(Bt,{class:"form-control",doctype:Q,value:k.value}):v.includes(K)?J(ge,{type:"number"}):n.includes(K)&&M=="between"?J(en,{value:k.value,iconLeft:""}):n.includes(K)?J(K=="Date"?Qt:Xt,{value:k.value,iconLeft:""}):_.includes(K)?J(Nt,{rating:k.value||0,static:!1,class:"truncate","onUpdate:modelValue":Y=>I(Y,k)}):J(ge,{type:"text"})}function C(k){return i.includes(k.fieldtype)?S(k.options)[0]:a.includes(k.fieldtype)?"Yes":n.includes(k.fieldtype)?null:_.includes(k.fieldtype)?0:""}function p(k,q=null){return q==="_assign"?"like":i.includes(k)||a.includes(k)||v.includes(k)?"equals":n.includes(k)?"between":u.includes(k)||_.includes(k)?"equals":"like"}function S(k){return k.split(`
`)}function f(k){k&&($.value.add({field:{label:k.label,fieldname:k.value,fieldtype:k.fieldtype,options:k.options},fieldname:k.value,operator:p(k.fieldtype,k.fieldname),value:C(k)}),H())}function m(k,q){$.value.delete(Array.from($.value)[q]),$.value.add({fieldname:k.value,operator:p(k.fieldtype),value:C(k),field:{label:k.label,fieldname:k.value,fieldtype:k.fieldtype,options:k.options}}),H()}function c(k){$.value.delete(Array.from($.value)[k]),H()}function F(k){$.value.clear(),H(),k&&k()}function I(k,q){k=k.target?k.target.value:k,q.operator==="between"?q.value=[k.split(",")[0],k.split(",")[1]]:q.value=k,H()}function P(k,q){let M=k.target._value,K=k.target.value;q.operator=k.target.value,N(M,K)||(q.value=C(q.field)),(K==="is"||K==="is not")&&(q.value="set"),H()}function N(k,q){let M=["equals","not equals","in","not in",">","<",">=","<="];return!!(M.includes(k)&&M.includes(q))}function H(){let k=[];$.value.forEach(q=>{k.push({fieldname:q.fieldname,operator:q.operator,value:q.value})}),d.applyFilters(Ve(k))}function Ve(k){return{...Array.from(k).map(we).reduce((Q,Y)=>(["equals","="].includes(Y.operator)?Q[Y.fieldname]=Y.value=="Yes"?!0:Y.value=="No"?!1:Y.value:Q[Y.fieldname]=[Ue[Y.operator.toLowerCase()],Y.value],Q),{})}}function we(k){return k.operator.includes("like")&&!k.value.includes("%")&&(k.value=`%${k.value}%`),k}const Ue={is:"is","is not":"is not",in:"in","not in":"not in",equals:"=","not equals":"!=",yes:!0,no:!1,like:"LIKE","not like":"NOT LIKE",">":">","<":"<",">=":">=","<=":"<=",between:"between",timespan:"timespan"},nt={is:"is","=":"equals","!=":"not equals",equals:"equals","is not":"is not",true:"yes",false:"no",LIKE:"like","NOT LIKE":"not like",in:"in","not in":"not in",">":">","<":"<",">=":">=","<=":"<=",between:"between",timespan:"timespan"},at=[{label:"Last Week",value:"last week"},{label:"Last Month",value:"last month"},{label:"Last Quarter",value:"last quarter"},{label:"Last 6 Months",value:"last 6 months"},{label:"Last Year",value:"last year"},{label:"Yesterday",value:"yesterday"},{label:"Today",value:"today"},{label:"Tomorrow",value:"tomorrow"},{label:"This Week",value:"this week"},{label:"This Month",value:"this month"},{label:"This Quarter",value:"this quarter"},{label:"This Year",value:"this year"},{label:"Next Week",value:"next week"},{label:"Next Month",value:"next month"},{label:"Next Quarter",value:"next quarter"},{label:"Next 6 Months",value:"next 6 months"},{label:"Next Year",value:"next year"}];return(k,q)=>{const M=re("Button"),K=re("FeatherIcon");return r(),j(t(il),null,{target:R(()=>{var Q,Y,ie;return[h("div",Ha,[y(M,{label:"Filter",class:oe((Q=$.value)!=null&&Q.size?"rounded-r-none":"")},je({prefix:R(()=>[y(za,{class:"h-4"})]),_:2},[(Y=$.value)!=null&&Y.size?{name:"suffix",fn:R(()=>[h("span",Ga,W($.value.size),1)]),key:"0"}:void 0]),1032,["class"]),(ie=$.value)!=null&&ie.size?(r(),j(t(Et),{key:0,text:"Clear all Filter"},{default:R(()=>[h("div",null,[y(M,{class:"rounded-l-none border-l",icon:"x",onClick:q[0]||(q[0]=xe(U=>F(!1),["stop"]))})])]),_:1})):z("",!0)])]}),body:R(({close:Q})=>{var Y,ie;return[h("div",Ua,[h("div",Wa,[(Y=$.value)!=null&&Y.size?(r(!0),L(ee,{key:0},ae($.value,(U,ce)=>(r(),L("div",{key:ce,id:"filter-list",class:"mb-4 sm:mb-3"},[t(o)?(r(),L("div",Ka,[h("div",Ya,[h("div",Za,W(ce==0?"Where":"And"),1),y(M,{class:"flex",variant:"ghost",icon:"x",onClick:te=>c(ce)},null,8,["onClick"])]),h("div",Ja,[y(t(De),{value:U.field.fieldname,options:t(b).data,onChange:te=>m(te,ce),placeholder:"First Name"},null,8,["value","options","onChange"])]),h("div",Qa,[y(t(ge),{type:"select",modelValue:U.operator,"onUpdate:modelValue":te=>U.operator=te,onChange:te=>P(te,U),options:s(U.field.fieldtype,U.field.fieldname),placeholder:"Equals"},null,8,["modelValue","onUpdate:modelValue","onChange","options"])]),h("div",Xa,[(r(),j(_e(w(U)),{modelValue:U.value,"onUpdate:modelValue":te=>U.value=te,onChange:te=>I(te,U),placeholder:"John Doe"},null,40,["modelValue","onUpdate:modelValue","onChange"]))])])):(r(),L("div",eo,[h("div",to,[h("div",lo,W(ce==0?"Where":"And"),1),h("div",no,[y(t(De),{value:U.field.fieldname,options:t(b).data,onChange:te=>m(te,ce),placeholder:"First Name"},null,8,["value","options","onChange"])]),h("div",ao,[y(t(ge),{type:"select",modelValue:U.operator,"onUpdate:modelValue":te=>U.operator=te,onChange:te=>P(te,U),options:s(U.field.fieldtype,U.field.fieldname),placeholder:"Equals"},null,8,["modelValue","onUpdate:modelValue","onChange","options"])]),h("div",oo,[(r(),j(_e(w(U)),{modelValue:U.value,"onUpdate:modelValue":te=>U.value=te,onChange:te=>I(te,U),placeholder:"John Doe"},null,40,["modelValue","onUpdate:modelValue","onChange"]))])]),y(M,{class:"flex",variant:"ghost",icon:"x",onClick:te=>c(ce)},null,8,["onClick"])]))]))),128)):(r(),L("div",so,W("Empty - Choose a field to filter by"))),h("div",ro,[y(t(De),{value:"",options:t(b).data,onChange:q[1]||(q[1]=U=>f(U)),placeholder:"First name"},{target:R(({togglePopover:U})=>[y(M,{class:"!text-gray-600",variant:"ghost",onClick:ce=>U(),label:"Add Filter"},{prefix:R(()=>[y(K,{name:"plus",class:"h-4"})]),_:2},1032,["onClick"])]),_:1},8,["options"]),(ie=$.value)!=null&&ie.size?(r(),j(M,{key:0,class:"!text-gray-600",variant:"ghost",label:"Clear all Filter",onClick:U=>F(Q)},null,8,["onClick"])):z("",!0)])])])]}),_:1})}}};function io(e){return jl()?(Dl(e),!0):!1}function rt(e){return typeof e=="function"?e():t(e)}const uo=typeof window<"u"&&typeof document<"u";typeof WorkerGlobalScope<"u"&&globalThis instanceof WorkerGlobalScope;function co(e){return e||El()}function po(e,o=!0,a){co()?Se(e,a):o?e():lt(e)}const fo=uo?window.document:void 0;function vo(e){var o;const a=rt(e);return(o=a==null?void 0:a.$el)!=null?o:a}function mo(e,o,a={}){let u;const{document:v=fo,...i}=a,l={onUpdate:d=>{yo(o,d.oldIndex,d.newIndex,d)}},n=()=>{const d=typeof e=="string"?v==null?void 0:v.querySelector(e):vo(e);!d||u!==void 0||(u=new Kl(d,{...l,...i}))},_=()=>{u==null||u.destroy(),u=void 0},A=(d,V)=>{if(V!==void 0)u==null||u.option(d,V);else return u==null?void 0:u.option(d)};return po(n),io(_),{stop:_,start:n,option:A}}function ho(e,o,a){const u=e.children[a];e.insertBefore(o,u)}function go(e){e.parentNode&&e.parentNode.removeChild(e)}function yo(e,o,a,u=null){u!=null&&(go(u.item),ho(u.from,u.item,o));const v=Il(e),i=v?[...rt(e)]:rt(e);if(a>=0&&a<i.length){const l=i.splice(o,1)[0];lt(()=>{i.splice(a,0,l),v&&(e.value=i)})}}const bo={class:"flex h-5 w-5 items-center justify-center rounded-[5px] bg-surface-white pt-px text-xs font-medium text-ink-gray-8 shadow-sm"},wo={key:1,class:"flex items-center justify-center"},_o={class:"my-2 rounded-lg border border-gray-100 bg-white shadow-xl"},ko={class:"min-w-60 p-2"},xo={key:0,id:"sort-list",class:"mb-3 flex flex-col gap-2"},Co={class:"handle flex h-7 w-7 items-center justify-center"},$o={class:"flex"},So={key:1,class:"mb-3 flex h-7 items-center px-3 text-sm text-gray-600"},Vo={class:"flex items-center justify-between gap-2"},Rt={__name:"SortBy",props:{hideLabel:{type:Boolean,default:!1}},emits:["update"],setup(e,{emit:o}){const a=le("listViewData"),u=le("listViewActions"),{list:v,sortableFields:i}=a,l=D({get:()=>{var p;if(!v)return new Set;let C=(p=v.params)==null?void 0:p.order_by;return!C||!i.data?new Set:(C=C.split(", ").map(S=>{const[f,m]=S.split(" ");return{fieldname:f,direction:m}}),new Set(C))},set:C=>{v.params.order_by=s(C)}}),n=D(()=>{if(!i.data)return[];if(!l.value.size)return i.data;const C=[...l.value].map(p=>p.fieldname);return w(),i.data.filter(p=>!C.includes(p.value))}),_=mo("#sort-list",l,{handle:".handle",animation:200,onEnd:()=>x()});function A(){var S,f;if(!l.value.size)return"Sort";let C=Array.from(l.value);return((f=(S=i.data)==null?void 0:S.find(m=>m.value===C[0].fieldname))==null?void 0:f.label)||sort.fieldname}function d(C){l.value.add({fieldname:C.value,direction:"asc"}),w(),x()}function V(C,p){let S=Array.from(l.value)[p];l.value.delete(S),l.value.add({fieldname:C.value,direction:S.direction}),x()}function b(C){l.value.delete(Array.from(l.value)[C]),x()}function $(C){l.value.clear(),x(),C()}function x(){u.applySort(s(l.value))}function s(C){let p="";return C.forEach(S=>{p+=`${S.fieldname} ${S.direction}, `}),p=p.slice(0,-2),p}function w(){_.stop(),_.start()}return(C,p)=>{var m;const S=re("Button"),f=re("FeatherIcon");return(m=l.value)!=null&&m.size?(r(),j(t(il),{key:1},{target:R(({open:c})=>{var F,I,P;return[l.value.size>1?(r(),j(S,{key:0,label:"Sort"},je({default:R(()=>[e.hideLabel?(r(),j(t(ze),{key:0,class:"h-4"})):z("",!0)]),_:2},[e.hideLabel?void 0:{name:"prefix",fn:R(()=>[y(t(ze),{class:"h-4"})]),key:"0"},(F=l.value)!=null&&F.size?{name:"suffix",fn:R(()=>[h("div",bo,W(l.value.size),1)]),key:"1"}:void 0]),1024)):(r(),L("div",wo,[l.value.size?(r(),j(S,{key:0,class:"rounded-r-none border-r",onClick:p[1]||(p[1]=xe(()=>{Array.from(l.value)[0].direction=Array.from(l.value)[0].direction=="asc"?"desc":"asc",x()},["stop"]))},{default:R(()=>[Array.from(l.value)[0].direction=="asc"?(r(),j(t(Ct),{key:0,class:"h-4"})):(r(),j(t(St),{key:1,class:"h-4"}))]),_:1})):z("",!0),y(S,{label:A(),class:oe(l.value.size?"rounded-l-none":"")},je({_:2},[!e.hideLabel&&!((I=l.value)!=null&&I.size)?{name:"prefix",fn:R(()=>[y(t(ze),{class:"h-4"})]),key:"0"}:void 0,(P=l.value)!=null&&P.size?{name:"suffix",fn:R(()=>[y(f,{name:c?"chevron-up":"chevron-down",class:"h-4 text-gray-600"},null,8,["name"])]),key:"1"}:void 0]),1032,["label","class"])]))]}),body:R(({close:c})=>{var F,I;return[h("div",_o,[h("div",ko,[(F=l.value)!=null&&F.size?(r(),L("div",xo,[(r(!0),L(ee,null,ae(l.value,(P,N)=>(r(),L("div",{key:P.fieldname,class:"flex items-center gap-1"},[h("div",Co,[y(t(ul),{class:"h-4 w-4 cursor-grab text-gray-600"})]),h("div",$o,[y(S,{size:"md",class:"rounded-r-none border-r",onClick:()=>{P.direction=P.direction=="asc"?"desc":"asc",x()}},{default:R(()=>[P.direction=="asc"?(r(),j(t(Ct),{key:0,class:"h-4"})):(r(),j(t(St),{key:1,class:"h-4"}))]),_:2},1032,["onClick"]),y(De,{class:"!w-32",value:P.fieldname,options:t(i).data,onChange:H=>V(H,N),placeholder:"First Name"},{target:R(({togglePopover:H,selectedValue:Ve,displayValue:we})=>[y(S,{class:"flex w-full items-center justify-between rounded-l-none !text-gray-600 text-xs",size:"md",onClick:Ue=>H()},{suffix:R(()=>[y(f,{name:"chevron-down",class:"h-4 text-gray-600"})]),default:R(()=>[dt(W(we(Ve))+" ",1)]),_:2},1032,["onClick"])]),_:2},1032,["value","options","onChange"])]),y(S,{variant:"ghost",icon:"x",onClick:H=>b(N)},null,8,["onClick"])]))),128))])):(r(),L("div",So,W("Empty - Choose a field to sort by"))),h("div",Vo,[y(De,{options:n.value,value:"",placeholder:"First Name",onChange:p[2]||(p[2]=P=>d(P))},{target:R(({togglePopover:P})=>[y(S,{class:"!text-gray-600",variant:"ghost",onClick:N=>P(),label:"Add Sort"},{prefix:R(()=>[y(f,{name:"plus",class:"h-4"})]),_:2},1032,["onClick"])]),_:1},8,["options"]),(I=l.value)!=null&&I.size?(r(),j(S,{key:0,class:"!text-gray-600",variant:"ghost",label:"Clear Sort",onClick:P=>$(c)},null,8,["onClick"])):z("",!0)])])])]}),_:1})):(r(),j(De,{key:0,options:n.value,value:"",placeholder:"First Name",onChange:p[0]||(p[0]=c=>d(c))},{target:R(({togglePopover:c})=>{var F;return[y(S,{label:"Sort",onClick:I=>c()},je({default:R(()=>[e.hideLabel?(r(),j(t(ze),{key:0,class:"h-4"})):z("",!0)]),_:2},[!e.hideLabel&&!((F=l.value)!=null&&F.size)?{name:"prefix",fn:R(()=>[y(t(ze),{class:"h-4"})]),key:"0"}:void 0]),1032,["onClick"])]}),_:1},8,["options"]))}}},Ro={__name:"QuickFilterField",props:{filter:{type:Object,required:!0}},emits:["applyQuickFilter"],setup(e,{emit:o}){const a=o,u=Dt((i,l)=>{a("applyQuickFilter",i,l)},500);function v(i,l){a("applyQuickFilter",i,l)}return(i,l)=>e.filter.type=="Check"?(r(),j(t(ge),{key:0,label:e.filter.label,type:"checkbox",modelValue:e.filter.value,"onUpdate:modelValue":l[0]||(l[0]=n=>e.filter.value=n),onChange:l[1]||(l[1]=xe(n=>v(e.filter,n.target.checked),["stop"])),class:"w-44"},null,8,["label","modelValue"])):e.filter.type==="Select"?(r(),j(t(ge),{key:1,class:"form-control cursor-pointer [&_select]:cursor-pointer w-44",type:"select",modelValue:e.filter.value,"onUpdate:modelValue":l[2]||(l[2]=n=>e.filter.value=n),options:e.filter.options,placeholder:e.filter.label,onChange:l[3]||(l[3]=xe(n=>v(e.filter,n.target.value),["stop"]))},null,8,["modelValue","options","placeholder"])):e.filter.type==="Link"?(r(),j(t(Bt),{key:2,value:e.filter.value,doctype:e.filter.options,placeholder:e.filter.label,onChange:l[4]||(l[4]=n=>v(e.filter,n)),class:"w-44"},null,8,["value","doctype","placeholder"])):["Date","Datetime"].includes(e.filter.type)?(r(),j(_e(e.filter.type==="Date"?t(Qt):t(Xt)),{key:3,class:"border-none w-44",value:e.filter.value,onChange:l[5]||(l[5]=n=>v(e.filter,n)),placeholder:e.filter.label},null,40,["value","placeholder"])):(r(),j(t(Le),{key:4,modelValue:e.filter.value,"onUpdate:modelValue":l[6]||(l[6]=n=>e.filter.value=n),type:"text",placeholder:e.filter.label,onInput:l[7]||(l[7]=xe(n=>t(u)(e.filter,n.target.value),["stop"]))},null,8,["modelValue","placeholder"]))}},Lo={key:0},Fo={__name:"QuickFilters",setup(e){const o=le("listViewData"),a=le("listViewActions"),{list:u,quickFilters:v}=o;function i(l,n){var d;let _={...(d=u.params)==null?void 0:d.filters},A=l.name;n?(["Check","Select","Link","Date","Datetime"].includes(l.type)?_[A]=n:_[A]=["LIKE",`%${n}%`],l.value=n):(delete _[A],l.value=""),a.applyFilters(_)}return(l,n)=>t(v).loading?z("",!0):(r(),L("div",Lo,[y(t(Ql),{class:"flex flex-1 items-center -ml-1 flex-wrap gap-2",orientation:"horizontal"},{default:R(()=>[(r(!0),L(ee,null,ae(t(v).data,_=>(r(),L("div",{key:_.name,class:"min-w-36"},[y(Ro,{filter:_,onApplyQuickFilter:n[0]||(n[0]=(A,d)=>i(A,d))},null,8,["filter"])]))),128))]),_:1})]))}},Lt={__name:"Reload",props:{loading:{type:Boolean,default:!1}},setup(e){return(o,a)=>{const u=ja,v=re("Button");return r(),j(v,{label:"Refresh",loading:e.loading},{icon:R(()=>[y(u,{class:"h-4 w-4"})]),_:1},8,["loading"])}}},Ao={class:"my-2 p-1.5 min-w-40 rounded-lg bg-surface-modal shadow-2xl ring-1 ring-black ring-opacity-5 focus:outline-none"},jo={key:0},Do={class:"flex cursor-grab items-center justify-between gap-6 rounded px-2 py-1.5 text-base text-ink-gray-8 hover:bg-surface-gray-2"},Eo={class:"flex items-center gap-2"},Io={class:"flex cursor-pointer items-center gap-1"},Po={class:"mt-1.5 flex flex-col gap-1 border-t border-outline-gray-modals pt-1.5"},Oo={key:1},Mo={class:"flex flex-col items-center justify-between gap-2 rounded px-2 py-1.5 text-base text-ink-gray-8"},No={class:"flex flex-col items-center gap-3"},qo={class:"flex w-full gap-2 border-t pt-2"},Bo={__name:"ColumnSettings",props:{hideLabel:{type:Boolean,default:!1}},emits:["update"],setup(e,{emit:o}){const a=B(!1),u=B({columns:[],rows:[],isDefault:!1}),v=le("listViewData"),{list:i}=v,l=le("listViewActions"),n=B(!1),_=B({old:{},label:"",key:"",width:"10rem"}),A=D({get:()=>{var f;return(f=i.data)==null?void 0:f.is_default},set:f=>{i.data.is_default=f}}),d=D({get:()=>{var f;return(f=i.data)==null?void 0:f.columns},set:f=>{i.data.columns=f}}),V=D({get:()=>{var f;return(f=i.data)==null?void 0:f.rows},set:f=>{i.data.rows=f}}),b=D(()=>{var m;let f=(m=i.data)==null?void 0:m.fields;return f?d.value===""?f:f.filter(c=>!d.value.find(F=>F.key===c.value)):[]});function $(f){let m=["Float","Int","Percent","Currency"].includes(f.type)?"right":"left",c={label:f.label,type:f.type,key:f.value,width:"10rem",align:m};d.value.push(c),V.value.push(f.value),S(!0)}function x(f){d.value.length!==1&&(d.value=d.value.filter(m=>m.key!==f.key),f.key!=="name"&&(V.value=V.value.filter(m=>m!==f.key)),S())}function s(f){n.value=!0,_.value=f,_.value.old={...f}}function w(f){n.value=!1;let m=d.value.findIndex(c=>c.key===f.key);d.value[m].label=f.label,d.value[m].width=f.width,d.value[m].old&&delete d.value[m].old,S()}function C(){n.value=!1,_.value.label=_.value.old.label,_.value.width=_.value.old.width,delete _.value.old}function p(f){S(!0,!0,!0),f()}function S(f=!1,m=!1,c=!1){A.value=m,a.value=!0;let F={columns:c?u.value.columns:d.value,rows:c?u.value.rows:V.value,isDefault:c?u.value.isDefault:m,reload:f,reset:c};l.updateColumns(F),a.value=!c}return Pl(()=>i.data,f=>{f&&(u.value.columns=JSON.parse(JSON.stringify(f.columns)),u.value.rows=JSON.parse(JSON.stringify(f.rows)),u.value.isDefault=f.is_default)}),(f,m)=>{const c=re("Button"),F=re("FeatherIcon"),I=re("FormControl");return r(),j(pa,null,{target:R(()=>[y(c,{label:"Columns"},je({default:R(()=>[e.hideLabel?(r(),j(t($t),{key:0,class:"h-4"})):z("",!0)]),_:2},[e.hideLabel?void 0:{name:"prefix",fn:R(()=>[y(t($t),{class:"h-4"})]),key:"0"}]),1024)]),body:R(({close:P})=>[h("div",Ao,[n.value?(r(),L("div",Oo,[h("div",Mo,[h("div",No,[y(I,{type:"text",size:"md",label:"Label",modelValue:_.value.label,"onUpdate:modelValue":m[1]||(m[1]=N=>_.value.label=N),class:"sm:w-full w-52",placeholder:"First Name"},null,8,["modelValue"]),y(I,{type:"text",size:"md",label:"Width",class:"sm:w-full w-52",modelValue:_.value.width,"onUpdate:modelValue":m[2]||(m[2]=N=>_.value.width=N),placeholder:"10rem",description:"Width can be in number, pixel or rem (eg. 3, 30px, 10rem)",debounce:500},null,8,["modelValue"])]),h("div",qo,[y(c,{variant:"subtle",label:"Cancel",class:"w-full flex-1",onClick:C}),y(c,{variant:"solid",label:"Update",class:"w-full flex-1",onClick:m[3]||(m[3]=N=>w(_.value))})])])])):(r(),L("div",jo,[y(t(Yl),{list:d.value,onEnd:S,delay:t(Ol)()?200:0,"item-key":"key",class:"list-group"},{item:R(({element:N})=>[h("div",Do,[h("div",Eo,[y(t(ul),{class:"h-3.5"}),h("div",null,W(N.label),1)]),h("div",Io,[y(c,{variant:"ghost",class:"!h-5 w-5 !p-1",onClick:H=>s(N)},{default:R(()=>[y(t(Ra),{class:"h-3.5"})]),_:2},1032,["onClick"]),y(c,{variant:"ghost",class:"!h-5 w-5 !p-1",onClick:H=>x(N)},{default:R(()=>[y(F,{name:"x",class:"h-3.5"})]),_:2},1032,["onClick"])])])]),_:1},8,["list","delay"]),h("div",Po,[y(De,{value:"",options:b.value,onChange:m[0]||(m[0]=N=>$(N))},{target:R(({togglePopover:N})=>[y(c,{class:"w-full !justify-start !text-ink-gray-5",variant:"ghost",onClick:H=>N(),label:"Add Column"},{prefix:R(()=>[y(F,{name:"plus",class:"h-4"})]),_:2},1032,["onClick"])]),_:1},8,["options"]),A.value?z("",!0):(r(),j(c,{key:0,class:"w-full !justify-start !text-ink-gray-5",variant:"ghost",onClick:N=>p(P),label:"Reset to Default"},{prefix:R(()=>[y(t(Pa),{class:"h-4"})]),_:2},1032,["onClick"]))])]))])]),_:1})}}},To={key:0,class:"mx-3 h-full overflow-y-auto sm:mx-5"},zo={class:"my-2 flex items-center gap-2 text-base font-medium text-ink-gray-8 justify-between w-full mr-1"},Ho={class:"flex items-center gap-2 w-full"},Go={key:1,class:"flex items-end gap-1 w-full"},Uo={class:"text-xs text-ink-gray-5"},Wo={__name:"ListRows",props:{rows:{type:Array,required:!0},groupByActions:{type:Array,default:()=>[]}},setup(e){const o=e,a=B(o.rows),u=i=>{let l=o.groupByActions.map(n=>({...n,onClick:()=>n.onClick(i)}));return i.group.label=="General"&&(l=l.filter(n=>n.label==="Add New Article")),l};Ge(()=>o.rows,i=>a.value=i);let v=D(()=>o.rows.every(i=>i.group&&i.rows&&Array.isArray(i.rows)));return(i,l)=>t(v)?(r(),L("div",To,[(r(!0),L(ee,null,ae(a.value,n=>(r(),L("div",{key:n.group},[y(t(ol),{group:n},{default:R(()=>[h("div",zo,[h("div",Ho,[n.icon?(r(),j(_e(n.icon),{key:0})):z("",!0),n.group.label!=""?(r(),L("div",Go,[h("span",null,W(n.group.label),1),h("span",Uo,W(n.rows.length+" Article"+(n.rows.length>1?"s":"")),1)])):z("",!0)]),e.groupByActions.length>0?(r(),j(t(Mt),{key:0,options:u(n)},{default:R(()=>[y(t(ve),{variant:"ghost"},{icon:R(()=>[y(t(Zl),{class:"h-4 w-4"})]),_:1})]),_:2},1032,["options"])):z("",!0)])]),_:2},1032,["group"]),y(t(sl),{group:n,id:"list-rows",class:"!mt-0"},{default:R(()=>[(r(!0),L(ee,null,ae(n.rows,_=>(r(),j(t(et),{key:_.name,row:_,class:"truncate text-base row"},{default:R(({idx:A,column:d,item:V})=>[G(i.$slots,"default",ye({ref_for:!0},{idx:A,column:d,item:V,row:_}))]),_:2},1032,["row"]))),128))]),_:2},1032,["group"])]))),128))])):(r(),j(t(al),{key:1,class:"mx-3 sm:mx-5",id:"list-rows"},{default:R(()=>[(r(!0),L(ee,null,ae(a.value,n=>(r(),j(t(et),{key:n.name,row:n,class:"truncate text-base"},{default:R(({idx:_,column:A,item:d})=>[G(i.$slots,"default",ye({ref_for:!0},{idx:_,column:A,item:d,row:n}))]),_:2},1032,["row"]))),128))]),_:3}))}},Ko={key:0,class:"flex items-center justify-between gap-2 px-5 pb-4 pt-3 pl-6"},Yo={key:1,class:"flex items-start gap-2 justify-end h-full"},Zo={key:2,class:"flex justify-between items-center w-full"},Jo={class:"flex items-center gap-2"},Qo={key:2,class:"p-20 border-t sm:px-5 px-3 py-2"},cs=$e({__name:"ListViewBuilder",props:{options:{}},emits:["emptyStateAction","rowClick"],setup(e,{expose:o,emit:a}){const u=e,v=a,i=zl(),l=Gl(),{isManager:n}=Ml(),{$dialog:_}=tn();B(new Set);const A=Ze({doctype:"",hideViewControls:!1,selectable:!1,view:{view_type:"list",group_by_field:"owner",name:i.query.view},groupByActions:[],default_page_length:20,isCustomerPortal:!1,hideColumnSetting:!0,rowRoute:{name:"",prop:""},selectBannerActions:[{label:"Delete",icon:"trash-2",onClick:g=>{_({title:"Delete",message:`Are you sure you want to delete ${g.size} item(s)?`,actions:[{label:"Confirm",variant:"solid",onClick({close:E}){d(E,g)}}]})},condition:()=>!b.value.isCustomerPortal&&n}]});function d(g,E){Nl("bulk_delete"+u.options.doctype),ql("frappe.desk.reportview.delete_items",{items:JSON.stringify(Array.from(E)),doctype:u.options.doctype}).then(()=>{Bl.success("Item(s) deleted successfully"),g(),V()})}function V(){S.reload(),S.unselectAll()}const b=D(()=>({...A,...u.options})),{isMobileView:$}=Ot(),x={icon:"",title:"No Data Found"},s=Ze({doctype:b.value.doctype,filters:{},default_filters:b.value.defaultFilters,order_by:"modified desc",page_length:b.value.default_page_length,page_length_count:b.value.default_page_length,view:b.value.view,columns:[],rows:[],show_customer_portal_fields:b.value.isCustomerPortal,is_default:!1}),w=D(()=>{var g;return((g=b.value)==null?void 0:g.emptyState)||x}),C=B(!1),p=Ke({url:"helpdesk.api.doc.get_list_data",params:s,transform:g=>(g.columns.forEach(E=>{I(E),P(E)}),b.value.doctype==="HD Ticket"&&g.data.forEach(E=>{s.show_customer_portal_fields&&E.status==="Replied"&&(E.status="Awaiting Response")}),g),onSuccess:g=>{p.params=s,c.value=g.columns}}),S={list:p,reload:K,unselectAll:()=>{}};function f(g,E=()=>{}){S.unselectAll=E;const T=b.value.selectBannerActions.map(X=>({...X,onClick:()=>{var ne;return(ne=X.onClick)==null?void 0:ne.call(X,g)}})),Z=A.selectBannerActions.filter(X=>!T.some(ne=>ne.label===X.label)).map(X=>({...X,onClick:()=>{var ne;return(ne=X.onClick)==null?void 0:ne.call(X,g)}}));return[...T,...Z]}const m=D(()=>{var g,E,T,Z;return(g=p.data)!=null&&g.data?p.data.view_type==="group_by"?(T=(E=p.data)==null?void 0:E.group_by_field)!=null&&T.name?F(p.data.data,p.data.group_by_field):[]:(Z=p.data)==null?void 0:Z.data:[]}),c=B([]);function F(g,E){var Z;let T=[];return(Z=E.options)==null||Z.forEach(X=>{let ne=[];X.value?ne=g.filter(Ie=>Ie[E.name]==X.value):ne=g.filter(Ie=>!Ie[E.name]);let de={group:X||" ",collapsed:!1,rows:ne,icon:J(Be,{name:"folder",class:"h-4 w-4 flex-shrink-0 text-ink-gray-6"})};T.push(de)}),T||g}function I(g){if(!g.hasOwnProperty("key"))return g;const E=/([a-zA-Z0-9_]+)\.([a-zA-Z0-9_]+)/,T=g.key.match(E);g.key=T?T[2]:g.key}function P(g){var T,Z;if(!((T=b.value)!=null&&T.columnConfig))return g;const E=b.value.columnConfig;return E.hasOwnProperty(g.key)&&(g.prefix=(Z=E[g.key])==null?void 0:Z.prefix),g}const N=Ke({url:"helpdesk.api.doc.get_filterable_fields",cache:["DocField",b.value.doctype],auto:!b.value.hideViewControls,params:{doctype:b.value.doctype,append_assign:!0,show_customer_portal_fields:s.show_customer_portal_fields},transform:g=>(g=g.map(E=>({label:E.label,value:E.fieldname,...E})),g)}),H=Ke({url:"helpdesk.api.doc.sort_options",auto:!b.value.hideViewControls,params:{doctype:b.value.doctype,show_customer_portal_fields:s.show_customer_portal_fields}}),Ve=Ke({url:"helpdesk.api.doc.get_quick_filters",auto:!b.value.hideViewControls,params:{doctype:b.value.doctype,show_customer_portal_fields:s.show_customer_portal_fields},transform:g=>{if(!g.length)return g=[{name:"name",label:"Name",fieldtype:"Data"}],g}});function we(g,E,T,Z){var ne,de;const X=b.value.columnConfig;return X&&((ne=X[g.key])!=null&&ne.custom)?(de=X[g.key])==null?void 0:de.custom({column:g,row:E,item:T,idx:Z}):Z===0?J("span",{class:"truncate text-base text-ink-gray-6",textContent:T}):g.type==="Datetime"?J("span",{class:"text-p-xs",textContent:Ul(T)}):g.type==="MultipleAvatar"?J(Xl,{avatars:T,hideName:!0,class:"flex items-center truncate flex-1 flex-row-reverse justify-end"}):g.type==="Rating"?J(Nt,{rating:T||0,class:"truncate"}):J("span",{class:"truncate flex-1",textContent:T})}function Ue(g,E,T,Z){var ne;if(["Data","Datetime","Rating","Int","Float"].includes(E.type)){if(((ne=b.value.rowRoute)==null?void 0:ne.name)!=="")return;v("rowClick",T.name);return}if(g.stopPropagation(),g.preventDefault(),Z=="Awaiting Response"&&(Z="Replied"),E.type==="MultipleAvatar"){if(Z.length>1){let de=g.target;de=de.closest(".user-avatar"),de&&(Z=de.getAttribute("data-name"))}else Z=Z[0].name;k({...s.filters,[E.key]:["LIKE",Z]});return}k({...s.filters,[E.key]:Z})}const nt=D(()=>!b.value.hideViewControls&&N.data&&H.data&&Ve.data),at=Ze({list:p,filterableFields:N,quickFilters:Ve,sortableFields:H});Ee("listViewData",at),Ee("listViewActions",{applyFilters:k,applySort:q,updateColumns:M,reload:K});function k(g){C.value=!0,s.filters={...g},p.submit({...s}),s.is_default&&(Y(),C.value=!1)}function q(g){C.value=!0,s.order_by=g,p.submit({...s,order_by:g})}function M(g){C.value=!0;const{columns:E,isDefault:T,rows:Z}=g;E==null||E.forEach(X=>{I(X),P(X)}),c.value=s.columns=T?"":E,s.rows=T?"":Z,p.reload({...s})}function K(g=!1){g&&(s.filters=b.value.defaultFilters||{},s.order_by="modified desc",s.page_length=b.value.default_page_length,s.page_length_count=b.value.default_page_length,s.columns=[],s.rows=[],s.is_default=!0),p.reload({...s})}function Q(g,E=!1){if(s.page_length_count=g,E)s.page_length+=g;else{if(g===s.page_length&&g===s.page_length_count)return;s.page_length=g,s.page_length_count=g}p.reload()}function Y(){const g={filters:JSON.stringify(s.filters),columns:JSON.stringify(s.columns),rows:JSON.stringify(s.rows),order_by:s.order_by,name:i.query.view||"default",dt:b.value.doctype,route_name:i.name,is_customer_portal:b.value.isCustomerPortal};U(g,()=>{C.value=!1})}const{findView:ie,updateView:U,defaultView:ce}=Jl(b.value.doctype),te=D(()=>{let g=ie(i.query.view).value;return!!(!g||!g.public||g.public&&n)});function bt(){We(),C.value=!1}function We(){let g=wt();if(!g){l.push({name:i.name}),K(!0);return}s.filters=g.filters,s.order_by=g.order_by||"modified desc",s.columns=g.columns,s.rows=g.rows,p.submit({...s})}function wt(){let g;return i.query.view?(g=ie(i.query.view).value,s.is_default=!1):ce.value&&(g=ce.value,s.is_default=!0),g}Ge(()=>i.query.view,g=>{s.view.name=g,We(),g||(Ye.value.label="List",Ye.value.icon="lucide:align-justify")});const _t=Tl(`list_position+${u.options.doctype}`,0);function cl(g){_t.value=g.target.scrollTop}function dl(){setTimeout(()=>{const g=document.querySelector(".list-rows");g&&(g.scrollTop=_t.value)},200)}return Se(async()=>{var g,E;if(dl(),((g=ot.data)==null?void 0:g.length)>0&&((E=ot.filters)==null?void 0:E.dt)===b.value.doctype||await ot.list.promise,We(),i.query.view||ce.value){if(i.query.view){const T=wt();if(!T)return;Ye.value.label=T.label||"List",Ye.value.icon=Hl(T.icon)}return}}),o(S),(g,E)=>{var Z,X,ne,de,Ie,kt;const T=re("Button");return r(),L(ee,null,[nt.value?(r(),L("div",Ko,[t($)?z("",!0):(r(),j(t(Fo),{key:0,class:"flex-1"})),t($)?(r(),L("div",Zo,[y(t(Vt),{default_filters:s.filters},null,8,["default_filters"]),h("div",Jo,[y(t(Lt),{onClick:bt,loading:t(p).loading},null,8,["loading"]),y(t(Rt),{"hide-label":t($)},null,8,["hide-label"])])])):(r(),L("div",Yo,[C.value&&te.value?(r(),j(T,{key:0,label:"Save Changes",onClick:Y})):z("",!0),y(t(Lt),{onClick:bt,loading:t(p).loading},null,8,["loading"]),y(t(Vt),{default_filters:s.filters},null,8,["default_filters"]),y(t(Rt),{"hide-label":t($)},null,8,["hide-label"]),b.value.hideColumnSetting?z("",!0):(r(),j(t(Bo),{key:1,"hide-label":t($)},null,8,["hide-label"]))]))])):z("",!0),((Z=t(p).data)==null?void 0:Z.data.length)>0?(r(),j(t(sa),{key:1,class:"flex-1",columns:c.value,rows:m.value,"row-key":"name",options:{selectable:b.value.selectable,showTooltip:!1,resizeColumn:!1,getRowRoute:se=>{var he,Pe,Oe;return{name:(he=b.value.rowRoute)==null?void 0:he.name,params:{[(Pe=b.value.rowRoute)==null?void 0:Pe.prop]:se.name},query:{view:(Oe=t(i).query)==null?void 0:Oe.view}}},emptyState:w.value}},{default:R(()=>[y(t(ll),{class:"sm:mx-5 mx-3"},{default:R(()=>[(r(!0),L(ee,null,ae(c.value,se=>(r(),j(t(tl),{key:se.key,item:se,onColumnWidthUpdated:E[0]||(E[0]=he=>console.log(he))},null,8,["item"]))),128))]),_:1}),y(Wo,{rows:m.value,"group-by-actions":b.value.groupByActions,onScrollend:cl,class:"list-rows"},{default:R(({idx:se,column:he,item:Pe,row:Oe})=>[y(t(nl),{item:Pe,column:he,row:Oe},{default:R(()=>[(r(),j(_e(we(he,Oe,Pe,se)),{key:he.key,onClick:pl=>Ue(pl,he,Oe,Pe)},null,8,["onClick"]))]),_:2},1032,["item","column","row"])]),_:1},8,["rows","group-by-actions"]),b.value.showSelectBanner?(r(),j(t(rl),{key:0},{actions:R(({selections:se,unselectAll:he})=>[y(t(Mt),{options:f(se,he)},{default:R(()=>[y(T,{icon:"more-horizontal",variant:"ghost"})]),_:2},1032,["options"])]),_:1})):z("",!0)]),_:1},8,["columns","rows","options"])):z("",!0),((X=t(p).data)==null?void 0:X.data.length)>0?(r(),L("div",Qo,[y(t(da),{options:{rowCount:(de=(ne=t(p))==null?void 0:ne.data)==null?void 0:de.row_count,totalCount:(kt=(Ie=t(p))==null?void 0:Ie.data)==null?void 0:kt.total_count},pageLengthCount:s.page_length_count,onLoadMore:E[1]||(E[1]=se=>Q(s.page_length_count,!0)),modelValue:s.page_length_count,"onUpdate:modelValue":[E[2]||(E[2]=se=>s.page_length_count=se),E[3]||(E[3]=se=>{Q(se)})]},null,8,["options","pageLengthCount","modelValue"])])):(r(),j(ln,{key:3,title:w.value.title,icon:w.value.icon,onEmptyStateAction:E[4]||(E[4]=se=>v("emptyStateAction"))},null,8,["title","icon"]))],64)}}});export{Ra as E,cs as _};
//# sourceMappingURL=ListViewBuilder.vue_vue_type_script_setup_true_lang-23f24b4c.js.map
