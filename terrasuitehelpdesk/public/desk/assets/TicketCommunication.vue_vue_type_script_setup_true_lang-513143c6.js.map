{"version":3,"file":"TicketCommunication.vue_vue_type_script_setup_true_lang-513143c6.js","sources":["../../../../desk/src/pages/ticket/TicketCommunication.vue"],"sourcesContent":["<template>\n  <div class=\"border rounded flex-1 px-3 pt-2.5 bg-white mb-4\">\n    <div class=\"mb-4 flex items-center justify-between text-base\">\n      <div class=\"flex items-center gap-0.5\">\n        <UserAvatar v-bind=\"user\" size=\"lg\" expand strong :hide-avatar=\"true\" />\n        <Icon icon=\"lucide:dot\" class=\"text-gray-500\" />\n        <Tooltip :text=\"dayjs(date).long()\">\n          <span class=\"text-gray-600\">\n            {{ dayjs.tz(date).fromNow() }}\n          </span>\n        </Tooltip>\n      </div>\n    </div>\n\n    <EmailContent :content=\"sanitize(content)\" />\n    <div class=\"flex flex-wrap gap-2 mb-2\">\n      <AttachmentItem\n        v-for=\"a in attachments\"\n        :key=\"a.file_url\"\n        :label=\"a.file_name\"\n        :url=\"a.file_url\"\n      />\n    </div>\n  </div>\n</template>\n\n<script setup lang=\"ts\">\nimport { AttachmentItem, UserAvatar } from \"@/components\";\nimport { dayjs } from \"@/dayjs\";\nimport { UserInfo } from \"@/types\";\nimport { Icon } from \"@iconify/vue\";\nimport { Tooltip } from \"frappe-ui\";\nimport sanitizeHtml from \"sanitize-html\";\n\ninterface Attachment {\n  file_name: string;\n  file_url: string;\n}\n\ninterface P {\n  content: string;\n  date: string;\n  user: UserInfo;\n  cc?: string;\n  bcc?: string;\n  attachments?: Attachment[];\n}\n\nwithDefaults(defineProps<P>(), {\n  cc: () => \"\",\n  bcc: () => \"\",\n  attachments: () => [],\n});\n\nfunction sanitize(html: string) {\n  return sanitizeHtml(html, {\n    allowedTags: sanitizeHtml.defaults.allowedTags.concat([\"img\", \"video\"]),\n    allowedAttributes: {\n      a: [\"href\"],\n      video: [\"src\", \"controls\"],\n      img: [\"src\"],\n    },\n  });\n}\n</script>\n"],"names":["sanitize","html","sanitizeHtml","_openBlock","_createElementBlock","_hoisted_1","_createElementVNode","_hoisted_2","_hoisted_3","_createVNode","_unref","UserAvatar","_mergeProps","_ctx","Icon","Tooltip","dayjs","date","_hoisted_4","_toDisplayString","_component_EmailContent","content","_hoisted_5","_Fragment","_renderList","attachments","a","_createBlock","AttachmentItem"],"mappings":"i3BAsDA,SAASA,EAASC,EAAc,CAC9B,OAAOC,EAAaD,EAAM,CACxB,YAAaC,EAAa,SAAS,YAAY,OAAO,CAAC,MAAO,OAAO,CAAC,EACtE,kBAAmB,CACjB,EAAG,CAAC,MAAM,EACV,MAAO,CAAC,MAAO,UAAU,EACzB,IAAK,CAAC,KAAK,CACb,CAAA,CACD,CACH,yBA9DE,OAAAC,EAAA,EAAAC,EAsBM,MAtBNC,EAsBM,CArBJC,EAUM,MAVNC,EAUM,CATJD,EAQM,MARNE,EAQM,CAPJC,EAAwEC,EAAAC,CAAA,EAAxEC,EAAwEC,EAAhD,KAAA,CAAE,KAAK,KAAK,OAAA,GAAO,OAAA,GAAQ,cAAa,EAAA,YAChEJ,EAAgDC,EAAAI,CAAA,EAAA,CAA1C,KAAK,aAAa,MAAM,eAAA,GAC9BL,EAIUC,EAAAK,CAAA,EAAA,CAJA,KAAML,EAAAM,CAAA,EAAMC,EAAAA,IAAI,EAAE,KAAI,CAAA,aAC9B,IAEO,CAFPX,EAEO,OAFPY,EACKC,EAAAT,EAAAM,CAAA,EAAM,GAAGC,EAAI,IAAA,EAAE,QAAO,CAAA,EAAA,CAAA,CAAA,wBAMjCR,EAA6CW,EAAA,CAA9B,QAASpB,EAASqB,EAAO,OAAA,uBACxCf,EAOM,MAPNgB,EAOM,QANJlB,EAKEmB,EAAA,KAAAC,EAJYC,EAAW,YAAhBC,QADTC,EAKEjB,EAAAkB,CAAA,EAAA,CAHC,IAAKF,EAAE,SACP,MAAOA,EAAE,UACT,IAAKA,EAAE"}