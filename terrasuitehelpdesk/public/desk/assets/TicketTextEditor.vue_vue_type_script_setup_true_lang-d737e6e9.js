import{d as k,A as y,c as C,a as _,ao as B,r as x,e as p,k as h,g as r,w as n,l,h as t,C as i,ar as V,a2 as F,at as T,f as $,t as E,G as H,z as S,F as I,R as N}from"./index-54e545bb.js";import{_ as L}from"./AttachmentItem.vue_vue_type_script_setup_true_lang-f98cb03f.js";import{P,I as v}from"./more-horizontal-b561c647.js";import"./dayjs-8f71cd34.js";import{F as M}from"./FileUploader-3bc7c8ba.js";import{T as j}from"./TextEditor-bf30f06f.js";import{_ as w}from"./UserAvatar.vue_vue_type_script_setup_true_lang-73349f36.js";import"./knowledgeBase-de4d1c97.js";const z={class:"rounded p-3 shadow w-full"},A={class:"text-base"},D={class:"flex items-center justify-between"},U={class:"flex flex-col gap-2"},q={class:"flex flex-col space-y-1.5 overflow-auto sm:flex-row sm:justify-between"},G={class:"flex items-center gap-1"},R={class:"flex items-center gap-2"},J=k({__name:"TextEditor",props:{modelValue:{},autofocus:{type:Boolean,default:!1}},emits:["clear","update:modelValue"],setup(b,{expose:f}){const u=b,m=y(null),d=C(()=>m.value.editor),e=_(),s=["Paragraph",["Heading 2","Heading 3","Heading 4","Heading 5"],"Bullet List","Numbered List","Image","Video","Link","Blockquote","Code"];return f({editor:d}),u.autofocus&&B(()=>m.value.editor.commands.focus()),(a,o)=>{const c=x("Button");return p(),h("div",z,[r(t(j),F({ref_key:"e",ref:m,extensions:[t(P)]},a.$attrs,{"editor-class":["prose-f max-h-64 max-w-none  overflow-auto my-4 min-h-[5rem]",t(T)(a.modelValue)],"bubble-menu":"",content:a.modelValue,onChange:o[1]||(o[1]=g=>a.$emit("update:modelValue",g))}),{top:n(()=>[l("span",A,[l("span",D,[r(t(w),{name:t(e).userName,image:t(e).userImage,expand:"",strong:""},null,8,["name","image"]),i(a.$slots,"top-right")]),i(a.$slots,"top-bottom")])]),bottom:n(()=>[l("div",U,[i(a.$slots,"bottom-top"),l("div",q,[l("div",G,[r(t(V),{buttons:s}),i(a.$slots,"bottom-left")]),l("div",R,[r(c,{label:"Discard",theme:"gray",variant:"subtle",onClick:o[0]||(o[0]=()=>{d.value.commands.clearContent(!0),a.$emit("clear")})}),i(a.$slots,"bottom-right")])])])]),_:3},16,["extensions","editor-class","content"])])}}}),K={class:"flex flex-wrap gap-2"},O={class:"flex"},Q={class:"text-base text-gray-700"},ae=k({__name:"TicketTextEditor",props:{content:{},placeholder:{},attachments:{},expand:{type:Boolean,default:!1}},emits:["update:content","update:attachments","update:expand"],setup(b,{expose:f}){const u=y(null),m=C(()=>u.value.editor),d=_();return f({editor:m}),(e,s)=>{const a=x("Button");return e.expand?(p(),$(t(J),{key:0,ref_key:"e",ref:u,"model-value":e.content,placeholder:e.placeholder,"onUpdate:modelValue":s[2]||(s[2]=o=>e.$emit("update:content",o)),onClear:s[3]||(s[3]=()=>e.$emit("update:attachments",[]))},{"bottom-top":n(()=>[l("div",K,[(p(!0),h(I,null,H(e.attachments,o=>(p(),$(t(L),{key:o.file_url,label:o.file_name},{suffix:n(()=>[r(t(v),{icon:"lucide:x",onClick:S(c=>e.$emit("update:attachments",e.attachments.filter(g=>g.file_url!==o.file_url)),["stop"])},null,8,["onClick"])]),_:2},1032,["label"]))),128))])]),"bottom-left":n(()=>[l("span",O,[i(e.$slots,"bottom-left"),r(t(M),{"upload-args":{folder:"Home/Helpdesk",private:!0},onSuccess:s[0]||(s[0]=o=>e.$emit("update:attachments",[...e.attachments,o])),onFailure:s[1]||(s[1]=()=>t(N).error("Error uploading file"))},{default:n(({openFileSelector:o})=>[r(a,{theme:"gray",variant:"ghost",onClick:c=>o()},{icon:n(()=>[r(t(v),{icon:"lucide:paperclip"})]),_:2},1032,["onClick"])]),_:1})])]),"top-right":n(()=>[i(e.$slots,"top-right")]),"top-bottom":n(()=>[i(e.$slots,"top-bottom")]),"bottom-right":n(()=>[i(e.$slots,"bottom-right")]),_:3},8,["model-value","placeholder"])):(p(),h("div",{key:1,class:"flex w-full cursor-pointer items-center gap-2 rounded bg-gray-100 px-3.5 py-2 hover:bg-gray-200",onClick:s[4]||(s[4]=()=>e.$emit("update:expand",!e.expand))},[r(t(w),{name:t(d).userName,image:t(d).userImage,size:"sm"},null,8,["name","image"]),l("span",Q,E(e.placeholder),1)]))}}});export{ae as _};
//# sourceMappingURL=TicketTextEditor.vue_vue_type_script_setup_true_lang-d737e6e9.js.map
