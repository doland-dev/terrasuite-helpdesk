{"version":3,"file":"Dropdown-a6c1fbb4.js","sources":["../../../../desk/src/components/frappe-ui/Dropdown.vue"],"sourcesContent":["<template>\n  <Menu as=\"div\" class=\"relative inline-block text-left\" v-slot=\"{ open }\">\n    <Popover\n      :transition=\"dropdownTransition\"\n      :show=\"open\"\n      :placement=\"popoverPlacement\"\n    >\n      <template #target=\"{ togglePopover }\">\n        <MenuButton as=\"template\">\n          <slot v-if=\"$slots.default\" v-bind=\"{ open, togglePopover }\" />\n          <Button v-else :active=\"open\" v-bind=\"button\">\n            {{ button ? button?.label || null : \"Options\" }}\n          </Button>\n        </MenuButton>\n      </template>\n\n      <template #body>\n        <div\n          class=\"mt-2 min-w-40 divide-y divide-outline-gray-modals rounded-lg bg-surface-modal shadow-2xl ring-1 ring-black ring-opacity-5 focus:outline-none\"\n          :class=\"{\n            'mt-2': ['bottom', 'left', 'right'].includes(placement),\n            'ml-2': placement == 'right-start',\n          }\"\n        >\n          <MenuItems\n            class=\"min-w-40 divide-y divide-outline-gray-modals\"\n            :class=\"{\n              'left-0 origin-top-left': placement == 'left',\n              'right-0 origin-top-right': placement == 'right',\n              'inset-x-0 origin-top': placement == 'center',\n              'mt-0 origin-top-right': placement == 'right-start',\n            }\"\n          >\n            <div v-for=\"group in groups\" :key=\"group.key\" class=\"p-1.5\">\n              <div\n                v-if=\"group.group && !group.hideLabel\"\n                class=\"flex h-7 items-center px-2 text-sm font-medium text-ink-gray-4\"\n              >\n                {{ group.group }}\n              </div>\n              <MenuItem\n                v-for=\"item in group.items\"\n                :key=\"item.label\"\n                v-slot=\"{ active }\"\n              >\n                <slot name=\"item\" v-bind=\"{ item, active }\">\n                  <component\n                    v-if=\"item.component\"\n                    :is=\"item.component\"\n                    :active=\"active\"\n                  />\n                  <button\n                    v-else\n                    :class=\"[\n                      active ? 'bg-surface-gray-3' : 'text-ink-gray-6',\n                      'group flex h-7 w-full items-center rounded px-2 text-base',\n                    ]\"\n                    @click=\"item.onClick\"\n                  >\n                    <FeatherIcon\n                      v-if=\"item.icon && typeof item.icon === 'string'\"\n                      :name=\"item.icon\"\n                      class=\"mr-2 h-4 w-4 flex-shrink-0 text-ink-gray-7\"\n                      aria-hidden=\"true\"\n                    />\n                    <component\n                      class=\"mr-2 h-4 w-4 flex-shrink-0 text-ink-gray-7\"\n                      v-else-if=\"item.icon\"\n                      :is=\"item.icon\"\n                    />\n                    <span class=\"whitespace-nowrap text-ink-gray-7\">\n                      {{ item.label }}\n                    </span>\n                  </button>\n                </slot>\n              </MenuItem>\n            </div>\n          </MenuItems>\n          <div v-if=\"slots.footer\" class=\"border-t p-1.5\">\n            <slot name=\"footer\"></slot>\n          </div>\n        </div>\n      </template>\n    </Popover>\n  </Menu>\n</template>\n\n<script setup>\nimport { Menu, MenuButton, MenuItems, MenuItem } from \"@headlessui/vue\";\nimport { Popover, Button, FeatherIcon } from \"frappe-ui\";\nimport { computed, useSlots } from \"vue\";\nimport { useRouter } from \"vue-router\";\n\nconst props = defineProps({\n  button: {\n    type: Object,\n    default: null,\n  },\n  options: {\n    type: Array,\n    default: () => [],\n  },\n  placement: {\n    type: String,\n    default: \"left\",\n  },\n});\n\nconst router = useRouter();\nconst slots = useSlots();\n\nconst dropdownTransition = {\n  enterActiveClass: \"transition duration-100 ease-out\",\n  enterFromClass: \"transform scale-95 opacity-0\",\n  enterToClass: \"transform scale-100 opacity-100\",\n  leaveActiveClass: \"transition duration-75 ease-in\",\n  leaveFromClass: \"transform scale-100 opacity-100\",\n  leaveToClass: \"transform scale-95 opacity-0\",\n};\n\nconst groups = computed(() => {\n  let groups = props.options[0]?.group\n    ? props.options\n    : [{ group: \"\", items: props.options }];\n\n  return groups.map((group, i) => {\n    return {\n      key: i,\n      group: group.group,\n      hideLabel: group.hideLabel || false,\n      items: filterOptions(group.items),\n    };\n  });\n});\n\nconst popoverPlacement = computed(() => {\n  if (props.placement === \"left\") return \"bottom-start\";\n  if (props.placement === \"right\") return \"bottom-end\";\n  if (props.placement === \"center\") return \"bottom-center\";\n  if (props.placement === \"right-start\") return \"right-start\";\n  return \"bottom\";\n});\n\nfunction normalizeDropdownItem(option) {\n  let onClick = option.onClick || null;\n  if (!onClick && option.route && router) {\n    onClick = () => router.push(option.route);\n  }\n\n  return {\n    name: option.name,\n    label: option.label,\n    icon: option.icon,\n    group: option.group,\n    component: option.component,\n    onClick,\n  };\n}\n\nfunction filterOptions(options) {\n  return (options || [])\n    .filter(Boolean)\n    .filter((option) => (option.condition ? option.condition() : true))\n    .map((option) => normalizeDropdownItem(option));\n}\n</script>\n"],"names":["props","__props","router","useRouter","slots","useSlots","dropdownTransition","groups","computed","_a","group","i","filterOptions","popoverPlacement","normalizeDropdownItem","option","onClick","options","_createBlock","_unref","Menu","_withCtx","open","_createVNode","Popover","togglePopover","MenuButton","$slots","_renderSlot","_ctx","_normalizeProps","_mergeProps","_openBlock","_createElementVNode","MenuItems","_createElementBlock","_Fragment","_renderList","_hoisted_1","_toDisplayString","item","MenuItem","active","_resolveDynamicComponent","_normalizeClass","FeatherIcon","_hoisted_3","_hoisted_4"],"mappings":"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"}